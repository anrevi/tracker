(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const d of u.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();var Hd={exports:{}},wa={},Wd={exports:{}},Oe={};var Om;function P_(){if(Om)return Oe;Om=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),P=Symbol.iterator;function O(V){return V===null||typeof V!="object"?null:(V=P&&V[P]||V["@@iterator"],typeof V=="function"?V:null)}var H={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y=Object.assign,X={};function $(V,B,ie){this.props=V,this.context=B,this.refs=X,this.updater=ie||H}$.prototype.isReactComponent={},$.prototype.setState=function(V,B){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,B,"setState")},$.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Ee(){}Ee.prototype=$.prototype;function me(V,B,ie){this.props=V,this.context=B,this.refs=X,this.updater=ie||H}var xe=me.prototype=new Ee;xe.constructor=me,Y(xe,$.prototype),xe.isPureReactComponent=!0;var ke=Array.isArray,Je=Object.prototype.hasOwnProperty,Ae={current:null},b={key:!0,ref:!0,__self:!0,__source:!0};function x(V,B,ie){var be,Pe={},Ve=null,Ue=null;if(B!=null)for(be in B.ref!==void 0&&(Ue=B.ref),B.key!==void 0&&(Ve=""+B.key),B)Je.call(B,be)&&!b.hasOwnProperty(be)&&(Pe[be]=B[be]);var We=arguments.length-2;if(We===1)Pe.children=ie;else if(1<We){for(var rt=Array(We),xt=0;xt<We;xt++)rt[xt]=arguments[xt+2];Pe.children=rt}if(V&&V.defaultProps)for(be in We=V.defaultProps,We)Pe[be]===void 0&&(Pe[be]=We[be]);return{$$typeof:s,type:V,key:Ve,ref:Ue,props:Pe,_owner:Ae.current}}function S(V,B){return{$$typeof:s,type:V.type,key:B,ref:V.ref,props:V.props,_owner:V._owner}}function R(V){return typeof V=="object"&&V!==null&&V.$$typeof===s}function D(V){var B={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ie){return B[ie]})}var M=/\/+/g;function I(V,B){return typeof V=="object"&&V!==null&&V.key!=null?D(""+V.key):B.toString(36)}function ft(V,B,ie,be,Pe){var Ve=typeof V;(Ve==="undefined"||Ve==="boolean")&&(V=null);var Ue=!1;if(V===null)Ue=!0;else switch(Ve){case"string":case"number":Ue=!0;break;case"object":switch(V.$$typeof){case s:case e:Ue=!0}}if(Ue)return Ue=V,Pe=Pe(Ue),V=be===""?"."+I(Ue,0):be,ke(Pe)?(ie="",V!=null&&(ie=V.replace(M,"$&/")+"/"),ft(Pe,B,ie,"",function(xt){return xt})):Pe!=null&&(R(Pe)&&(Pe=S(Pe,ie+(!Pe.key||Ue&&Ue.key===Pe.key?"":(""+Pe.key).replace(M,"$&/")+"/")+V)),B.push(Pe)),1;if(Ue=0,be=be===""?".":be+":",ke(V))for(var We=0;We<V.length;We++){Ve=V[We];var rt=be+I(Ve,We);Ue+=ft(Ve,B,ie,rt,Pe)}else if(rt=O(V),typeof rt=="function")for(V=rt.call(V),We=0;!(Ve=V.next()).done;)Ve=Ve.value,rt=be+I(Ve,We++),Ue+=ft(Ve,B,ie,rt,Pe);else if(Ve==="object")throw B=String(V),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return Ue}function vt(V,B,ie){if(V==null)return V;var be=[],Pe=0;return ft(V,be,"","",function(Ve){return B.call(ie,Ve,Pe++)}),be}function Nt(V){if(V._status===-1){var B=V._result;B=B(),B.then(function(ie){(V._status===0||V._status===-1)&&(V._status=1,V._result=ie)},function(ie){(V._status===0||V._status===-1)&&(V._status=2,V._result=ie)}),V._status===-1&&(V._status=0,V._result=B)}if(V._status===1)return V._result.default;throw V._result}var He={current:null},te={transition:null},pe={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:te,ReactCurrentOwner:Ae};function re(){throw Error("act(...) is not supported in production builds of React.")}return Oe.Children={map:vt,forEach:function(V,B,ie){vt(V,function(){B.apply(this,arguments)},ie)},count:function(V){var B=0;return vt(V,function(){B++}),B},toArray:function(V){return vt(V,function(B){return B})||[]},only:function(V){if(!R(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Oe.Component=$,Oe.Fragment=t,Oe.Profiler=o,Oe.PureComponent=me,Oe.StrictMode=i,Oe.Suspense=g,Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Oe.act=re,Oe.cloneElement=function(V,B,ie){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var be=Y({},V.props),Pe=V.key,Ve=V.ref,Ue=V._owner;if(B!=null){if(B.ref!==void 0&&(Ve=B.ref,Ue=Ae.current),B.key!==void 0&&(Pe=""+B.key),V.type&&V.type.defaultProps)var We=V.type.defaultProps;for(rt in B)Je.call(B,rt)&&!b.hasOwnProperty(rt)&&(be[rt]=B[rt]===void 0&&We!==void 0?We[rt]:B[rt])}var rt=arguments.length-2;if(rt===1)be.children=ie;else if(1<rt){We=Array(rt);for(var xt=0;xt<rt;xt++)We[xt]=arguments[xt+2];be.children=We}return{$$typeof:s,type:V.type,key:Pe,ref:Ve,props:be,_owner:Ue}},Oe.createContext=function(V){return V={$$typeof:d,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:u,_context:V},V.Consumer=V},Oe.createElement=x,Oe.createFactory=function(V){var B=x.bind(null,V);return B.type=V,B},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(V){return{$$typeof:m,render:V}},Oe.isValidElement=R,Oe.lazy=function(V){return{$$typeof:T,_payload:{_status:-1,_result:V},_init:Nt}},Oe.memo=function(V,B){return{$$typeof:w,type:V,compare:B===void 0?null:B}},Oe.startTransition=function(V){var B=te.transition;te.transition={};try{V()}finally{te.transition=B}},Oe.unstable_act=re,Oe.useCallback=function(V,B){return He.current.useCallback(V,B)},Oe.useContext=function(V){return He.current.useContext(V)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(V){return He.current.useDeferredValue(V)},Oe.useEffect=function(V,B){return He.current.useEffect(V,B)},Oe.useId=function(){return He.current.useId()},Oe.useImperativeHandle=function(V,B,ie){return He.current.useImperativeHandle(V,B,ie)},Oe.useInsertionEffect=function(V,B){return He.current.useInsertionEffect(V,B)},Oe.useLayoutEffect=function(V,B){return He.current.useLayoutEffect(V,B)},Oe.useMemo=function(V,B){return He.current.useMemo(V,B)},Oe.useReducer=function(V,B,ie){return He.current.useReducer(V,B,ie)},Oe.useRef=function(V){return He.current.useRef(V)},Oe.useState=function(V){return He.current.useState(V)},Oe.useSyncExternalStore=function(V,B,ie){return He.current.useSyncExternalStore(V,B,ie)},Oe.useTransition=function(){return He.current.useTransition()},Oe.version="18.3.1",Oe}var Vm;function Nh(){return Vm||(Vm=1,Wd.exports=P_()),Wd.exports}var Mm;function b_(){if(Mm)return wa;Mm=1;var s=Nh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function d(m,g,w){var T,P={},O=null,H=null;w!==void 0&&(O=""+w),g.key!==void 0&&(O=""+g.key),g.ref!==void 0&&(H=g.ref);for(T in g)i.call(g,T)&&!u.hasOwnProperty(T)&&(P[T]=g[T]);if(m&&m.defaultProps)for(T in g=m.defaultProps,g)P[T]===void 0&&(P[T]=g[T]);return{$$typeof:e,type:m,key:O,ref:H,props:P,_owner:o.current}}return wa.Fragment=t,wa.jsx=d,wa.jsxs=d,wa}var Lm;function N_(){return Lm||(Lm=1,Hd.exports=b_()),Hd.exports}var v=N_(),De=Nh(),yu={},qd={exports:{}},xn={},Kd={exports:{}},Gd={};var jm;function D_(){return jm||(jm=1,(function(s){function e(te,pe){var re=te.length;te.push(pe);e:for(;0<re;){var V=re-1>>>1,B=te[V];if(0<o(B,pe))te[V]=pe,te[re]=B,re=V;else break e}}function t(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var pe=te[0],re=te.pop();if(re!==pe){te[0]=re;e:for(var V=0,B=te.length,ie=B>>>1;V<ie;){var be=2*(V+1)-1,Pe=te[be],Ve=be+1,Ue=te[Ve];if(0>o(Pe,re))Ve<B&&0>o(Ue,Pe)?(te[V]=Ue,te[Ve]=re,V=Ve):(te[V]=Pe,te[be]=re,V=be);else if(Ve<B&&0>o(Ue,re))te[V]=Ue,te[Ve]=re,V=Ve;else break e}}return pe}function o(te,pe){var re=te.sortIndex-pe.sortIndex;return re!==0?re:te.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var d=Date,m=d.now();s.unstable_now=function(){return d.now()-m}}var g=[],w=[],T=1,P=null,O=3,H=!1,Y=!1,X=!1,$=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function xe(te){for(var pe=t(w);pe!==null;){if(pe.callback===null)i(w);else if(pe.startTime<=te)i(w),pe.sortIndex=pe.expirationTime,e(g,pe);else break;pe=t(w)}}function ke(te){if(X=!1,xe(te),!Y)if(t(g)!==null)Y=!0,Nt(Je);else{var pe=t(w);pe!==null&&He(ke,pe.startTime-te)}}function Je(te,pe){Y=!1,X&&(X=!1,Ee(x),x=-1),H=!0;var re=O;try{for(xe(pe),P=t(g);P!==null&&(!(P.expirationTime>pe)||te&&!D());){var V=P.callback;if(typeof V=="function"){P.callback=null,O=P.priorityLevel;var B=V(P.expirationTime<=pe);pe=s.unstable_now(),typeof B=="function"?P.callback=B:P===t(g)&&i(g),xe(pe)}else i(g);P=t(g)}if(P!==null)var ie=!0;else{var be=t(w);be!==null&&He(ke,be.startTime-pe),ie=!1}return ie}finally{P=null,O=re,H=!1}}var Ae=!1,b=null,x=-1,S=5,R=-1;function D(){return!(s.unstable_now()-R<S)}function M(){if(b!==null){var te=s.unstable_now();R=te;var pe=!0;try{pe=b(!0,te)}finally{pe?I():(Ae=!1,b=null)}}else Ae=!1}var I;if(typeof me=="function")I=function(){me(M)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,vt=ft.port2;ft.port1.onmessage=M,I=function(){vt.postMessage(null)}}else I=function(){$(M,0)};function Nt(te){b=te,Ae||(Ae=!0,I())}function He(te,pe){x=$(function(){te(s.unstable_now())},pe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(te){te.callback=null},s.unstable_continueExecution=function(){Y||H||(Y=!0,Nt(Je))},s.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<te?Math.floor(1e3/te):5},s.unstable_getCurrentPriorityLevel=function(){return O},s.unstable_getFirstCallbackNode=function(){return t(g)},s.unstable_next=function(te){switch(O){case 1:case 2:case 3:var pe=3;break;default:pe=O}var re=O;O=pe;try{return te()}finally{O=re}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(te,pe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var re=O;O=te;try{return pe()}finally{O=re}},s.unstable_scheduleCallback=function(te,pe,re){var V=s.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?V+re:V):re=V,te){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=re+B,te={id:T++,callback:pe,priorityLevel:te,startTime:re,expirationTime:B,sortIndex:-1},re>V?(te.sortIndex=re,e(w,te),t(g)===null&&te===t(w)&&(X?(Ee(x),x=-1):X=!0,He(ke,re-V))):(te.sortIndex=B,e(g,te),Y||H||(Y=!0,Nt(Je))),te},s.unstable_shouldYield=D,s.unstable_wrapCallback=function(te){var pe=O;return function(){var re=O;O=pe;try{return te.apply(this,arguments)}finally{O=re}}}})(Gd)),Gd}var Fm;function O_(){return Fm||(Fm=1,Kd.exports=D_()),Kd.exports}var Um;function V_(){if(Um)return xn;Um=1;var s=Nh(),e=O_();function t(n){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function u(n,r){d(n,r),d(n+"Capture",r)}function d(n,r){for(o[n]=r,n=0;n<r.length;n++)i.add(r[n])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},P={};function O(n){return g.call(P,n)?!0:g.call(T,n)?!1:w.test(n)?P[n]=!0:(T[n]=!0,!1)}function H(n,r,a,c){if(a!==null&&a.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Y(n,r,a,c){if(r===null||typeof r>"u"||H(n,r,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(n,r,a,c,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=c,this.attributeNamespace=h,this.mustUseProperty=a,this.propertyName=n,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var $={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){$[n]=new X(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var r=n[0];$[r]=new X(r,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){$[n]=new X(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){$[n]=new X(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){$[n]=new X(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){$[n]=new X(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){$[n]=new X(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){$[n]=new X(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){$[n]=new X(n,5,!1,n.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function me(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var r=n.replace(Ee,me);$[r]=new X(r,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var r=n.replace(Ee,me);$[r]=new X(r,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var r=n.replace(Ee,me);$[r]=new X(r,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){$[n]=new X(n,1,!1,n.toLowerCase(),null,!1,!1)}),$.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){$[n]=new X(n,1,!1,n.toLowerCase(),null,!0,!0)});function xe(n,r,a,c){var h=$.hasOwnProperty(r)?$[r]:null;(h!==null?h.type!==0:c||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Y(r,a,h,c)&&(a=null),c||h===null?O(r)&&(a===null?n.removeAttribute(r):n.setAttribute(r,""+a)):h.mustUseProperty?n[h.propertyName]=a===null?h.type===3?!1:"":a:(r=h.attributeName,c=h.attributeNamespace,a===null?n.removeAttribute(r):(h=h.type,a=h===3||h===4&&a===!0?"":""+a,c?n.setAttributeNS(c,r,a):n.setAttribute(r,a))))}var ke=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Je=Symbol.for("react.element"),Ae=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),D=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),ft=Symbol.for("react.suspense_list"),vt=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),He=Symbol.for("react.offscreen"),te=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=te&&n[te]||n["@@iterator"],typeof n=="function"?n:null)}var re=Object.assign,V;function B(n){if(V===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);V=r&&r[1]||""}return`
`+V+n}var ie=!1;function be(n,r){if(!n||ie)return"";ie=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var c=U}Reflect.construct(n,[],r)}else{try{r.call()}catch(U){c=U}n.call(r.prototype)}else{try{throw Error()}catch(U){c=U}n()}}catch(U){if(U&&c&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=c.stack.split(`
`),_=h.length-1,k=p.length-1;1<=_&&0<=k&&h[_]!==p[k];)k--;for(;1<=_&&0<=k;_--,k--)if(h[_]!==p[k]){if(_!==1||k!==1)do if(_--,k--,0>k||h[_]!==p[k]){var C=`
`+h[_].replace(" at new "," at ");return n.displayName&&C.includes("<anonymous>")&&(C=C.replace("<anonymous>",n.displayName)),C}while(1<=_&&0<=k);break}}}finally{ie=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?B(n):""}function Pe(n){switch(n.tag){case 5:return B(n.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return n=be(n.type,!1),n;case 11:return n=be(n.type.render,!1),n;case 1:return n=be(n.type,!0),n;default:return""}}function Ve(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case b:return"Fragment";case Ae:return"Portal";case S:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case ft:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case D:return(n.displayName||"Context")+".Consumer";case R:return(n._context.displayName||"Context")+".Provider";case M:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case vt:return r=n.displayName||null,r!==null?r:Ve(n.type)||"Memo";case Nt:r=n._payload,n=n._init;try{return Ve(n(r))}catch{}}return null}function Ue(n){var r=n.type;switch(n.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=r.render,n=n.displayName||n.name||"",r.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(r);case 8:return r===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function We(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function rt(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function xt(n){var r=rt(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),c=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var h=a.get,p=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){c=""+_,p.call(this,_)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(_){c=""+_},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Ut(n){n._valueTracker||(n._valueTracker=xt(n))}function Qn(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return n&&(c=rt(n)?n.checked?"true":"false":n.value),n=c,n!==a?(r.setValue(n),!0):!1}function An(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Xt(n,r){var a=r.checked;return re({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ln(n,r){var a=r.defaultValue==null?"":r.defaultValue,c=r.checked!=null?r.checked:r.defaultChecked;a=We(r.value!=null?r.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function mn(n,r){r=r.checked,r!=null&&xe(n,"checked",r,!1)}function Dr(n,r){mn(n,r);var a=We(r.value),c=r.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}r.hasOwnProperty("value")?ls(n,r.type,a):r.hasOwnProperty("defaultValue")&&ls(n,r.type,We(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(n.defaultChecked=!!r.defaultChecked)}function Ln(n,r,a){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var c=r.type;if(!(c!=="submit"&&c!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+n._wrapperState.initialValue,a||r===n.value||(n.value=r),n.defaultValue=r}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ls(n,r,a){(r!=="number"||An(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var Jt=Array.isArray;function Rn(n,r,a,c){if(n=n.options,r){r={};for(var h=0;h<a.length;h++)r["$"+a[h]]=!0;for(a=0;a<n.length;a++)h=r.hasOwnProperty("$"+n[a].value),n[a].selected!==h&&(n[a].selected=h),h&&c&&(n[a].defaultSelected=!0)}else{for(a=""+We(a),r=null,h=0;h<n.length;h++){if(n[h].value===a){n[h].selected=!0,c&&(n[h].defaultSelected=!0);return}r!==null||n[h].disabled||(r=n[h])}r!==null&&(r.selected=!0)}}function us(n,r){if(r.dangerouslySetInnerHTML!=null)throw Error(t(91));return re({},r,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Bt(n,r){var a=r.value;if(a==null){if(a=r.children,r=r.defaultValue,a!=null){if(r!=null)throw Error(t(92));if(Jt(a)){if(1<a.length)throw Error(t(93));a=a[0]}r=a}r==null&&(r=""),a=r}n._wrapperState={initialValue:We(a)}}function un(n,r){var a=We(r.value),c=We(r.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),r.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Yn(n){var r=n.textContent;r===n._wrapperState.initialValue&&r!==""&&r!==null&&(n.value=r)}function _t(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wt(n,r){return n==null||n==="http://www.w3.org/1999/xhtml"?_t(r):n==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Xn,Qs=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,a,c,h){MSApp.execUnsafeLocalFunction(function(){return n(r,a,c,h)})}:n})(function(n,r){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=r;else{for(Xn=Xn||document.createElement("div"),Xn.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=Xn.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;r.firstChild;)n.appendChild(r.firstChild)}});function pr(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vr=["Webkit","ms","Moz","O"];Object.keys(Or).forEach(function(n){Vr.forEach(function(r){r=r+n.charAt(0).toUpperCase()+n.substring(1),Or[r]=Or[n]})});function Ys(n,r,a){return r==null||typeof r=="boolean"||r===""?"":a||typeof r!="number"||r===0||Or.hasOwnProperty(n)&&Or[n]?(""+r).trim():r+"px"}function Xs(n,r){n=n.style;for(var a in r)if(r.hasOwnProperty(a)){var c=a.indexOf("--")===0,h=Ys(a,r[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,h):n[a]=h}}var Js=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zs(n,r){if(r){if(Js[n]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(t(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(t(61))}if(r.style!=null&&typeof r.style!="object")throw Error(t(62))}}function ei(n,r){if(n.indexOf("-")===-1)return typeof r.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mr=null;function A(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ee=null,de=null,ae=null;function ge(n){if(n=ia(n)){if(typeof ee!="function")throw Error(t(280));var r=n.stateNode;r&&(r=Nl(r),ee(n.stateNode,n.type,r))}}function ne(n){de?ae?ae.push(n):ae=[n]:de=n}function ye(){if(de){var n=de,r=ae;if(ae=de=null,ge(n),r)for(n=0;n<r.length;n++)ge(r[n])}}function Ke(n,r){return n(r)}function Le(){}var st=!1;function Be(n,r,a){if(st)return n(r,a);st=!0;try{return Ke(n,r,a)}finally{st=!1,(de!==null||ae!==null)&&(Le(),ye())}}function Ne(n,r){var a=n.stateNode;if(a===null)return null;var c=Nl(a);if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,r,typeof a));return a}var Ze=!1;if(m)try{var et={};Object.defineProperty(et,"passive",{get:function(){Ze=!0}}),window.addEventListener("test",et,et),window.removeEventListener("test",et,et)}catch{Ze=!1}function Dt(n,r,a,c,h,p,_,k,C){var U=Array.prototype.slice.call(arguments,3);try{r.apply(a,U)}catch(q){this.onError(q)}}var jn=!1,Fn=null,cn=!1,Fo=null,vc={onError:function(n){jn=!0,Fn=n}};function Di(n,r,a,c,h,p,_,k,C){jn=!1,Fn=null,Dt.apply(vc,arguments)}function rl(n,r,a,c,h,p,_,k,C){if(Di.apply(this,arguments),jn){if(jn){var U=Fn;jn=!1,Fn=null}else throw Error(t(198));cn||(cn=!0,Fo=U)}}function Jn(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function ti(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function Zn(n){if(Jn(n)!==n)throw Error(t(188))}function sl(n){var r=n.alternate;if(!r){if(r=Jn(n),r===null)throw Error(t(188));return r!==n?null:n}for(var a=n,c=r;;){var h=a.return;if(h===null)break;var p=h.alternate;if(p===null){if(c=h.return,c!==null){a=c;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===a)return Zn(h),n;if(p===c)return Zn(h),r;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=h,c=p;else{for(var _=!1,k=h.child;k;){if(k===a){_=!0,a=h,c=p;break}if(k===c){_=!0,c=h,a=p;break}k=k.sibling}if(!_){for(k=p.child;k;){if(k===a){_=!0,a=p,c=h;break}if(k===c){_=!0,c=p,a=h;break}k=k.sibling}if(!_)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:r}function Uo(n){return n=sl(n),n!==null?Oi(n):null}function Oi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var r=Oi(n);if(r!==null)return r;n=n.sibling}return null}var Vi=e.unstable_scheduleCallback,Bo=e.unstable_cancelCallback,il=e.unstable_shouldYield,_c=e.unstable_requestPaint,ot=e.unstable_now,ol=e.unstable_getCurrentPriorityLevel,ni=e.unstable_ImmediatePriority,cs=e.unstable_UserBlockingPriority,Un=e.unstable_NormalPriority,zo=e.unstable_LowPriority,al=e.unstable_IdlePriority,ri=null,Cn=null;function ll(n){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(ri,n,void 0,(n.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:cl,$o=Math.log,ul=Math.LN2;function cl(n){return n>>>=0,n===0?32:31-($o(n)/ul|0)|0}var Mi=64,Li=4194304;function ds(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function si(n,r){var a=n.pendingLanes;if(a===0)return 0;var c=0,h=n.suspendedLanes,p=n.pingedLanes,_=a&268435455;if(_!==0){var k=_&~h;k!==0?c=ds(k):(p&=_,p!==0&&(c=ds(p)))}else _=a&~h,_!==0?c=ds(_):p!==0&&(c=ds(p));if(c===0)return 0;if(r!==0&&r!==c&&(r&h)===0&&(h=c&-c,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if((c&4)!==0&&(c|=a&16),r=n.entangledLanes,r!==0)for(n=n.entanglements,r&=c;0<r;)a=31-dn(r),h=1<<a,c|=n[a],r&=~h;return c}function wc(n,r){switch(n){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lr(n,r){for(var a=n.suspendedLanes,c=n.pingedLanes,h=n.expirationTimes,p=n.pendingLanes;0<p;){var _=31-dn(p),k=1<<_,C=h[_];C===-1?((k&a)===0||(k&c)!==0)&&(h[_]=wc(k,r)):C<=r&&(n.expiredLanes|=k),p&=~k}}function Pn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ii(){var n=Mi;return Mi<<=1,(Mi&4194240)===0&&(Mi=64),n}function hs(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function fs(n,r,a){n.pendingLanes|=r,r!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,r=31-dn(r),n[r]=a}function it(n,r){var a=n.pendingLanes&~r;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=r,n.mutableReadLanes&=r,n.entangledLanes&=r,r=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var h=31-dn(a),p=1<<h;r[h]=0,c[h]=-1,n[h]=-1,a&=~p}}function ps(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var c=31-dn(a),h=1<<c;h&r|n[c]&r&&(n[c]|=r),a&=~h}}var je=0;function ms(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var dl,ji,hl,fl,pl,Ho=!1,mr=[],zt=null,er=null,tr=null,gs=new Map,Bn=new Map,gr=[],Ec="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ml(n,r){switch(n){case"focusin":case"focusout":zt=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":tr=null;break;case"pointerover":case"pointerout":gs.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bn.delete(r.pointerId)}}function gn(n,r,a,c,h,p){return n===null||n.nativeEvent!==p?(n={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[h]},r!==null&&(r=ia(r),r!==null&&ji(r)),n):(n.eventSystemFlags|=c,r=n.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),n)}function Tc(n,r,a,c,h){switch(r){case"focusin":return zt=gn(zt,n,r,a,c,h),!0;case"dragenter":return er=gn(er,n,r,a,c,h),!0;case"mouseover":return tr=gn(tr,n,r,a,c,h),!0;case"pointerover":var p=h.pointerId;return gs.set(p,gn(gs.get(p)||null,n,r,a,c,h)),!0;case"gotpointercapture":return p=h.pointerId,Bn.set(p,gn(Bn.get(p)||null,n,r,a,c,h)),!0}return!1}function gl(n){var r=ci(n.target);if(r!==null){var a=Jn(r);if(a!==null){if(r=a.tag,r===13){if(r=ti(a),r!==null){n.blockedOn=r,pl(n.priority,function(){hl(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jr(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=Fi(n.domEventName,n.eventSystemFlags,r[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Mr=c,a.target.dispatchEvent(c),Mr=null}else return r=ia(a),r!==null&&ji(r),n.blockedOn=a,!1;r.shift()}return!0}function oi(n,r,a){jr(n)&&a.delete(r)}function yl(){Ho=!1,zt!==null&&jr(zt)&&(zt=null),er!==null&&jr(er)&&(er=null),tr!==null&&jr(tr)&&(tr=null),gs.forEach(oi),Bn.forEach(oi)}function nr(n,r){n.blockedOn===r&&(n.blockedOn=null,Ho||(Ho=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,yl)))}function rr(n){function r(h){return nr(h,n)}if(0<mr.length){nr(mr[0],n);for(var a=1;a<mr.length;a++){var c=mr[a];c.blockedOn===n&&(c.blockedOn=null)}}for(zt!==null&&nr(zt,n),er!==null&&nr(er,n),tr!==null&&nr(tr,n),gs.forEach(r),Bn.forEach(r),a=0;a<gr.length;a++)c=gr[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<gr.length&&(a=gr[0],a.blockedOn===null);)gl(a),a.blockedOn===null&&gr.shift()}var Fr=ke.ReactCurrentBatchConfig,ys=!0;function ct(n,r,a,c){var h=je,p=Fr.transition;Fr.transition=null;try{je=1,Wo(n,r,a,c)}finally{je=h,Fr.transition=p}}function xc(n,r,a,c){var h=je,p=Fr.transition;Fr.transition=null;try{je=4,Wo(n,r,a,c)}finally{je=h,Fr.transition=p}}function Wo(n,r,a,c){if(ys){var h=Fi(n,r,a,c);if(h===null)Oc(n,r,c,ai,a),ml(n,c);else if(Tc(h,n,r,a,c))c.stopPropagation();else if(ml(n,c),r&4&&-1<Ec.indexOf(n)){for(;h!==null;){var p=ia(h);if(p!==null&&dl(p),p=Fi(n,r,a,c),p===null&&Oc(n,r,c,ai,a),p===h)break;h=p}h!==null&&c.stopPropagation()}else Oc(n,r,c,null,a)}}var ai=null;function Fi(n,r,a,c){if(ai=null,n=A(c),n=ci(n),n!==null)if(r=Jn(n),r===null)n=null;else if(a=r.tag,a===13){if(n=ti(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null);return ai=n,null}function qo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ol()){case ni:return 1;case cs:return 4;case Un:case zo:return 16;case al:return 536870912;default:return 16}default:return 16}}var bn=null,Ui=null,yn=null;function Ko(){if(yn)return yn;var n,r=Ui,a=r.length,c,h="value"in bn?bn.value:bn.textContent,p=h.length;for(n=0;n<a&&r[n]===h[n];n++);var _=a-n;for(c=1;c<=_&&r[a-c]===h[p-c];c++);return yn=h.slice(n,1<c?1-c:void 0)}function Bi(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function yr(){return!0}function Go(){return!1}function $t(n){function r(a,c,h,p,_){this._reactName=a,this._targetInst=h,this.type=c,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var k in n)n.hasOwnProperty(k)&&(a=n[k],this[k]=a?a(p):p[k]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?yr:Go,this.isPropagationStopped=Go,this}return re(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=yr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=yr)},persist:function(){},isPersistent:yr}),r}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zi=$t(sr),vr=re({},sr,{view:0,detail:0}),kc=$t(vr),$i,Ur,vs,li=re({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vs&&(vs&&n.type==="mousemove"?($i=n.screenX-vs.screenX,Ur=n.screenY-vs.screenY):Ur=$i=0,vs=n),$i)},movementY:function(n){return"movementY"in n?n.movementY:Ur}}),Hi=$t(li),Qo=re({},li,{dataTransfer:0}),vl=$t(Qo),Wi=re({},vr,{relatedTarget:0}),qi=$t(Wi),_l=re({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Br=$t(_l),wl=re({},sr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),El=$t(wl),Tl=re({},sr,{data:0}),Yo=$t(Tl),Ki={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=xl[n])?!!r[n]:!1}function _r(){return kl}var l=re({},vr,{key:function(n){if(n.key){var r=Ki[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Bi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hn[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(n){return n.type==="keypress"?Bi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Bi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),f=$t(l),y=re({},li,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=$t(y),L=re({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r}),z=$t(L),Z=re({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),tt=$t(Z),At=re({},li,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),ze=$t(At),Ot=[9,13,27,32],kt=m&&"CompositionEvent"in window,zn=null;m&&"documentMode"in document&&(zn=document.documentMode);var Nn=m&&"TextEvent"in window&&!zn,ui=m&&(!kt||zn&&8<zn&&11>=zn),Gi=" ",Rf=!1;function Cf(n,r){switch(n){case"keyup":return Ot.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qi=!1;function Av(n,r){switch(n){case"compositionend":return Pf(r);case"keypress":return r.which!==32?null:(Rf=!0,Gi);case"textInput":return n=r.data,n===Gi&&Rf?null:n;default:return null}}function Rv(n,r){if(Qi)return n==="compositionend"||!kt&&Cf(n,r)?(n=Ko(),yn=Ui=bn=null,Qi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return ui&&r.locale!=="ko"?null:r.data;default:return null}}var Cv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Cv[n.type]:r==="textarea"}function Nf(n,r,a,c){ne(c),r=Cl(r,"onChange"),0<r.length&&(a=new zi("onChange","change",null,a,c),n.push({event:a,listeners:r}))}var Xo=null,Jo=null;function Pv(n){Yf(n,0)}function Il(n){var r=eo(n);if(Qn(r))return n}function bv(n,r){if(n==="change")return r}var Df=!1;if(m){var Ic;if(m){var Sc="oninput"in document;if(!Sc){var Of=document.createElement("div");Of.setAttribute("oninput","return;"),Sc=typeof Of.oninput=="function"}Ic=Sc}else Ic=!1;Df=Ic&&(!document.documentMode||9<document.documentMode)}function Vf(){Xo&&(Xo.detachEvent("onpropertychange",Mf),Jo=Xo=null)}function Mf(n){if(n.propertyName==="value"&&Il(Jo)){var r=[];Nf(r,Jo,n,A(n)),Be(Pv,r)}}function Nv(n,r,a){n==="focusin"?(Vf(),Xo=r,Jo=a,Xo.attachEvent("onpropertychange",Mf)):n==="focusout"&&Vf()}function Dv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Il(Jo)}function Ov(n,r){if(n==="click")return Il(r)}function Vv(n,r){if(n==="input"||n==="change")return Il(r)}function Mv(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var ir=typeof Object.is=="function"?Object.is:Mv;function Zo(n,r){if(ir(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var h=a[c];if(!g.call(r,h)||!ir(n[h],r[h]))return!1}return!0}function Lf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function jf(n,r){var a=Lf(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=r&&c>=r)return{node:a,offset:r-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Lf(a)}}function Ff(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Ff(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Uf(){for(var n=window,r=An();r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=An(n.document)}return r}function Ac(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}function Lv(n){var r=Uf(),a=n.focusedElem,c=n.selectionRange;if(r!==a&&a&&a.ownerDocument&&Ff(a.ownerDocument.documentElement,a)){if(c!==null&&Ac(a)){if(r=c.start,n=c.end,n===void 0&&(n=r),"selectionStart"in a)a.selectionStart=r,a.selectionEnd=Math.min(n,a.value.length);else if(n=(r=a.ownerDocument||document)&&r.defaultView||window,n.getSelection){n=n.getSelection();var h=a.textContent.length,p=Math.min(c.start,h);c=c.end===void 0?p:Math.min(c.end,h),!n.extend&&p>c&&(h=c,c=p,p=h),h=jf(a,p);var _=jf(a,c);h&&_&&(n.rangeCount!==1||n.anchorNode!==h.node||n.anchorOffset!==h.offset||n.focusNode!==_.node||n.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),n.removeAllRanges(),p>c?(n.addRange(r),n.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),n.addRange(r)))}}for(r=[],n=a;n=n.parentNode;)n.nodeType===1&&r.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<r.length;a++)n=r[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var jv=m&&"documentMode"in document&&11>=document.documentMode,Yi=null,Rc=null,ea=null,Cc=!1;function Bf(n,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cc||Yi==null||Yi!==An(c)||(c=Yi,"selectionStart"in c&&Ac(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ea&&Zo(ea,c)||(ea=c,c=Cl(Rc,"onSelect"),0<c.length&&(r=new zi("onSelect","select",null,r,a),n.push({event:r,listeners:c}),r.target=Yi)))}function Sl(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var Xi={animationend:Sl("Animation","AnimationEnd"),animationiteration:Sl("Animation","AnimationIteration"),animationstart:Sl("Animation","AnimationStart"),transitionend:Sl("Transition","TransitionEnd")},Pc={},zf={};m&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function Al(n){if(Pc[n])return Pc[n];if(!Xi[n])return n;var r=Xi[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in zf)return Pc[n]=r[a];return n}var $f=Al("animationend"),Hf=Al("animationiteration"),Wf=Al("animationstart"),qf=Al("transitionend"),Kf=new Map,Gf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(n,r){Kf.set(n,r),u(r,[n])}for(var bc=0;bc<Gf.length;bc++){var Nc=Gf[bc],Fv=Nc.toLowerCase(),Uv=Nc[0].toUpperCase()+Nc.slice(1);_s(Fv,"on"+Uv)}_s($f,"onAnimationEnd"),_s(Hf,"onAnimationIteration"),_s(Wf,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(qf,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bv=new Set("cancel close invalid load scroll toggle".split(" ").concat(ta));function Qf(n,r,a){var c=n.type||"unknown-event";n.currentTarget=a,rl(c,r,void 0,n),n.currentTarget=null}function Yf(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],h=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var _=c.length-1;0<=_;_--){var k=c[_],C=k.instance,U=k.currentTarget;if(k=k.listener,C!==p&&h.isPropagationStopped())break e;Qf(h,k,U),p=C}else for(_=0;_<c.length;_++){if(k=c[_],C=k.instance,U=k.currentTarget,k=k.listener,C!==p&&h.isPropagationStopped())break e;Qf(h,k,U),p=C}}}if(cn)throw n=Fo,cn=!1,Fo=null,n}function lt(n,r){var a=r[Uc];a===void 0&&(a=r[Uc]=new Set);var c=n+"__bubble";a.has(c)||(Xf(r,n,2,!1),a.add(c))}function Dc(n,r,a){var c=0;r&&(c|=4),Xf(a,n,c,r)}var Rl="_reactListening"+Math.random().toString(36).slice(2);function na(n){if(!n[Rl]){n[Rl]=!0,i.forEach(function(a){a!=="selectionchange"&&(Bv.has(a)||Dc(a,!1,n),Dc(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[Rl]||(r[Rl]=!0,Dc("selectionchange",!1,r))}}function Xf(n,r,a,c){switch(qo(r)){case 1:var h=ct;break;case 4:h=xc;break;default:h=Wo}a=h.bind(null,r,a,n),h=void 0,!Ze||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),c?h!==void 0?n.addEventListener(r,a,{capture:!0,passive:h}):n.addEventListener(r,a,!0):h!==void 0?n.addEventListener(r,a,{passive:h}):n.addEventListener(r,a,!1)}function Oc(n,r,a,c,h){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var _=c.tag;if(_===3||_===4){var k=c.stateNode.containerInfo;if(k===h||k.nodeType===8&&k.parentNode===h)break;if(_===4)for(_=c.return;_!==null;){var C=_.tag;if((C===3||C===4)&&(C=_.stateNode.containerInfo,C===h||C.nodeType===8&&C.parentNode===h))return;_=_.return}for(;k!==null;){if(_=ci(k),_===null)return;if(C=_.tag,C===5||C===6){c=p=_;continue e}k=k.parentNode}}c=c.return}Be(function(){var U=p,q=A(a),Q=[];e:{var W=Kf.get(n);if(W!==void 0){var se=zi,le=n;switch(n){case"keypress":if(Bi(a)===0)break e;case"keydown":case"keyup":se=f;break;case"focusin":le="focus",se=qi;break;case"focusout":le="blur",se=qi;break;case"beforeblur":case"afterblur":se=qi;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Hi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=vl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=z;break;case $f:case Hf:case Wf:se=Br;break;case qf:se=tt;break;case"scroll":se=kc;break;case"wheel":se=ze;break;case"copy":case"cut":case"paste":se=El;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=E}var ue=(r&4)!==0,Et=!ue&&n==="scroll",j=ue?W!==null?W+"Capture":null:W;ue=[];for(var N=U,F;N!==null;){F=N;var J=F.stateNode;if(F.tag===5&&J!==null&&(F=J,j!==null&&(J=Ne(N,j),J!=null&&ue.push(ra(N,J,F)))),Et)break;N=N.return}0<ue.length&&(W=new se(W,le,null,a,q),Q.push({event:W,listeners:ue}))}}if((r&7)===0){e:{if(W=n==="mouseover"||n==="pointerover",se=n==="mouseout"||n==="pointerout",W&&a!==Mr&&(le=a.relatedTarget||a.fromElement)&&(ci(le)||le[zr]))break e;if((se||W)&&(W=q.window===q?q:(W=q.ownerDocument)?W.defaultView||W.parentWindow:window,se?(le=a.relatedTarget||a.toElement,se=U,le=le?ci(le):null,le!==null&&(Et=Jn(le),le!==Et||le.tag!==5&&le.tag!==6)&&(le=null)):(se=null,le=U),se!==le)){if(ue=Hi,J="onMouseLeave",j="onMouseEnter",N="mouse",(n==="pointerout"||n==="pointerover")&&(ue=E,J="onPointerLeave",j="onPointerEnter",N="pointer"),Et=se==null?W:eo(se),F=le==null?W:eo(le),W=new ue(J,N+"leave",se,a,q),W.target=Et,W.relatedTarget=F,J=null,ci(q)===U&&(ue=new ue(j,N+"enter",le,a,q),ue.target=F,ue.relatedTarget=Et,J=ue),Et=J,se&&le)t:{for(ue=se,j=le,N=0,F=ue;F;F=Ji(F))N++;for(F=0,J=j;J;J=Ji(J))F++;for(;0<N-F;)ue=Ji(ue),N--;for(;0<F-N;)j=Ji(j),F--;for(;N--;){if(ue===j||j!==null&&ue===j.alternate)break t;ue=Ji(ue),j=Ji(j)}ue=null}else ue=null;se!==null&&Jf(Q,W,se,ue,!1),le!==null&&Et!==null&&Jf(Q,Et,le,ue,!0)}}e:{if(W=U?eo(U):window,se=W.nodeName&&W.nodeName.toLowerCase(),se==="select"||se==="input"&&W.type==="file")var he=bv;else if(bf(W))if(Df)he=Vv;else{he=Dv;var ve=Nv}else(se=W.nodeName)&&se.toLowerCase()==="input"&&(W.type==="checkbox"||W.type==="radio")&&(he=Ov);if(he&&(he=he(n,U))){Nf(Q,he,a,q);break e}ve&&ve(n,W,U),n==="focusout"&&(ve=W._wrapperState)&&ve.controlled&&W.type==="number"&&ls(W,"number",W.value)}switch(ve=U?eo(U):window,n){case"focusin":(bf(ve)||ve.contentEditable==="true")&&(Yi=ve,Rc=U,ea=null);break;case"focusout":ea=Rc=Yi=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,Bf(Q,a,q);break;case"selectionchange":if(jv)break;case"keydown":case"keyup":Bf(Q,a,q)}var _e;if(kt)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Qi?Cf(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(ui&&a.locale!=="ko"&&(Qi||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Qi&&(_e=Ko()):(bn=q,Ui="value"in bn?bn.value:bn.textContent,Qi=!0)),ve=Cl(U,Ie),0<ve.length&&(Ie=new Yo(Ie,n,null,a,q),Q.push({event:Ie,listeners:ve}),_e?Ie.data=_e:(_e=Pf(a),_e!==null&&(Ie.data=_e)))),(_e=Nn?Av(n,a):Rv(n,a))&&(U=Cl(U,"onBeforeInput"),0<U.length&&(q=new Yo("onBeforeInput","beforeinput",null,a,q),Q.push({event:q,listeners:U}),q.data=_e))}Yf(Q,r)})}function ra(n,r,a){return{instance:n,listener:r,currentTarget:a}}function Cl(n,r){for(var a=r+"Capture",c=[];n!==null;){var h=n,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=Ne(n,a),p!=null&&c.unshift(ra(n,p,h)),p=Ne(n,r),p!=null&&c.push(ra(n,p,h))),n=n.return}return c}function Ji(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Jf(n,r,a,c,h){for(var p=r._reactName,_=[];a!==null&&a!==c;){var k=a,C=k.alternate,U=k.stateNode;if(C!==null&&C===c)break;k.tag===5&&U!==null&&(k=U,h?(C=Ne(a,p),C!=null&&_.unshift(ra(a,C,k))):h||(C=Ne(a,p),C!=null&&_.push(ra(a,C,k)))),a=a.return}_.length!==0&&n.push({event:r,listeners:_})}var zv=/\r\n?/g,$v=/\u0000|\uFFFD/g;function Zf(n){return(typeof n=="string"?n:""+n).replace(zv,`
`).replace($v,"")}function Pl(n,r,a){if(r=Zf(r),Zf(n)!==r&&a)throw Error(t(425))}function bl(){}var Vc=null,Mc=null;function Lc(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var jc=typeof setTimeout=="function"?setTimeout:void 0,Hv=typeof clearTimeout=="function"?clearTimeout:void 0,ep=typeof Promise=="function"?Promise:void 0,Wv=typeof queueMicrotask=="function"?queueMicrotask:typeof ep<"u"?function(n){return ep.resolve(null).then(n).catch(qv)}:jc;function qv(n){setTimeout(function(){throw n})}function Fc(n,r){var a=r,c=0;do{var h=a.nextSibling;if(n.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"){if(c===0){n.removeChild(h),rr(r);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=h}while(a);rr(r)}function ws(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return n}function tp(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}var Zi=Math.random().toString(36).slice(2),wr="__reactFiber$"+Zi,sa="__reactProps$"+Zi,zr="__reactContainer$"+Zi,Uc="__reactEvents$"+Zi,Kv="__reactListeners$"+Zi,Gv="__reactHandles$"+Zi;function ci(n){var r=n[wr];if(r)return r;for(var a=n.parentNode;a;){if(r=a[zr]||a[wr]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=tp(n);n!==null;){if(a=n[wr])return a;n=tp(n)}return r}n=a,a=n.parentNode}return null}function ia(n){return n=n[wr]||n[zr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function eo(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Nl(n){return n[sa]||null}var Bc=[],to=-1;function Es(n){return{current:n}}function ut(n){0>to||(n.current=Bc[to],Bc[to]=null,to--)}function at(n,r){to++,Bc[to]=n.current,n.current=r}var Ts={},Zt=Es(Ts),vn=Es(!1),di=Ts;function no(n,r){var a=n.type.contextTypes;if(!a)return Ts;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===r)return c.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in a)h[p]=r[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=h),h}function _n(n){return n=n.childContextTypes,n!=null}function Dl(){ut(vn),ut(Zt)}function np(n,r,a){if(Zt.current!==Ts)throw Error(t(168));at(Zt,r),at(vn,a)}function rp(n,r,a){var c=n.stateNode;if(r=r.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var h in c)if(!(h in r))throw Error(t(108,Ue(n)||"Unknown",h));return re({},a,c)}function Ol(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ts,di=Zt.current,at(Zt,n),at(vn,vn.current),!0}function sp(n,r,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=rp(n,r,di),c.__reactInternalMemoizedMergedChildContext=n,ut(vn),ut(Zt),at(Zt,n)):ut(vn),at(vn,a)}var $r=null,Vl=!1,zc=!1;function ip(n){$r===null?$r=[n]:$r.push(n)}function Qv(n){Vl=!0,ip(n)}function xs(){if(!zc&&$r!==null){zc=!0;var n=0,r=je;try{var a=$r;for(je=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}$r=null,Vl=!1}catch(h){throw $r!==null&&($r=$r.slice(n+1)),Vi(ni,xs),h}finally{je=r,zc=!1}}return null}var ro=[],so=0,Ml=null,Ll=0,$n=[],Hn=0,hi=null,Hr=1,Wr="";function fi(n,r){ro[so++]=Ll,ro[so++]=Ml,Ml=n,Ll=r}function op(n,r,a){$n[Hn++]=Hr,$n[Hn++]=Wr,$n[Hn++]=hi,hi=n;var c=Hr;n=Wr;var h=32-dn(c)-1;c&=~(1<<h),a+=1;var p=32-dn(r)+h;if(30<p){var _=h-h%5;p=(c&(1<<_)-1).toString(32),c>>=_,h-=_,Hr=1<<32-dn(r)+h|a<<h|c,Wr=p+n}else Hr=1<<p|a<<h|c,Wr=n}function $c(n){n.return!==null&&(fi(n,1),op(n,1,0))}function Hc(n){for(;n===Ml;)Ml=ro[--so],ro[so]=null,Ll=ro[--so],ro[so]=null;for(;n===hi;)hi=$n[--Hn],$n[Hn]=null,Wr=$n[--Hn],$n[Hn]=null,Hr=$n[--Hn],$n[Hn]=null}var Dn=null,On=null,dt=!1,or=null;function ap(n,r){var a=Gn(5,null,null,0);a.elementType="DELETED",a.stateNode=r,a.return=n,r=n.deletions,r===null?(n.deletions=[a],n.flags|=16):r.push(a)}function lp(n,r){switch(n.tag){case 5:var a=n.type;return r=r.nodeType!==1||a.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(n.stateNode=r,Dn=n,On=ws(r.firstChild),!0):!1;case 6:return r=n.pendingProps===""||r.nodeType!==3?null:r,r!==null?(n.stateNode=r,Dn=n,On=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(a=hi!==null?{id:Hr,overflow:Wr}:null,n.memoizedState={dehydrated:r,treeContext:a,retryLane:1073741824},a=Gn(18,null,null,0),a.stateNode=r,a.return=n,n.child=a,Dn=n,On=null,!0):!1;default:return!1}}function Wc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function qc(n){if(dt){var r=On;if(r){var a=r;if(!lp(n,r)){if(Wc(n))throw Error(t(418));r=ws(a.nextSibling);var c=Dn;r&&lp(n,r)?ap(c,a):(n.flags=n.flags&-4097|2,dt=!1,Dn=n)}}else{if(Wc(n))throw Error(t(418));n.flags=n.flags&-4097|2,dt=!1,Dn=n}}}function up(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Dn=n}function jl(n){if(n!==Dn)return!1;if(!dt)return up(n),dt=!0,!1;var r;if((r=n.tag!==3)&&!(r=n.tag!==5)&&(r=n.type,r=r!=="head"&&r!=="body"&&!Lc(n.type,n.memoizedProps)),r&&(r=On)){if(Wc(n))throw cp(),Error(t(418));for(;r;)ap(n,r),r=ws(r.nextSibling)}if(up(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(r===0){On=ws(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++}n=n.nextSibling}On=null}}else On=Dn?ws(n.stateNode.nextSibling):null;return!0}function cp(){for(var n=On;n;)n=ws(n.nextSibling)}function io(){On=Dn=null,dt=!1}function Kc(n){or===null?or=[n]:or.push(n)}var Yv=ke.ReactCurrentBatchConfig;function oa(n,r,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var h=c,p=""+n;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var k=h.refs;_===null?delete k[p]:k[p]=_},r._stringRef=p,r)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Fl(n,r){throw n=Object.prototype.toString.call(r),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n))}function dp(n){var r=n._init;return r(n._payload)}function hp(n){function r(j,N){if(n){var F=j.deletions;F===null?(j.deletions=[N],j.flags|=16):F.push(N)}}function a(j,N){if(!n)return null;for(;N!==null;)r(j,N),N=N.sibling;return null}function c(j,N){for(j=new Map;N!==null;)N.key!==null?j.set(N.key,N):j.set(N.index,N),N=N.sibling;return j}function h(j,N){return j=bs(j,N),j.index=0,j.sibling=null,j}function p(j,N,F){return j.index=F,n?(F=j.alternate,F!==null?(F=F.index,F<N?(j.flags|=2,N):F):(j.flags|=2,N)):(j.flags|=1048576,N)}function _(j){return n&&j.alternate===null&&(j.flags|=2),j}function k(j,N,F,J){return N===null||N.tag!==6?(N=jd(F,j.mode,J),N.return=j,N):(N=h(N,F),N.return=j,N)}function C(j,N,F,J){var he=F.type;return he===b?q(j,N,F.props.children,J,F.key):N!==null&&(N.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Nt&&dp(he)===N.type)?(J=h(N,F.props),J.ref=oa(j,N,F),J.return=j,J):(J=uu(F.type,F.key,F.props,null,j.mode,J),J.ref=oa(j,N,F),J.return=j,J)}function U(j,N,F,J){return N===null||N.tag!==4||N.stateNode.containerInfo!==F.containerInfo||N.stateNode.implementation!==F.implementation?(N=Fd(F,j.mode,J),N.return=j,N):(N=h(N,F.children||[]),N.return=j,N)}function q(j,N,F,J,he){return N===null||N.tag!==7?(N=Ei(F,j.mode,J,he),N.return=j,N):(N=h(N,F),N.return=j,N)}function Q(j,N,F){if(typeof N=="string"&&N!==""||typeof N=="number")return N=jd(""+N,j.mode,F),N.return=j,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Je:return F=uu(N.type,N.key,N.props,null,j.mode,F),F.ref=oa(j,null,N),F.return=j,F;case Ae:return N=Fd(N,j.mode,F),N.return=j,N;case Nt:var J=N._init;return Q(j,J(N._payload),F)}if(Jt(N)||pe(N))return N=Ei(N,j.mode,F,null),N.return=j,N;Fl(j,N)}return null}function W(j,N,F,J){var he=N!==null?N.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return he!==null?null:k(j,N,""+F,J);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Je:return F.key===he?C(j,N,F,J):null;case Ae:return F.key===he?U(j,N,F,J):null;case Nt:return he=F._init,W(j,N,he(F._payload),J)}if(Jt(F)||pe(F))return he!==null?null:q(j,N,F,J,null);Fl(j,F)}return null}function se(j,N,F,J,he){if(typeof J=="string"&&J!==""||typeof J=="number")return j=j.get(F)||null,k(N,j,""+J,he);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case Je:return j=j.get(J.key===null?F:J.key)||null,C(N,j,J,he);case Ae:return j=j.get(J.key===null?F:J.key)||null,U(N,j,J,he);case Nt:var ve=J._init;return se(j,N,F,ve(J._payload),he)}if(Jt(J)||pe(J))return j=j.get(F)||null,q(N,j,J,he,null);Fl(N,J)}return null}function le(j,N,F,J){for(var he=null,ve=null,_e=N,Ie=N=0,Lt=null;_e!==null&&Ie<F.length;Ie++){_e.index>Ie?(Lt=_e,_e=null):Lt=_e.sibling;var Ge=W(j,_e,F[Ie],J);if(Ge===null){_e===null&&(_e=Lt);break}n&&_e&&Ge.alternate===null&&r(j,_e),N=p(Ge,N,Ie),ve===null?he=Ge:ve.sibling=Ge,ve=Ge,_e=Lt}if(Ie===F.length)return a(j,_e),dt&&fi(j,Ie),he;if(_e===null){for(;Ie<F.length;Ie++)_e=Q(j,F[Ie],J),_e!==null&&(N=p(_e,N,Ie),ve===null?he=_e:ve.sibling=_e,ve=_e);return dt&&fi(j,Ie),he}for(_e=c(j,_e);Ie<F.length;Ie++)Lt=se(_e,j,Ie,F[Ie],J),Lt!==null&&(n&&Lt.alternate!==null&&_e.delete(Lt.key===null?Ie:Lt.key),N=p(Lt,N,Ie),ve===null?he=Lt:ve.sibling=Lt,ve=Lt);return n&&_e.forEach(function(Ns){return r(j,Ns)}),dt&&fi(j,Ie),he}function ue(j,N,F,J){var he=pe(F);if(typeof he!="function")throw Error(t(150));if(F=he.call(F),F==null)throw Error(t(151));for(var ve=he=null,_e=N,Ie=N=0,Lt=null,Ge=F.next();_e!==null&&!Ge.done;Ie++,Ge=F.next()){_e.index>Ie?(Lt=_e,_e=null):Lt=_e.sibling;var Ns=W(j,_e,Ge.value,J);if(Ns===null){_e===null&&(_e=Lt);break}n&&_e&&Ns.alternate===null&&r(j,_e),N=p(Ns,N,Ie),ve===null?he=Ns:ve.sibling=Ns,ve=Ns,_e=Lt}if(Ge.done)return a(j,_e),dt&&fi(j,Ie),he;if(_e===null){for(;!Ge.done;Ie++,Ge=F.next())Ge=Q(j,Ge.value,J),Ge!==null&&(N=p(Ge,N,Ie),ve===null?he=Ge:ve.sibling=Ge,ve=Ge);return dt&&fi(j,Ie),he}for(_e=c(j,_e);!Ge.done;Ie++,Ge=F.next())Ge=se(_e,j,Ie,Ge.value,J),Ge!==null&&(n&&Ge.alternate!==null&&_e.delete(Ge.key===null?Ie:Ge.key),N=p(Ge,N,Ie),ve===null?he=Ge:ve.sibling=Ge,ve=Ge);return n&&_e.forEach(function(C_){return r(j,C_)}),dt&&fi(j,Ie),he}function Et(j,N,F,J){if(typeof F=="object"&&F!==null&&F.type===b&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case Je:e:{for(var he=F.key,ve=N;ve!==null;){if(ve.key===he){if(he=F.type,he===b){if(ve.tag===7){a(j,ve.sibling),N=h(ve,F.props.children),N.return=j,j=N;break e}}else if(ve.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Nt&&dp(he)===ve.type){a(j,ve.sibling),N=h(ve,F.props),N.ref=oa(j,ve,F),N.return=j,j=N;break e}a(j,ve);break}else r(j,ve);ve=ve.sibling}F.type===b?(N=Ei(F.props.children,j.mode,J,F.key),N.return=j,j=N):(J=uu(F.type,F.key,F.props,null,j.mode,J),J.ref=oa(j,N,F),J.return=j,j=J)}return _(j);case Ae:e:{for(ve=F.key;N!==null;){if(N.key===ve)if(N.tag===4&&N.stateNode.containerInfo===F.containerInfo&&N.stateNode.implementation===F.implementation){a(j,N.sibling),N=h(N,F.children||[]),N.return=j,j=N;break e}else{a(j,N);break}else r(j,N);N=N.sibling}N=Fd(F,j.mode,J),N.return=j,j=N}return _(j);case Nt:return ve=F._init,Et(j,N,ve(F._payload),J)}if(Jt(F))return le(j,N,F,J);if(pe(F))return ue(j,N,F,J);Fl(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,N!==null&&N.tag===6?(a(j,N.sibling),N=h(N,F),N.return=j,j=N):(a(j,N),N=jd(F,j.mode,J),N.return=j,j=N),_(j)):a(j,N)}return Et}var oo=hp(!0),fp=hp(!1),Ul=Es(null),Bl=null,ao=null,Gc=null;function Qc(){Gc=ao=Bl=null}function Yc(n){var r=Ul.current;ut(Ul),n._currentValue=r}function Xc(n,r,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),n===a)break;n=n.return}}function lo(n,r){Bl=n,Gc=ao=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&r)!==0&&(wn=!0),n.firstContext=null)}function Wn(n){var r=n._currentValue;if(Gc!==n)if(n={context:n,memoizedValue:r,next:null},ao===null){if(Bl===null)throw Error(t(308));ao=n,Bl.dependencies={lanes:0,firstContext:n}}else ao=ao.next=n;return r}var pi=null;function Jc(n){pi===null?pi=[n]:pi.push(n)}function pp(n,r,a,c){var h=r.interleaved;return h===null?(a.next=a,Jc(r)):(a.next=h.next,h.next=a),r.interleaved=a,qr(n,c)}function qr(n,r){n.lanes|=r;var a=n.alternate;for(a!==null&&(a.lanes|=r),a=n,n=n.return;n!==null;)n.childLanes|=r,a=n.alternate,a!==null&&(a.childLanes|=r),a=n,n=n.return;return a.tag===3?a.stateNode:null}var ks=!1;function Zc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mp(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Kr(n,r){return{eventTime:n,lane:r,tag:0,payload:null,callback:null,next:null}}function Is(n,r,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(qe&2)!==0){var h=c.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),c.pending=r,qr(n,a)}return h=c.interleaved,h===null?(r.next=r,Jc(c)):(r.next=h.next,h.next=r),c.interleaved=r,qr(n,a)}function zl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194240)!==0)){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,ps(n,a)}}function gp(n,r){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var h=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var _={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?h=p=_:p=p.next=_,a=a.next}while(a!==null);p===null?h=p=r:p=p.next=r}else h=p=r;a={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}function $l(n,r,a,c){var h=n.updateQueue;ks=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,k=h.shared.pending;if(k!==null){h.shared.pending=null;var C=k,U=C.next;C.next=null,_===null?p=U:_.next=U,_=C;var q=n.alternate;q!==null&&(q=q.updateQueue,k=q.lastBaseUpdate,k!==_&&(k===null?q.firstBaseUpdate=U:k.next=U,q.lastBaseUpdate=C))}if(p!==null){var Q=h.baseState;_=0,q=U=C=null,k=p;do{var W=k.lane,se=k.eventTime;if((c&W)===W){q!==null&&(q=q.next={eventTime:se,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var le=n,ue=k;switch(W=r,se=a,ue.tag){case 1:if(le=ue.payload,typeof le=="function"){Q=le.call(se,Q,W);break e}Q=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ue.payload,W=typeof le=="function"?le.call(se,Q,W):le,W==null)break e;Q=re({},Q,W);break e;case 2:ks=!0}}k.callback!==null&&k.lane!==0&&(n.flags|=64,W=h.effects,W===null?h.effects=[k]:W.push(k))}else se={eventTime:se,lane:W,tag:k.tag,payload:k.payload,callback:k.callback,next:null},q===null?(U=q=se,C=Q):q=q.next=se,_|=W;if(k=k.next,k===null){if(k=h.shared.pending,k===null)break;W=k,k=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);if(q===null&&(C=Q),h.baseState=C,h.firstBaseUpdate=U,h.lastBaseUpdate=q,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);yi|=_,n.lanes=_,n.memoizedState=Q}}function yp(n,r,a){if(n=r.effects,r.effects=null,n!==null)for(r=0;r<n.length;r++){var c=n[r],h=c.callback;if(h!==null){if(c.callback=null,c=a,typeof h!="function")throw Error(t(191,h));h.call(c)}}}var aa={},Er=Es(aa),la=Es(aa),ua=Es(aa);function mi(n){if(n===aa)throw Error(t(174));return n}function ed(n,r){switch(at(ua,r),at(la,n),at(Er,aa),n=r.nodeType,n){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:wt(null,"");break;default:n=n===8?r.parentNode:r,r=n.namespaceURI||null,n=n.tagName,r=wt(r,n)}ut(Er),at(Er,r)}function uo(){ut(Er),ut(la),ut(ua)}function vp(n){mi(ua.current);var r=mi(Er.current),a=wt(r,n.type);r!==a&&(at(la,n),at(Er,a))}function td(n){la.current===n&&(ut(Er),ut(la))}var pt=Es(0);function Hl(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var nd=[];function rd(){for(var n=0;n<nd.length;n++)nd[n]._workInProgressVersionPrimary=null;nd.length=0}var Wl=ke.ReactCurrentDispatcher,sd=ke.ReactCurrentBatchConfig,gi=0,mt=null,Rt=null,Vt=null,ql=!1,ca=!1,da=0,Xv=0;function en(){throw Error(t(321))}function id(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!ir(n[a],r[a]))return!1;return!0}function od(n,r,a,c,h,p){if(gi=p,mt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Wl.current=n===null||n.memoizedState===null?t_:n_,n=a(c,h),ca){p=0;do{if(ca=!1,da=0,25<=p)throw Error(t(301));p+=1,Vt=Rt=null,r.updateQueue=null,Wl.current=r_,n=a(c,h)}while(ca)}if(Wl.current=Ql,r=Rt!==null&&Rt.next!==null,gi=0,Vt=Rt=mt=null,ql=!1,r)throw Error(t(300));return n}function ad(){var n=da!==0;return da=0,n}function Tr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?mt.memoizedState=Vt=n:Vt=Vt.next=n,Vt}function qn(){if(Rt===null){var n=mt.alternate;n=n!==null?n.memoizedState:null}else n=Rt.next;var r=Vt===null?mt.memoizedState:Vt.next;if(r!==null)Vt=r,Rt=n;else{if(n===null)throw Error(t(310));Rt=n,n={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Vt===null?mt.memoizedState=Vt=n:Vt=Vt.next=n}return Vt}function ha(n,r){return typeof r=="function"?r(n):r}function ld(n){var r=qn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=Rt,h=c.baseQueue,p=a.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}c.baseQueue=h=p,a.pending=null}if(h!==null){p=h.next,c=c.baseState;var k=_=null,C=null,U=p;do{var q=U.lane;if((gi&q)===q)C!==null&&(C=C.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),c=U.hasEagerState?U.eagerState:n(c,U.action);else{var Q={lane:q,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};C===null?(k=C=Q,_=c):C=C.next=Q,mt.lanes|=q,yi|=q}U=U.next}while(U!==null&&U!==p);C===null?_=c:C.next=k,ir(c,r.memoizedState)||(wn=!0),r.memoizedState=c,r.baseState=_,r.baseQueue=C,a.lastRenderedState=c}if(n=a.interleaved,n!==null){h=n;do p=h.lane,mt.lanes|=p,yi|=p,h=h.next;while(h!==n)}else h===null&&(a.lanes=0);return[r.memoizedState,a.dispatch]}function ud(n){var r=qn(),a=r.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,h=a.pending,p=r.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do p=n(p,_.action),_=_.next;while(_!==h);ir(p,r.memoizedState)||(wn=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function _p(){}function wp(n,r){var a=mt,c=qn(),h=r(),p=!ir(c.memoizedState,h);if(p&&(c.memoizedState=h,wn=!0),c=c.queue,cd(xp.bind(null,a,c,n),[n]),c.getSnapshot!==r||p||Vt!==null&&Vt.memoizedState.tag&1){if(a.flags|=2048,fa(9,Tp.bind(null,a,c,h,r),void 0,null),Mt===null)throw Error(t(349));(gi&30)!==0||Ep(a,r,h)}return h}function Ep(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=mt.updateQueue,r===null?(r={lastEffect:null,stores:null},mt.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Tp(n,r,a,c){r.value=a,r.getSnapshot=c,kp(r)&&Ip(n)}function xp(n,r,a){return a(function(){kp(r)&&Ip(n)})}function kp(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!ir(n,a)}catch{return!0}}function Ip(n){var r=qr(n,1);r!==null&&cr(r,n,1,-1)}function Sp(n){var r=Tr();return typeof n=="function"&&(n=n()),r.memoizedState=r.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:n},r.queue=n,n=n.dispatch=e_.bind(null,mt,n),[r.memoizedState,n]}function fa(n,r,a,c){return n={tag:n,create:r,destroy:a,deps:c,next:null},r=mt.updateQueue,r===null?(r={lastEffect:null,stores:null},mt.updateQueue=r,r.lastEffect=n.next=n):(a=r.lastEffect,a===null?r.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,r.lastEffect=n)),n}function Ap(){return qn().memoizedState}function Kl(n,r,a,c){var h=Tr();mt.flags|=n,h.memoizedState=fa(1|r,a,void 0,c===void 0?null:c)}function Gl(n,r,a,c){var h=qn();c=c===void 0?null:c;var p=void 0;if(Rt!==null){var _=Rt.memoizedState;if(p=_.destroy,c!==null&&id(c,_.deps)){h.memoizedState=fa(r,a,p,c);return}}mt.flags|=n,h.memoizedState=fa(1|r,a,p,c)}function Rp(n,r){return Kl(8390656,8,n,r)}function cd(n,r){return Gl(2048,8,n,r)}function Cp(n,r){return Gl(4,2,n,r)}function Pp(n,r){return Gl(4,4,n,r)}function bp(n,r){if(typeof r=="function")return n=n(),r(n),function(){r(null)};if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function Np(n,r,a){return a=a!=null?a.concat([n]):null,Gl(4,4,bp.bind(null,r,n),a)}function dd(){}function Dp(n,r){var a=qn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&id(r,c[1])?c[0]:(a.memoizedState=[n,r],n)}function Op(n,r){var a=qn();r=r===void 0?null:r;var c=a.memoizedState;return c!==null&&r!==null&&id(r,c[1])?c[0]:(n=n(),a.memoizedState=[n,r],n)}function Vp(n,r,a){return(gi&21)===0?(n.baseState&&(n.baseState=!1,wn=!0),n.memoizedState=a):(ir(a,r)||(a=ii(),mt.lanes|=a,yi|=a,n.baseState=!0),r)}function Jv(n,r){var a=je;je=a!==0&&4>a?a:4,n(!0);var c=sd.transition;sd.transition={};try{n(!1),r()}finally{je=a,sd.transition=c}}function Mp(){return qn().memoizedState}function Zv(n,r,a){var c=Cs(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Lp(n))jp(r,a);else if(a=pp(n,r,a,c),a!==null){var h=pn();cr(a,n,c,h),Fp(a,r,c)}}function e_(n,r,a){var c=Cs(n),h={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lp(n))jp(r,h);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,k=p(_,a);if(h.hasEagerState=!0,h.eagerState=k,ir(k,_)){var C=r.interleaved;C===null?(h.next=h,Jc(r)):(h.next=C.next,C.next=h),r.interleaved=h;return}}catch{}a=pp(n,r,h,c),a!==null&&(h=pn(),cr(a,n,c,h),Fp(a,r,c))}}function Lp(n){var r=n.alternate;return n===mt||r!==null&&r===mt}function jp(n,r){ca=ql=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function Fp(n,r,a){if((a&4194240)!==0){var c=r.lanes;c&=n.pendingLanes,a|=c,r.lanes=a,ps(n,a)}}var Ql={readContext:Wn,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},t_={readContext:Wn,useCallback:function(n,r){return Tr().memoizedState=[n,r===void 0?null:r],n},useContext:Wn,useEffect:Rp,useImperativeHandle:function(n,r,a){return a=a!=null?a.concat([n]):null,Kl(4194308,4,bp.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Kl(4194308,4,n,r)},useInsertionEffect:function(n,r){return Kl(4,2,n,r)},useMemo:function(n,r){var a=Tr();return r=r===void 0?null:r,n=n(),a.memoizedState=[n,r],n},useReducer:function(n,r,a){var c=Tr();return r=a!==void 0?a(r):r,c.memoizedState=c.baseState=r,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:r},c.queue=n,n=n.dispatch=Zv.bind(null,mt,n),[c.memoizedState,n]},useRef:function(n){var r=Tr();return n={current:n},r.memoizedState=n},useState:Sp,useDebugValue:dd,useDeferredValue:function(n){return Tr().memoizedState=n},useTransition:function(){var n=Sp(!1),r=n[0];return n=Jv.bind(null,n[1]),Tr().memoizedState=n,[r,n]},useMutableSource:function(){},useSyncExternalStore:function(n,r,a){var c=mt,h=Tr();if(dt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=r(),Mt===null)throw Error(t(349));(gi&30)!==0||Ep(c,r,a)}h.memoizedState=a;var p={value:a,getSnapshot:r};return h.queue=p,Rp(xp.bind(null,c,p,n),[n]),c.flags|=2048,fa(9,Tp.bind(null,c,p,a,r),void 0,null),a},useId:function(){var n=Tr(),r=Mt.identifierPrefix;if(dt){var a=Wr,c=Hr;a=(c&~(1<<32-dn(c)-1)).toString(32)+a,r=":"+r+"R"+a,a=da++,0<a&&(r+="H"+a.toString(32)),r+=":"}else a=Xv++,r=":"+r+"r"+a.toString(32)+":";return n.memoizedState=r},unstable_isNewReconciler:!1},n_={readContext:Wn,useCallback:Dp,useContext:Wn,useEffect:cd,useImperativeHandle:Np,useInsertionEffect:Cp,useLayoutEffect:Pp,useMemo:Op,useReducer:ld,useRef:Ap,useState:function(){return ld(ha)},useDebugValue:dd,useDeferredValue:function(n){var r=qn();return Vp(r,Rt.memoizedState,n)},useTransition:function(){var n=ld(ha)[0],r=qn().memoizedState;return[n,r]},useMutableSource:_p,useSyncExternalStore:wp,useId:Mp,unstable_isNewReconciler:!1},r_={readContext:Wn,useCallback:Dp,useContext:Wn,useEffect:cd,useImperativeHandle:Np,useInsertionEffect:Cp,useLayoutEffect:Pp,useMemo:Op,useReducer:ud,useRef:Ap,useState:function(){return ud(ha)},useDebugValue:dd,useDeferredValue:function(n){var r=qn();return Rt===null?r.memoizedState=n:Vp(r,Rt.memoizedState,n)},useTransition:function(){var n=ud(ha)[0],r=qn().memoizedState;return[n,r]},useMutableSource:_p,useSyncExternalStore:wp,useId:Mp,unstable_isNewReconciler:!1};function ar(n,r){if(n&&n.defaultProps){r=re({},r),n=n.defaultProps;for(var a in n)r[a]===void 0&&(r[a]=n[a]);return r}return r}function hd(n,r,a,c){r=n.memoizedState,a=a(c,r),a=a==null?r:re({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Yl={isMounted:function(n){return(n=n._reactInternals)?Jn(n)===n:!1},enqueueSetState:function(n,r,a){n=n._reactInternals;var c=pn(),h=Cs(n),p=Kr(c,h);p.payload=r,a!=null&&(p.callback=a),r=Is(n,p,h),r!==null&&(cr(r,n,h,c),zl(r,n,h))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var c=pn(),h=Cs(n),p=Kr(c,h);p.tag=1,p.payload=r,a!=null&&(p.callback=a),r=Is(n,p,h),r!==null&&(cr(r,n,h,c),zl(r,n,h))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=pn(),c=Cs(n),h=Kr(a,c);h.tag=2,r!=null&&(h.callback=r),r=Is(n,h,c),r!==null&&(cr(r,n,c,a),zl(r,n,c))}};function Up(n,r,a,c,h,p,_){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,_):r.prototype&&r.prototype.isPureReactComponent?!Zo(a,c)||!Zo(h,p):!0}function Bp(n,r,a){var c=!1,h=Ts,p=r.contextType;return typeof p=="object"&&p!==null?p=Wn(p):(h=_n(r)?di:Zt.current,c=r.contextTypes,p=(c=c!=null)?no(n,h):Ts),r=new r(a,p),n.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Yl,n.stateNode=r,r._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=h,n.__reactInternalMemoizedMaskedChildContext=p),r}function zp(n,r,a,c){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==n&&Yl.enqueueReplaceState(r,r.state,null)}function fd(n,r,a,c){var h=n.stateNode;h.props=a,h.state=n.memoizedState,h.refs={},Zc(n);var p=r.contextType;typeof p=="object"&&p!==null?h.context=Wn(p):(p=_n(r)?di:Zt.current,h.context=no(n,p)),h.state=n.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(hd(n,r,p,a),h.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&Yl.enqueueReplaceState(h,h.state,null),$l(n,a,h,c),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308)}function co(n,r){try{var a="",c=r;do a+=Pe(c),c=c.return;while(c);var h=a}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:r,stack:h,digest:null}}function pd(n,r,a){return{value:n,source:null,stack:a??null,digest:r??null}}function md(n,r){try{console.error(r.value)}catch(a){setTimeout(function(){throw a})}}var s_=typeof WeakMap=="function"?WeakMap:Map;function $p(n,r,a){a=Kr(-1,a),a.tag=3,a.payload={element:null};var c=r.value;return a.callback=function(){ru||(ru=!0,Pd=c),md(n,r)},a}function Hp(n,r,a){a=Kr(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var h=r.value;a.payload=function(){return c(h)},a.callback=function(){md(n,r)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){md(n,r),typeof c!="function"&&(As===null?As=new Set([this]):As.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),a}function Wp(n,r,a){var c=n.pingCache;if(c===null){c=n.pingCache=new s_;var h=new Set;c.set(r,h)}else h=c.get(r),h===void 0&&(h=new Set,c.set(r,h));h.has(a)||(h.add(a),n=v_.bind(null,n,r,a),r.then(n,n))}function qp(n){do{var r;if((r=n.tag===13)&&(r=n.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return n;n=n.return}while(n!==null);return null}function Kp(n,r,a,c,h){return(n.mode&1)===0?(n===r?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(r=Kr(-1,1),r.tag=2,Is(a,r,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=h,n)}var i_=ke.ReactCurrentOwner,wn=!1;function fn(n,r,a,c){r.child=n===null?fp(r,null,a,c):oo(r,n.child,a,c)}function Gp(n,r,a,c,h){a=a.render;var p=r.ref;return lo(r,h),c=od(n,r,a,c,p,h),a=ad(),n!==null&&!wn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~h,Gr(n,r,h)):(dt&&a&&$c(r),r.flags|=1,fn(n,r,c,h),r.child)}function Qp(n,r,a,c,h){if(n===null){var p=a.type;return typeof p=="function"&&!Ld(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(r.tag=15,r.type=p,Yp(n,r,p,c,h)):(n=uu(a.type,null,c,r,r.mode,h),n.ref=r.ref,n.return=r,r.child=n)}if(p=n.child,(n.lanes&h)===0){var _=p.memoizedProps;if(a=a.compare,a=a!==null?a:Zo,a(_,c)&&n.ref===r.ref)return Gr(n,r,h)}return r.flags|=1,n=bs(p,c),n.ref=r.ref,n.return=r,r.child=n}function Yp(n,r,a,c,h){if(n!==null){var p=n.memoizedProps;if(Zo(p,c)&&n.ref===r.ref)if(wn=!1,r.pendingProps=c=p,(n.lanes&h)!==0)(n.flags&131072)!==0&&(wn=!0);else return r.lanes=n.lanes,Gr(n,r,h)}return gd(n,r,a,c,h)}function Xp(n,r,a){var c=r.pendingProps,h=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(fo,Vn),Vn|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:n,cachePool:null,transitions:null},r.updateQueue=null,at(fo,Vn),Vn|=n,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,at(fo,Vn),Vn|=c}else p!==null?(c=p.baseLanes|a,r.memoizedState=null):c=a,at(fo,Vn),Vn|=c;return fn(n,r,h,a),r.child}function Jp(n,r){var a=r.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(r.flags|=512,r.flags|=2097152)}function gd(n,r,a,c,h){var p=_n(a)?di:Zt.current;return p=no(r,p),lo(r,h),a=od(n,r,a,c,p,h),c=ad(),n!==null&&!wn?(r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~h,Gr(n,r,h)):(dt&&c&&$c(r),r.flags|=1,fn(n,r,a,h),r.child)}function Zp(n,r,a,c,h){if(_n(a)){var p=!0;Ol(r)}else p=!1;if(lo(r,h),r.stateNode===null)Jl(n,r),Bp(r,a,c),fd(r,a,c,h),c=!0;else if(n===null){var _=r.stateNode,k=r.memoizedProps;_.props=k;var C=_.context,U=a.contextType;typeof U=="object"&&U!==null?U=Wn(U):(U=_n(a)?di:Zt.current,U=no(r,U));var q=a.getDerivedStateFromProps,Q=typeof q=="function"||typeof _.getSnapshotBeforeUpdate=="function";Q||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==c||C!==U)&&zp(r,_,c,U),ks=!1;var W=r.memoizedState;_.state=W,$l(r,c,_,h),C=r.memoizedState,k!==c||W!==C||vn.current||ks?(typeof q=="function"&&(hd(r,a,q,c),C=r.memoizedState),(k=ks||Up(r,a,k,c,W,C,U))?(Q||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=C),_.props=c,_.state=C,_.context=U,c=k):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{_=r.stateNode,mp(n,r),k=r.memoizedProps,U=r.type===r.elementType?k:ar(r.type,k),_.props=U,Q=r.pendingProps,W=_.context,C=a.contextType,typeof C=="object"&&C!==null?C=Wn(C):(C=_n(a)?di:Zt.current,C=no(r,C));var se=a.getDerivedStateFromProps;(q=typeof se=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(k!==Q||W!==C)&&zp(r,_,c,C),ks=!1,W=r.memoizedState,_.state=W,$l(r,c,_,h);var le=r.memoizedState;k!==Q||W!==le||vn.current||ks?(typeof se=="function"&&(hd(r,a,se,c),le=r.memoizedState),(U=ks||Up(r,a,U,c,W,le,C)||!1)?(q||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(c,le,C),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(c,le,C)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=le),_.props=c,_.state=le,_.context=C,c=U):(typeof _.componentDidUpdate!="function"||k===n.memoizedProps&&W===n.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||k===n.memoizedProps&&W===n.memoizedState||(r.flags|=1024),c=!1)}return yd(n,r,a,c,p,h)}function yd(n,r,a,c,h,p){Jp(n,r);var _=(r.flags&128)!==0;if(!c&&!_)return h&&sp(r,a,!1),Gr(n,r,p);c=r.stateNode,i_.current=r;var k=_&&typeof a.getDerivedStateFromError!="function"?null:c.render();return r.flags|=1,n!==null&&_?(r.child=oo(r,n.child,null,p),r.child=oo(r,null,k,p)):fn(n,r,k,p),r.memoizedState=c.state,h&&sp(r,a,!0),r.child}function em(n){var r=n.stateNode;r.pendingContext?np(n,r.pendingContext,r.pendingContext!==r.context):r.context&&np(n,r.context,!1),ed(n,r.containerInfo)}function tm(n,r,a,c,h){return io(),Kc(h),r.flags|=256,fn(n,r,a,c),r.child}var vd={dehydrated:null,treeContext:null,retryLane:0};function _d(n){return{baseLanes:n,cachePool:null,transitions:null}}function nm(n,r,a){var c=r.pendingProps,h=pt.current,p=!1,_=(r.flags&128)!==0,k;if((k=_)||(k=n!==null&&n.memoizedState===null?!1:(h&2)!==0),k?(p=!0,r.flags&=-129):(n===null||n.memoizedState!==null)&&(h|=1),at(pt,h&1),n===null)return qc(r),n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((r.mode&1)===0?r.lanes=1:n.data==="$!"?r.lanes=8:r.lanes=1073741824,null):(_=c.children,n=c.fallback,p?(c=r.mode,p=r.child,_={mode:"hidden",children:_},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=_):p=cu(_,c,0,null),n=Ei(n,c,a,null),p.return=r,n.return=r,p.sibling=n,r.child=p,r.child.memoizedState=_d(a),r.memoizedState=vd,n):wd(r,_));if(h=n.memoizedState,h!==null&&(k=h.dehydrated,k!==null))return o_(n,r,_,c,k,h,a);if(p){p=c.fallback,_=r.mode,h=n.child,k=h.sibling;var C={mode:"hidden",children:c.children};return(_&1)===0&&r.child!==h?(c=r.child,c.childLanes=0,c.pendingProps=C,r.deletions=null):(c=bs(h,C),c.subtreeFlags=h.subtreeFlags&14680064),k!==null?p=bs(k,p):(p=Ei(p,_,a,null),p.flags|=2),p.return=r,c.return=r,c.sibling=p,r.child=c,c=p,p=r.child,_=n.child.memoizedState,_=_===null?_d(a):{baseLanes:_.baseLanes|a,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=n.childLanes&~a,r.memoizedState=vd,c}return p=n.child,n=p.sibling,c=bs(p,{mode:"visible",children:c.children}),(r.mode&1)===0&&(c.lanes=a),c.return=r,c.sibling=null,n!==null&&(a=r.deletions,a===null?(r.deletions=[n],r.flags|=16):a.push(n)),r.child=c,r.memoizedState=null,c}function wd(n,r){return r=cu({mode:"visible",children:r},n.mode,0,null),r.return=n,n.child=r}function Xl(n,r,a,c){return c!==null&&Kc(c),oo(r,n.child,null,a),n=wd(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function o_(n,r,a,c,h,p,_){if(a)return r.flags&256?(r.flags&=-257,c=pd(Error(t(422))),Xl(n,r,_,c)):r.memoizedState!==null?(r.child=n.child,r.flags|=128,null):(p=c.fallback,h=r.mode,c=cu({mode:"visible",children:c.children},h,0,null),p=Ei(p,h,_,null),p.flags|=2,c.return=r,p.return=r,c.sibling=p,r.child=c,(r.mode&1)!==0&&oo(r,n.child,null,_),r.child.memoizedState=_d(_),r.memoizedState=vd,p);if((r.mode&1)===0)return Xl(n,r,_,null);if(h.data==="$!"){if(c=h.nextSibling&&h.nextSibling.dataset,c)var k=c.dgst;return c=k,p=Error(t(419)),c=pd(p,c,void 0),Xl(n,r,_,c)}if(k=(_&n.childLanes)!==0,wn||k){if(c=Mt,c!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=(h&(c.suspendedLanes|_))!==0?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,qr(n,h),cr(c,n,h,-1))}return Md(),c=pd(Error(t(421))),Xl(n,r,_,c)}return h.data==="$?"?(r.flags|=128,r.child=n.child,r=__.bind(null,n),h._reactRetry=r,null):(n=p.treeContext,On=ws(h.nextSibling),Dn=r,dt=!0,or=null,n!==null&&($n[Hn++]=Hr,$n[Hn++]=Wr,$n[Hn++]=hi,Hr=n.id,Wr=n.overflow,hi=r),r=wd(r,c.children),r.flags|=4096,r)}function rm(n,r,a){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r),Xc(n.return,r,a)}function Ed(n,r,a,c,h){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=h)}function sm(n,r,a){var c=r.pendingProps,h=c.revealOrder,p=c.tail;if(fn(n,r,c.children,a),c=pt.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rm(n,a,r);else if(n.tag===19)rm(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(at(pt,c),(r.mode&1)===0)r.memoizedState=null;else switch(h){case"forwards":for(a=r.child,h=null;a!==null;)n=a.alternate,n!==null&&Hl(n)===null&&(h=a),a=a.sibling;a=h,a===null?(h=r.child,r.child=null):(h=a.sibling,a.sibling=null),Ed(r,!1,h,a,p);break;case"backwards":for(a=null,h=r.child,r.child=null;h!==null;){if(n=h.alternate,n!==null&&Hl(n)===null){r.child=h;break}n=h.sibling,h.sibling=a,a=h,h=n}Ed(r,!0,a,null,p);break;case"together":Ed(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Jl(n,r){(r.mode&1)===0&&n!==null&&(n.alternate=null,r.alternate=null,r.flags|=2)}function Gr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),yi|=r.lanes,(a&r.childLanes)===0)return null;if(n!==null&&r.child!==n.child)throw Error(t(153));if(r.child!==null){for(n=r.child,a=bs(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=bs(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function a_(n,r,a){switch(r.tag){case 3:em(r),io();break;case 5:vp(r);break;case 1:_n(r.type)&&Ol(r);break;case 4:ed(r,r.stateNode.containerInfo);break;case 10:var c=r.type._context,h=r.memoizedProps.value;at(Ul,c._currentValue),c._currentValue=h;break;case 13:if(c=r.memoizedState,c!==null)return c.dehydrated!==null?(at(pt,pt.current&1),r.flags|=128,null):(a&r.child.childLanes)!==0?nm(n,r,a):(at(pt,pt.current&1),n=Gr(n,r,a),n!==null?n.sibling:null);at(pt,pt.current&1);break;case 19:if(c=(a&r.childLanes)!==0,(n.flags&128)!==0){if(c)return sm(n,r,a);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),at(pt,pt.current),c)break;return null;case 22:case 23:return r.lanes=0,Xp(n,r,a)}return Gr(n,r,a)}var im,Td,om,am;im=function(n,r){for(var a=r.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Td=function(){},om=function(n,r,a,c){var h=n.memoizedProps;if(h!==c){n=r.stateNode,mi(Er.current);var p=null;switch(a){case"input":h=Xt(n,h),c=Xt(n,c),p=[];break;case"select":h=re({},h,{value:void 0}),c=re({},c,{value:void 0}),p=[];break;case"textarea":h=us(n,h),c=us(n,c),p=[];break;default:typeof h.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=bl)}Zs(a,c);var _;a=null;for(U in h)if(!c.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var k=h[U];for(_ in k)k.hasOwnProperty(_)&&(a||(a={}),a[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(o.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in c){var C=c[U];if(k=h?.[U],c.hasOwnProperty(U)&&C!==k&&(C!=null||k!=null))if(U==="style")if(k){for(_ in k)!k.hasOwnProperty(_)||C&&C.hasOwnProperty(_)||(a||(a={}),a[_]="");for(_ in C)C.hasOwnProperty(_)&&k[_]!==C[_]&&(a||(a={}),a[_]=C[_])}else a||(p||(p=[]),p.push(U,a)),a=C;else U==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,k=k?k.__html:void 0,C!=null&&k!==C&&(p=p||[]).push(U,C)):U==="children"?typeof C!="string"&&typeof C!="number"||(p=p||[]).push(U,""+C):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(o.hasOwnProperty(U)?(C!=null&&U==="onScroll"&&lt("scroll",n),p||k===C||(p=[])):(p=p||[]).push(U,C))}a&&(p=p||[]).push("style",a);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},am=function(n,r,a,c){a!==c&&(r.flags|=4)};function pa(n,r){if(!dt)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function tn(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(r)for(var h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags&14680064,c|=h.flags&14680064,h.return=n,h=h.sibling;else for(h=n.child;h!==null;)a|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=n,h=h.sibling;return n.subtreeFlags|=c,n.childLanes=a,r}function l_(n,r,a){var c=r.pendingProps;switch(Hc(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(r),null;case 1:return _n(r.type)&&Dl(),tn(r),null;case 3:return c=r.stateNode,uo(),ut(vn),ut(Zt),rd(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(jl(r)?r.flags|=4:n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,or!==null&&(Dd(or),or=null))),Td(n,r),tn(r),null;case 5:td(r);var h=mi(ua.current);if(a=r.type,n!==null&&r.stateNode!=null)om(n,r,a,c,h),n.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!c){if(r.stateNode===null)throw Error(t(166));return tn(r),null}if(n=mi(Er.current),jl(r)){c=r.stateNode,a=r.type;var p=r.memoizedProps;switch(c[wr]=r,c[sa]=p,n=(r.mode&1)!==0,a){case"dialog":lt("cancel",c),lt("close",c);break;case"iframe":case"object":case"embed":lt("load",c);break;case"video":case"audio":for(h=0;h<ta.length;h++)lt(ta[h],c);break;case"source":lt("error",c);break;case"img":case"image":case"link":lt("error",c),lt("load",c);break;case"details":lt("toggle",c);break;case"input":ln(c,p),lt("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},lt("invalid",c);break;case"textarea":Bt(c,p),lt("invalid",c)}Zs(a,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var k=p[_];_==="children"?typeof k=="string"?c.textContent!==k&&(p.suppressHydrationWarning!==!0&&Pl(c.textContent,k,n),h=["children",k]):typeof k=="number"&&c.textContent!==""+k&&(p.suppressHydrationWarning!==!0&&Pl(c.textContent,k,n),h=["children",""+k]):o.hasOwnProperty(_)&&k!=null&&_==="onScroll"&&lt("scroll",c)}switch(a){case"input":Ut(c),Ln(c,p,!0);break;case"textarea":Ut(c),Yn(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=bl)}c=h,r.updateQueue=c,c!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=_t(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=_.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=_.createElement(a,{is:c.is}):(n=_.createElement(a),a==="select"&&(_=n,c.multiple?_.multiple=!0:c.size&&(_.size=c.size))):n=_.createElementNS(n,a),n[wr]=r,n[sa]=c,im(n,r,!1,!1),r.stateNode=n;e:{switch(_=ei(a,c),a){case"dialog":lt("cancel",n),lt("close",n),h=c;break;case"iframe":case"object":case"embed":lt("load",n),h=c;break;case"video":case"audio":for(h=0;h<ta.length;h++)lt(ta[h],n);h=c;break;case"source":lt("error",n),h=c;break;case"img":case"image":case"link":lt("error",n),lt("load",n),h=c;break;case"details":lt("toggle",n),h=c;break;case"input":ln(n,c),h=Xt(n,c),lt("invalid",n);break;case"option":h=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},h=re({},c,{value:void 0}),lt("invalid",n);break;case"textarea":Bt(n,c),h=us(n,c),lt("invalid",n);break;default:h=c}Zs(a,h),k=h;for(p in k)if(k.hasOwnProperty(p)){var C=k[p];p==="style"?Xs(n,C):p==="dangerouslySetInnerHTML"?(C=C?C.__html:void 0,C!=null&&Qs(n,C)):p==="children"?typeof C=="string"?(a!=="textarea"||C!=="")&&pr(n,C):typeof C=="number"&&pr(n,""+C):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?C!=null&&p==="onScroll"&&lt("scroll",n):C!=null&&xe(n,p,C,_))}switch(a){case"input":Ut(n),Ln(n,c,!1);break;case"textarea":Ut(n),Yn(n);break;case"option":c.value!=null&&n.setAttribute("value",""+We(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?Rn(n,!!c.multiple,p,!1):c.defaultValue!=null&&Rn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof h.onClick=="function"&&(n.onclick=bl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return tn(r),null;case 6:if(n&&r.stateNode!=null)am(n,r,n.memoizedProps,c);else{if(typeof c!="string"&&r.stateNode===null)throw Error(t(166));if(a=mi(ua.current),mi(Er.current),jl(r)){if(c=r.stateNode,a=r.memoizedProps,c[wr]=r,(p=c.nodeValue!==a)&&(n=Dn,n!==null))switch(n.tag){case 3:Pl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pl(c.nodeValue,a,(n.mode&1)!==0)}p&&(r.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[wr]=r,r.stateNode=c}return tn(r),null;case 13:if(ut(pt),c=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(dt&&On!==null&&(r.mode&1)!==0&&(r.flags&128)===0)cp(),io(),r.flags|=98560,p=!1;else if(p=jl(r),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[wr]=r}else io(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;tn(r),p=!1}else or!==null&&(Dd(or),or=null),p=!0;if(!p)return r.flags&65536?r:null}return(r.flags&128)!==0?(r.lanes=a,r):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(r.child.flags|=8192,(r.mode&1)!==0&&(n===null||(pt.current&1)!==0?Ct===0&&(Ct=3):Md())),r.updateQueue!==null&&(r.flags|=4),tn(r),null);case 4:return uo(),Td(n,r),n===null&&na(r.stateNode.containerInfo),tn(r),null;case 10:return Yc(r.type._context),tn(r),null;case 17:return _n(r.type)&&Dl(),tn(r),null;case 19:if(ut(pt),p=r.memoizedState,p===null)return tn(r),null;if(c=(r.flags&128)!==0,_=p.rendering,_===null)if(c)pa(p,!1);else{if(Ct!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(_=Hl(n),_!==null){for(r.flags|=128,pa(p,!1),c=_.updateQueue,c!==null&&(r.updateQueue=c,r.flags|=4),r.subtreeFlags=0,c=a,a=r.child;a!==null;)p=a,n=c,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,n=_.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return at(pt,pt.current&1|2),r.child}n=n.sibling}p.tail!==null&&ot()>po&&(r.flags|=128,c=!0,pa(p,!1),r.lanes=4194304)}else{if(!c)if(n=Hl(_),n!==null){if(r.flags|=128,c=!0,a=n.updateQueue,a!==null&&(r.updateQueue=a,r.flags|=4),pa(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!dt)return tn(r),null}else 2*ot()-p.renderingStartTime>po&&a!==1073741824&&(r.flags|=128,c=!0,pa(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(a=p.last,a!==null?a.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=ot(),r.sibling=null,a=pt.current,at(pt,c?a&1|2:a&1),r):(tn(r),null);case 22:case 23:return Vd(),c=r.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(r.flags|=8192),c&&(r.mode&1)!==0?(Vn&1073741824)!==0&&(tn(r),r.subtreeFlags&6&&(r.flags|=8192)):tn(r),null;case 24:return null;case 25:return null}throw Error(t(156,r.tag))}function u_(n,r){switch(Hc(r),r.tag){case 1:return _n(r.type)&&Dl(),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return uo(),ut(vn),ut(Zt),rd(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 5:return td(r),null;case 13:if(ut(pt),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(t(340));io()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ut(pt),null;case 4:return uo(),null;case 10:return Yc(r.type._context),null;case 22:case 23:return Vd(),null;case 24:return null;default:return null}}var Zl=!1,nn=!1,c_=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ho(n,r){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){yt(n,r,c)}else a.current=null}function xd(n,r,a){try{a()}catch(c){yt(n,r,c)}}var lm=!1;function d_(n,r){if(Vc=ys,n=Uf(),Ac(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var h=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var _=0,k=-1,C=-1,U=0,q=0,Q=n,W=null;t:for(;;){for(var se;Q!==a||h!==0&&Q.nodeType!==3||(k=_+h),Q!==p||c!==0&&Q.nodeType!==3||(C=_+c),Q.nodeType===3&&(_+=Q.nodeValue.length),(se=Q.firstChild)!==null;)W=Q,Q=se;for(;;){if(Q===n)break t;if(W===a&&++U===h&&(k=_),W===p&&++q===c&&(C=_),(se=Q.nextSibling)!==null)break;Q=W,W=Q.parentNode}Q=se}a=k===-1||C===-1?null:{start:k,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(Mc={focusedElem:n,selectionRange:a},ys=!1,oe=r;oe!==null;)if(r=oe,n=r.child,(r.subtreeFlags&1028)!==0&&n!==null)n.return=r,oe=n;else for(;oe!==null;){r=oe;try{var le=r.alternate;if((r.flags&1024)!==0)switch(r.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ue=le.memoizedProps,Et=le.memoizedState,j=r.stateNode,N=j.getSnapshotBeforeUpdate(r.elementType===r.type?ue:ar(r.type,ue),Et);j.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(J){yt(r,r.return,J)}if(n=r.sibling,n!==null){n.return=r.return,oe=n;break}oe=r.return}return le=lm,lm=!1,le}function ma(n,r,a){var c=r.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var h=c=c.next;do{if((h.tag&n)===n){var p=h.destroy;h.destroy=void 0,p!==void 0&&xd(r,a,p)}h=h.next}while(h!==c)}}function eu(n,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==r)}}function kd(n){var r=n.ref;if(r!==null){var a=n.stateNode;n.tag,n=a,typeof r=="function"?r(n):r.current=n}}function um(n){var r=n.alternate;r!==null&&(n.alternate=null,um(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&(delete r[wr],delete r[sa],delete r[Uc],delete r[Kv],delete r[Gv])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function cm(n){return n.tag===5||n.tag===3||n.tag===4}function dm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Id(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.nodeType===8?a.parentNode.insertBefore(n,r):a.insertBefore(n,r):(a.nodeType===8?(r=a.parentNode,r.insertBefore(n,a)):(r=a,r.appendChild(n)),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=bl));else if(c!==4&&(n=n.child,n!==null))for(Id(n,r,a),n=n.sibling;n!==null;)Id(n,r,a),n=n.sibling}function Sd(n,r,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(Sd(n,r,a),n=n.sibling;n!==null;)Sd(n,r,a),n=n.sibling}var Ht=null,lr=!1;function Ss(n,r,a){for(a=a.child;a!==null;)hm(n,r,a),a=a.sibling}function hm(n,r,a){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(ri,a)}catch{}switch(a.tag){case 5:nn||ho(a,r);case 6:var c=Ht,h=lr;Ht=null,Ss(n,r,a),Ht=c,lr=h,Ht!==null&&(lr?(n=Ht,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ht.removeChild(a.stateNode));break;case 18:Ht!==null&&(lr?(n=Ht,a=a.stateNode,n.nodeType===8?Fc(n.parentNode,a):n.nodeType===1&&Fc(n,a),rr(n)):Fc(Ht,a.stateNode));break;case 4:c=Ht,h=lr,Ht=a.stateNode.containerInfo,lr=!0,Ss(n,r,a),Ht=c,lr=h;break;case 0:case 11:case 14:case 15:if(!nn&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){h=c=c.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&((p&2)!==0||(p&4)!==0)&&xd(a,r,_),h=h.next}while(h!==c)}Ss(n,r,a);break;case 1:if(!nn&&(ho(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(k){yt(a,r,k)}Ss(n,r,a);break;case 21:Ss(n,r,a);break;case 22:a.mode&1?(nn=(c=nn)||a.memoizedState!==null,Ss(n,r,a),nn=c):Ss(n,r,a);break;default:Ss(n,r,a)}}function fm(n){var r=n.updateQueue;if(r!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new c_),r.forEach(function(c){var h=w_.bind(null,n,c);a.has(c)||(a.add(c),c.then(h,h))})}}function ur(n,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var h=a[c];try{var p=n,_=r,k=_;e:for(;k!==null;){switch(k.tag){case 5:Ht=k.stateNode,lr=!1;break e;case 3:Ht=k.stateNode.containerInfo,lr=!0;break e;case 4:Ht=k.stateNode.containerInfo,lr=!0;break e}k=k.return}if(Ht===null)throw Error(t(160));hm(p,_,h),Ht=null,lr=!1;var C=h.alternate;C!==null&&(C.return=null),h.return=null}catch(U){yt(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)pm(r,n),r=r.sibling}function pm(n,r){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(ur(r,n),xr(n),c&4){try{ma(3,n,n.return),eu(3,n)}catch(ue){yt(n,n.return,ue)}try{ma(5,n,n.return)}catch(ue){yt(n,n.return,ue)}}break;case 1:ur(r,n),xr(n),c&512&&a!==null&&ho(a,a.return);break;case 5:if(ur(r,n),xr(n),c&512&&a!==null&&ho(a,a.return),n.flags&32){var h=n.stateNode;try{pr(h,"")}catch(ue){yt(n,n.return,ue)}}if(c&4&&(h=n.stateNode,h!=null)){var p=n.memoizedProps,_=a!==null?a.memoizedProps:p,k=n.type,C=n.updateQueue;if(n.updateQueue=null,C!==null)try{k==="input"&&p.type==="radio"&&p.name!=null&&mn(h,p),ei(k,_);var U=ei(k,p);for(_=0;_<C.length;_+=2){var q=C[_],Q=C[_+1];q==="style"?Xs(h,Q):q==="dangerouslySetInnerHTML"?Qs(h,Q):q==="children"?pr(h,Q):xe(h,q,Q,U)}switch(k){case"input":Dr(h,p);break;case"textarea":un(h,p);break;case"select":var W=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var se=p.value;se!=null?Rn(h,!!p.multiple,se,!1):W!==!!p.multiple&&(p.defaultValue!=null?Rn(h,!!p.multiple,p.defaultValue,!0):Rn(h,!!p.multiple,p.multiple?[]:"",!1))}h[sa]=p}catch(ue){yt(n,n.return,ue)}}break;case 6:if(ur(r,n),xr(n),c&4){if(n.stateNode===null)throw Error(t(162));h=n.stateNode,p=n.memoizedProps;try{h.nodeValue=p}catch(ue){yt(n,n.return,ue)}}break;case 3:if(ur(r,n),xr(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{rr(r.containerInfo)}catch(ue){yt(n,n.return,ue)}break;case 4:ur(r,n),xr(n);break;case 13:ur(r,n),xr(n),h=n.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Cd=ot())),c&4&&fm(n);break;case 22:if(q=a!==null&&a.memoizedState!==null,n.mode&1?(nn=(U=nn)||q,ur(r,n),nn=U):ur(r,n),xr(n),c&8192){if(U=n.memoizedState!==null,(n.stateNode.isHidden=U)&&!q&&(n.mode&1)!==0)for(oe=n,q=n.child;q!==null;){for(Q=oe=q;oe!==null;){switch(W=oe,se=W.child,W.tag){case 0:case 11:case 14:case 15:ma(4,W,W.return);break;case 1:ho(W,W.return);var le=W.stateNode;if(typeof le.componentWillUnmount=="function"){c=W,a=W.return;try{r=c,le.props=r.memoizedProps,le.state=r.memoizedState,le.componentWillUnmount()}catch(ue){yt(c,a,ue)}}break;case 5:ho(W,W.return);break;case 22:if(W.memoizedState!==null){ym(Q);continue}}se!==null?(se.return=W,oe=se):ym(Q)}q=q.sibling}e:for(q=null,Q=n;;){if(Q.tag===5){if(q===null){q=Q;try{h=Q.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(k=Q.stateNode,C=Q.memoizedProps.style,_=C!=null&&C.hasOwnProperty("display")?C.display:null,k.style.display=Ys("display",_))}catch(ue){yt(n,n.return,ue)}}}else if(Q.tag===6){if(q===null)try{Q.stateNode.nodeValue=U?"":Q.memoizedProps}catch(ue){yt(n,n.return,ue)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===n)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===n)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===n)break e;q===Q&&(q=null),Q=Q.return}q===Q&&(q=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:ur(r,n),xr(n),c&4&&fm(n);break;case 21:break;default:ur(r,n),xr(n)}}function xr(n){var r=n.flags;if(r&2){try{e:{for(var a=n.return;a!==null;){if(cm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var h=c.stateNode;c.flags&32&&(pr(h,""),c.flags&=-33);var p=dm(n);Sd(n,p,h);break;case 3:case 4:var _=c.stateNode.containerInfo,k=dm(n);Id(n,k,_);break;default:throw Error(t(161))}}catch(C){yt(n,n.return,C)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function h_(n,r,a){oe=n,mm(n)}function mm(n,r,a){for(var c=(n.mode&1)!==0;oe!==null;){var h=oe,p=h.child;if(h.tag===22&&c){var _=h.memoizedState!==null||Zl;if(!_){var k=h.alternate,C=k!==null&&k.memoizedState!==null||nn;k=Zl;var U=nn;if(Zl=_,(nn=C)&&!U)for(oe=h;oe!==null;)_=oe,C=_.child,_.tag===22&&_.memoizedState!==null?vm(h):C!==null?(C.return=_,oe=C):vm(h);for(;p!==null;)oe=p,mm(p),p=p.sibling;oe=h,Zl=k,nn=U}gm(n)}else(h.subtreeFlags&8772)!==0&&p!==null?(p.return=h,oe=p):gm(n)}}function gm(n){for(;oe!==null;){var r=oe;if((r.flags&8772)!==0){var a=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:nn||eu(5,r);break;case 1:var c=r.stateNode;if(r.flags&4&&!nn)if(a===null)c.componentDidMount();else{var h=r.elementType===r.type?a.memoizedProps:ar(r.type,a.memoizedProps);c.componentDidUpdate(h,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&yp(r,p,c);break;case 3:var _=r.updateQueue;if(_!==null){if(a=null,r.child!==null)switch(r.child.tag){case 5:a=r.child.stateNode;break;case 1:a=r.child.stateNode}yp(r,_,a)}break;case 5:var k=r.stateNode;if(a===null&&r.flags&4){a=k;var C=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":C.autoFocus&&a.focus();break;case"img":C.src&&(a.src=C.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var q=U.memoizedState;if(q!==null){var Q=q.dehydrated;Q!==null&&rr(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}nn||r.flags&512&&kd(r)}catch(W){yt(r,r.return,W)}}if(r===n){oe=null;break}if(a=r.sibling,a!==null){a.return=r.return,oe=a;break}oe=r.return}}function ym(n){for(;oe!==null;){var r=oe;if(r===n){oe=null;break}var a=r.sibling;if(a!==null){a.return=r.return,oe=a;break}oe=r.return}}function vm(n){for(;oe!==null;){var r=oe;try{switch(r.tag){case 0:case 11:case 15:var a=r.return;try{eu(4,r)}catch(C){yt(r,a,C)}break;case 1:var c=r.stateNode;if(typeof c.componentDidMount=="function"){var h=r.return;try{c.componentDidMount()}catch(C){yt(r,h,C)}}var p=r.return;try{kd(r)}catch(C){yt(r,p,C)}break;case 5:var _=r.return;try{kd(r)}catch(C){yt(r,_,C)}}}catch(C){yt(r,r.return,C)}if(r===n){oe=null;break}var k=r.sibling;if(k!==null){k.return=r.return,oe=k;break}oe=r.return}}var f_=Math.ceil,tu=ke.ReactCurrentDispatcher,Ad=ke.ReactCurrentOwner,Kn=ke.ReactCurrentBatchConfig,qe=0,Mt=null,It=null,Wt=0,Vn=0,fo=Es(0),Ct=0,ga=null,yi=0,nu=0,Rd=0,ya=null,En=null,Cd=0,po=1/0,Qr=null,ru=!1,Pd=null,As=null,su=!1,Rs=null,iu=0,va=0,bd=null,ou=-1,au=0;function pn(){return(qe&6)!==0?ot():ou!==-1?ou:ou=ot()}function Cs(n){return(n.mode&1)===0?1:(qe&2)!==0&&Wt!==0?Wt&-Wt:Yv.transition!==null?(au===0&&(au=ii()),au):(n=je,n!==0||(n=window.event,n=n===void 0?16:qo(n.type)),n)}function cr(n,r,a,c){if(50<va)throw va=0,bd=null,Error(t(185));fs(n,a,c),((qe&2)===0||n!==Mt)&&(n===Mt&&((qe&2)===0&&(nu|=a),Ct===4&&Ps(n,Wt)),Tn(n,c),a===1&&qe===0&&(r.mode&1)===0&&(po=ot()+500,Vl&&xs()))}function Tn(n,r){var a=n.callbackNode;Lr(n,r);var c=si(n,n===Mt?Wt:0);if(c===0)a!==null&&Bo(a),n.callbackNode=null,n.callbackPriority=0;else if(r=c&-c,n.callbackPriority!==r){if(a!=null&&Bo(a),r===1)n.tag===0?Qv(wm.bind(null,n)):ip(wm.bind(null,n)),Wv(function(){(qe&6)===0&&xs()}),a=null;else{switch(ms(c)){case 1:a=ni;break;case 4:a=cs;break;case 16:a=Un;break;case 536870912:a=al;break;default:a=Un}a=Rm(a,_m.bind(null,n))}n.callbackPriority=r,n.callbackNode=a}}function _m(n,r){if(ou=-1,au=0,(qe&6)!==0)throw Error(t(327));var a=n.callbackNode;if(mo()&&n.callbackNode!==a)return null;var c=si(n,n===Mt?Wt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||r)r=lu(n,c);else{r=c;var h=qe;qe|=2;var p=Tm();(Mt!==n||Wt!==r)&&(Qr=null,po=ot()+500,_i(n,r));do try{g_();break}catch(k){Em(n,k)}while(!0);Qc(),tu.current=p,qe=h,It!==null?r=0:(Mt=null,Wt=0,r=Ct)}if(r!==0){if(r===2&&(h=Pn(n),h!==0&&(c=h,r=Nd(n,h))),r===1)throw a=ga,_i(n,0),Ps(n,c),Tn(n,ot()),a;if(r===6)Ps(n,c);else{if(h=n.current.alternate,(c&30)===0&&!p_(h)&&(r=lu(n,c),r===2&&(p=Pn(n),p!==0&&(c=p,r=Nd(n,p))),r===1))throw a=ga,_i(n,0),Ps(n,c),Tn(n,ot()),a;switch(n.finishedWork=h,n.finishedLanes=c,r){case 0:case 1:throw Error(t(345));case 2:wi(n,En,Qr);break;case 3:if(Ps(n,c),(c&130023424)===c&&(r=Cd+500-ot(),10<r)){if(si(n,0)!==0)break;if(h=n.suspendedLanes,(h&c)!==c){pn(),n.pingedLanes|=n.suspendedLanes&h;break}n.timeoutHandle=jc(wi.bind(null,n,En,Qr),r);break}wi(n,En,Qr);break;case 4:if(Ps(n,c),(c&4194240)===c)break;for(r=n.eventTimes,h=-1;0<c;){var _=31-dn(c);p=1<<_,_=r[_],_>h&&(h=_),c&=~p}if(c=h,c=ot()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*f_(c/1960))-c,10<c){n.timeoutHandle=jc(wi.bind(null,n,En,Qr),c);break}wi(n,En,Qr);break;case 5:wi(n,En,Qr);break;default:throw Error(t(329))}}}return Tn(n,ot()),n.callbackNode===a?_m.bind(null,n):null}function Nd(n,r){var a=ya;return n.current.memoizedState.isDehydrated&&(_i(n,r).flags|=256),n=lu(n,r),n!==2&&(r=En,En=a,r!==null&&Dd(r)),n}function Dd(n){En===null?En=n:En.push.apply(En,n)}function p_(n){for(var r=n;;){if(r.flags&16384){var a=r.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var h=a[c],p=h.getSnapshot;h=h.value;try{if(!ir(p(),h))return!1}catch{return!1}}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ps(n,r){for(r&=~Rd,r&=~nu,n.suspendedLanes|=r,n.pingedLanes&=~r,n=n.expirationTimes;0<r;){var a=31-dn(r),c=1<<a;n[a]=-1,r&=~c}}function wm(n){if((qe&6)!==0)throw Error(t(327));mo();var r=si(n,0);if((r&1)===0)return Tn(n,ot()),null;var a=lu(n,r);if(n.tag!==0&&a===2){var c=Pn(n);c!==0&&(r=c,a=Nd(n,c))}if(a===1)throw a=ga,_i(n,0),Ps(n,r),Tn(n,ot()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=r,wi(n,En,Qr),Tn(n,ot()),null}function Od(n,r){var a=qe;qe|=1;try{return n(r)}finally{qe=a,qe===0&&(po=ot()+500,Vl&&xs())}}function vi(n){Rs!==null&&Rs.tag===0&&(qe&6)===0&&mo();var r=qe;qe|=1;var a=Kn.transition,c=je;try{if(Kn.transition=null,je=1,n)return n()}finally{je=c,Kn.transition=a,qe=r,(qe&6)===0&&xs()}}function Vd(){Vn=fo.current,ut(fo)}function _i(n,r){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,Hv(a)),It!==null)for(a=It.return;a!==null;){var c=a;switch(Hc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Dl();break;case 3:uo(),ut(vn),ut(Zt),rd();break;case 5:td(c);break;case 4:uo();break;case 13:ut(pt);break;case 19:ut(pt);break;case 10:Yc(c.type._context);break;case 22:case 23:Vd()}a=a.return}if(Mt=n,It=n=bs(n.current,null),Wt=Vn=r,Ct=0,ga=null,Rd=nu=yi=0,En=ya=null,pi!==null){for(r=0;r<pi.length;r++)if(a=pi[r],c=a.interleaved,c!==null){a.interleaved=null;var h=c.next,p=a.pending;if(p!==null){var _=p.next;p.next=h,c.next=_}a.pending=c}pi=null}return n}function Em(n,r){do{var a=It;try{if(Qc(),Wl.current=Ql,ql){for(var c=mt.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}ql=!1}if(gi=0,Vt=Rt=mt=null,ca=!1,da=0,Ad.current=null,a===null||a.return===null){Ct=1,ga=r,It=null;break}e:{var p=n,_=a.return,k=a,C=r;if(r=Wt,k.flags|=32768,C!==null&&typeof C=="object"&&typeof C.then=="function"){var U=C,q=k,Q=q.tag;if((q.mode&1)===0&&(Q===0||Q===11||Q===15)){var W=q.alternate;W?(q.updateQueue=W.updateQueue,q.memoizedState=W.memoizedState,q.lanes=W.lanes):(q.updateQueue=null,q.memoizedState=null)}var se=qp(_);if(se!==null){se.flags&=-257,Kp(se,_,k,p,r),se.mode&1&&Wp(p,U,r),r=se,C=U;var le=r.updateQueue;if(le===null){var ue=new Set;ue.add(C),r.updateQueue=ue}else le.add(C);break e}else{if((r&1)===0){Wp(p,U,r),Md();break e}C=Error(t(426))}}else if(dt&&k.mode&1){var Et=qp(_);if(Et!==null){(Et.flags&65536)===0&&(Et.flags|=256),Kp(Et,_,k,p,r),Kc(co(C,k));break e}}p=C=co(C,k),Ct!==4&&(Ct=2),ya===null?ya=[p]:ya.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var j=$p(p,C,r);gp(p,j);break e;case 1:k=C;var N=p.type,F=p.stateNode;if((p.flags&128)===0&&(typeof N.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(As===null||!As.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var J=Hp(p,k,r);gp(p,J);break e}}p=p.return}while(p!==null)}km(a)}catch(he){r=he,It===a&&a!==null&&(It=a=a.return);continue}break}while(!0)}function Tm(){var n=tu.current;return tu.current=Ql,n===null?Ql:n}function Md(){(Ct===0||Ct===3||Ct===2)&&(Ct=4),Mt===null||(yi&268435455)===0&&(nu&268435455)===0||Ps(Mt,Wt)}function lu(n,r){var a=qe;qe|=2;var c=Tm();(Mt!==n||Wt!==r)&&(Qr=null,_i(n,r));do try{m_();break}catch(h){Em(n,h)}while(!0);if(Qc(),qe=a,tu.current=c,It!==null)throw Error(t(261));return Mt=null,Wt=0,Ct}function m_(){for(;It!==null;)xm(It)}function g_(){for(;It!==null&&!il();)xm(It)}function xm(n){var r=Am(n.alternate,n,Vn);n.memoizedProps=n.pendingProps,r===null?km(n):It=r,Ad.current=null}function km(n){var r=n;do{var a=r.alternate;if(n=r.return,(r.flags&32768)===0){if(a=l_(a,r,Vn),a!==null){It=a;return}}else{if(a=u_(a,r),a!==null){a.flags&=32767,It=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ct=6,It=null;return}}if(r=r.sibling,r!==null){It=r;return}It=r=n}while(r!==null);Ct===0&&(Ct=5)}function wi(n,r,a){var c=je,h=Kn.transition;try{Kn.transition=null,je=1,y_(n,r,a,c)}finally{Kn.transition=h,je=c}return null}function y_(n,r,a,c){do mo();while(Rs!==null);if((qe&6)!==0)throw Error(t(327));a=n.finishedWork;var h=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(it(n,p),n===Mt&&(It=Mt=null,Wt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||su||(su=!0,Rm(Un,function(){return mo(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=Kn.transition,Kn.transition=null;var _=je;je=1;var k=qe;qe|=4,Ad.current=null,d_(n,a),pm(a,n),Lv(Mc),ys=!!Vc,Mc=Vc=null,n.current=a,h_(a),_c(),qe=k,je=_,Kn.transition=p}else n.current=a;if(su&&(su=!1,Rs=n,iu=h),p=n.pendingLanes,p===0&&(As=null),ll(a.stateNode),Tn(n,ot()),r!==null)for(c=n.onRecoverableError,a=0;a<r.length;a++)h=r[a],c(h.value,{componentStack:h.stack,digest:h.digest});if(ru)throw ru=!1,n=Pd,Pd=null,n;return(iu&1)!==0&&n.tag!==0&&mo(),p=n.pendingLanes,(p&1)!==0?n===bd?va++:(va=0,bd=n):va=0,xs(),null}function mo(){if(Rs!==null){var n=ms(iu),r=Kn.transition,a=je;try{if(Kn.transition=null,je=16>n?16:n,Rs===null)var c=!1;else{if(n=Rs,Rs=null,iu=0,(qe&6)!==0)throw Error(t(331));var h=qe;for(qe|=4,oe=n.current;oe!==null;){var p=oe,_=p.child;if((oe.flags&16)!==0){var k=p.deletions;if(k!==null){for(var C=0;C<k.length;C++){var U=k[C];for(oe=U;oe!==null;){var q=oe;switch(q.tag){case 0:case 11:case 15:ma(8,q,p)}var Q=q.child;if(Q!==null)Q.return=q,oe=Q;else for(;oe!==null;){q=oe;var W=q.sibling,se=q.return;if(um(q),q===U){oe=null;break}if(W!==null){W.return=se,oe=W;break}oe=se}}}var le=p.alternate;if(le!==null){var ue=le.child;if(ue!==null){le.child=null;do{var Et=ue.sibling;ue.sibling=null,ue=Et}while(ue!==null)}}oe=p}}if((p.subtreeFlags&2064)!==0&&_!==null)_.return=p,oe=_;else e:for(;oe!==null;){if(p=oe,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:ma(9,p,p.return)}var j=p.sibling;if(j!==null){j.return=p.return,oe=j;break e}oe=p.return}}var N=n.current;for(oe=N;oe!==null;){_=oe;var F=_.child;if((_.subtreeFlags&2064)!==0&&F!==null)F.return=_,oe=F;else e:for(_=N;oe!==null;){if(k=oe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:eu(9,k)}}catch(he){yt(k,k.return,he)}if(k===_){oe=null;break e}var J=k.sibling;if(J!==null){J.return=k.return,oe=J;break e}oe=k.return}}if(qe=h,xs(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(ri,n)}catch{}c=!0}return c}finally{je=a,Kn.transition=r}}return!1}function Im(n,r,a){r=co(a,r),r=$p(n,r,1),n=Is(n,r,1),r=pn(),n!==null&&(fs(n,1,r),Tn(n,r))}function yt(n,r,a){if(n.tag===3)Im(n,n,a);else for(;r!==null;){if(r.tag===3){Im(r,n,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(As===null||!As.has(c))){n=co(a,n),n=Hp(r,n,1),r=Is(r,n,1),n=pn(),r!==null&&(fs(r,1,n),Tn(r,n));break}}r=r.return}}function v_(n,r,a){var c=n.pingCache;c!==null&&c.delete(r),r=pn(),n.pingedLanes|=n.suspendedLanes&a,Mt===n&&(Wt&a)===a&&(Ct===4||Ct===3&&(Wt&130023424)===Wt&&500>ot()-Cd?_i(n,0):Rd|=a),Tn(n,r)}function Sm(n,r){r===0&&((n.mode&1)===0?r=1:(r=Li,Li<<=1,(Li&130023424)===0&&(Li=4194304)));var a=pn();n=qr(n,r),n!==null&&(fs(n,r,a),Tn(n,a))}function __(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Sm(n,a)}function w_(n,r){var a=0;switch(n.tag){case 13:var c=n.stateNode,h=n.memoizedState;h!==null&&(a=h.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(r),Sm(n,a)}var Am;Am=function(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps||vn.current)wn=!0;else{if((n.lanes&a)===0&&(r.flags&128)===0)return wn=!1,a_(n,r,a);wn=(n.flags&131072)!==0}else wn=!1,dt&&(r.flags&1048576)!==0&&op(r,Ll,r.index);switch(r.lanes=0,r.tag){case 2:var c=r.type;Jl(n,r),n=r.pendingProps;var h=no(r,Zt.current);lo(r,a),h=od(null,r,c,n,h,a);var p=ad();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,_n(c)?(p=!0,Ol(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Zc(r),h.updater=Yl,r.stateNode=h,h._reactInternals=r,fd(r,c,n,a),r=yd(null,r,c,!0,p,a)):(r.tag=0,dt&&p&&$c(r),fn(null,r,h,a),r=r.child),r;case 16:c=r.elementType;e:{switch(Jl(n,r),n=r.pendingProps,h=c._init,c=h(c._payload),r.type=c,h=r.tag=T_(c),n=ar(c,n),h){case 0:r=gd(null,r,c,n,a);break e;case 1:r=Zp(null,r,c,n,a);break e;case 11:r=Gp(null,r,c,n,a);break e;case 14:r=Qp(null,r,c,ar(c.type,n),a);break e}throw Error(t(306,c,""))}return r;case 0:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:ar(c,h),gd(n,r,c,h,a);case 1:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:ar(c,h),Zp(n,r,c,h,a);case 3:e:{if(em(r),n===null)throw Error(t(387));c=r.pendingProps,p=r.memoizedState,h=p.element,mp(n,r),$l(r,c,null,a);var _=r.memoizedState;if(c=_.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=co(Error(t(423)),r),r=tm(n,r,c,a,h);break e}else if(c!==h){h=co(Error(t(424)),r),r=tm(n,r,c,a,h);break e}else for(On=ws(r.stateNode.containerInfo.firstChild),Dn=r,dt=!0,or=null,a=fp(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(io(),c===h){r=Gr(n,r,a);break e}fn(n,r,c,a)}r=r.child}return r;case 5:return vp(r),n===null&&qc(r),c=r.type,h=r.pendingProps,p=n!==null?n.memoizedProps:null,_=h.children,Lc(c,h)?_=null:p!==null&&Lc(c,p)&&(r.flags|=32),Jp(n,r),fn(n,r,_,a),r.child;case 6:return n===null&&qc(r),null;case 13:return nm(n,r,a);case 4:return ed(r,r.stateNode.containerInfo),c=r.pendingProps,n===null?r.child=oo(r,null,c,a):fn(n,r,c,a),r.child;case 11:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:ar(c,h),Gp(n,r,c,h,a);case 7:return fn(n,r,r.pendingProps,a),r.child;case 8:return fn(n,r,r.pendingProps.children,a),r.child;case 12:return fn(n,r,r.pendingProps.children,a),r.child;case 10:e:{if(c=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,at(Ul,c._currentValue),c._currentValue=_,p!==null)if(ir(p.value,_)){if(p.children===h.children&&!vn.current){r=Gr(n,r,a);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var k=p.dependencies;if(k!==null){_=p.child;for(var C=k.firstContext;C!==null;){if(C.context===c){if(p.tag===1){C=Kr(-1,a&-a),C.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var q=U.pending;q===null?C.next=C:(C.next=q.next,q.next=C),U.pending=C}}p.lanes|=a,C=p.alternate,C!==null&&(C.lanes|=a),Xc(p.return,a,r),k.lanes|=a;break}C=C.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(t(341));_.lanes|=a,k=_.alternate,k!==null&&(k.lanes|=a),Xc(_,a,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}fn(n,r,h.children,a),r=r.child}return r;case 9:return h=r.type,c=r.pendingProps.children,lo(r,a),h=Wn(h),c=c(h),r.flags|=1,fn(n,r,c,a),r.child;case 14:return c=r.type,h=ar(c,r.pendingProps),h=ar(c.type,h),Qp(n,r,c,h,a);case 15:return Yp(n,r,r.type,r.pendingProps,a);case 17:return c=r.type,h=r.pendingProps,h=r.elementType===c?h:ar(c,h),Jl(n,r),r.tag=1,_n(c)?(n=!0,Ol(r)):n=!1,lo(r,a),Bp(r,c,h),fd(r,c,h,a),yd(null,r,c,!0,n,a);case 19:return sm(n,r,a);case 22:return Xp(n,r,a)}throw Error(t(156,r.tag))};function Rm(n,r){return Vi(n,r)}function E_(n,r,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(n,r,a,c){return new E_(n,r,a,c)}function Ld(n){return n=n.prototype,!(!n||!n.isReactComponent)}function T_(n){if(typeof n=="function")return Ld(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===vt)return 14}return 2}function bs(n,r){var a=n.alternate;return a===null?(a=Gn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function uu(n,r,a,c,h,p){var _=2;if(c=n,typeof n=="function")Ld(n)&&(_=1);else if(typeof n=="string")_=5;else e:switch(n){case b:return Ei(a.children,h,p,r);case x:_=8,h|=8;break;case S:return n=Gn(12,a,r,h|2),n.elementType=S,n.lanes=p,n;case I:return n=Gn(13,a,r,h),n.elementType=I,n.lanes=p,n;case ft:return n=Gn(19,a,r,h),n.elementType=ft,n.lanes=p,n;case He:return cu(a,h,p,r);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case R:_=10;break e;case D:_=9;break e;case M:_=11;break e;case vt:_=14;break e;case Nt:_=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return r=Gn(_,a,r,h),r.elementType=n,r.type=c,r.lanes=p,r}function Ei(n,r,a,c){return n=Gn(7,n,c,r),n.lanes=a,n}function cu(n,r,a,c){return n=Gn(22,n,c,r),n.elementType=He,n.lanes=a,n.stateNode={isHidden:!1},n}function jd(n,r,a){return n=Gn(6,n,null,r),n.lanes=a,n}function Fd(n,r,a){return r=Gn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}function x_(n,r,a,c,h){this.tag=r,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hs(0),this.expirationTimes=hs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hs(0),this.identifierPrefix=c,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Ud(n,r,a,c,h,p,_,k,C){return n=new x_(n,r,a,k,C),r===1?(r=1,p===!0&&(r|=8)):r=0,p=Gn(3,null,null,r),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zc(p),n}function k_(n,r,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ae,key:c==null?null:""+c,children:n,containerInfo:r,implementation:a}}function Cm(n){if(!n)return Ts;n=n._reactInternals;e:{if(Jn(n)!==n||n.tag!==1)throw Error(t(170));var r=n;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(_n(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(_n(a))return rp(n,a,r)}return r}function Pm(n,r,a,c,h,p,_,k,C){return n=Ud(a,c,!0,n,h,p,_,k,C),n.context=Cm(null),a=n.current,c=pn(),h=Cs(a),p=Kr(c,h),p.callback=r??null,Is(a,p,h),n.current.lanes=h,fs(n,h,c),Tn(n,c),n}function du(n,r,a,c){var h=r.current,p=pn(),_=Cs(h);return a=Cm(a),r.context===null?r.context=a:r.pendingContext=a,r=Kr(p,_),r.payload={element:n},c=c===void 0?null:c,c!==null&&(r.callback=c),n=Is(h,r,_),n!==null&&(cr(n,h,_,p),zl(n,h,_)),_}function hu(n){return n=n.current,n.child?(n.child.tag===5,n.child.stateNode):null}function bm(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Bd(n,r){bm(n,r),(n=n.alternate)&&bm(n,r)}function I_(){return null}var Nm=typeof reportError=="function"?reportError:function(n){console.error(n)};function zd(n){this._internalRoot=n}fu.prototype.render=zd.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(t(409));du(n,r,null,null)},fu.prototype.unmount=zd.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;vi(function(){du(null,n,null,null)}),r[zr]=null}};function fu(n){this._internalRoot=n}fu.prototype.unstable_scheduleHydration=function(n){if(n){var r=fl();n={blockedOn:null,target:n,priority:r};for(var a=0;a<gr.length&&r!==0&&r<gr[a].priority;a++);gr.splice(a,0,n),a===0&&gl(n)}};function $d(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function pu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Dm(){}function S_(n,r,a,c,h){if(h){if(typeof c=="function"){var p=c;c=function(){var U=hu(_);p.call(U)}}var _=Pm(r,c,n,0,null,!1,!1,"",Dm);return n._reactRootContainer=_,n[zr]=_.current,na(n.nodeType===8?n.parentNode:n),vi(),_}for(;h=n.lastChild;)n.removeChild(h);if(typeof c=="function"){var k=c;c=function(){var U=hu(C);k.call(U)}}var C=Ud(n,0,!1,null,null,!1,!1,"",Dm);return n._reactRootContainer=C,n[zr]=C.current,na(n.nodeType===8?n.parentNode:n),vi(function(){du(r,C,a,c)}),C}function mu(n,r,a,c,h){var p=a._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var k=h;h=function(){var C=hu(_);k.call(C)}}du(r,_,n,h)}else _=S_(a,r,n,h,c);return hu(_)}dl=function(n){switch(n.tag){case 3:var r=n.stateNode;if(r.current.memoizedState.isDehydrated){var a=ds(r.pendingLanes);a!==0&&(ps(r,a|1),Tn(r,ot()),(qe&6)===0&&(po=ot()+500,xs()))}break;case 13:vi(function(){var c=qr(n,1);if(c!==null){var h=pn();cr(c,n,1,h)}}),Bd(n,1)}},ji=function(n){if(n.tag===13){var r=qr(n,134217728);if(r!==null){var a=pn();cr(r,n,134217728,a)}Bd(n,134217728)}},hl=function(n){if(n.tag===13){var r=Cs(n),a=qr(n,r);if(a!==null){var c=pn();cr(a,n,r,c)}Bd(n,r)}},fl=function(){return je},pl=function(n,r){var a=je;try{return je=n,r()}finally{je=a}},ee=function(n,r,a){switch(r){case"input":if(Dr(n,a),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==n&&c.form===n.form){var h=Nl(c);if(!h)throw Error(t(90));Qn(c),Dr(c,h)}}}break;case"textarea":un(n,a);break;case"select":r=a.value,r!=null&&Rn(n,!!a.multiple,r,!1)}},Ke=Od,Le=vi;var A_={usingClientEntryPoint:!1,Events:[ia,eo,Nl,ne,ye,Od]},_a={findFiberByHostInstance:ci,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R_={bundleType:_a.bundleType,version:_a.version,rendererPackageName:_a.rendererPackageName,rendererConfig:_a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ke.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Uo(n),n===null?null:n.stateNode},findFiberByHostInstance:_a.findFiberByHostInstance||I_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gu.isDisabled&&gu.supportsFiber)try{ri=gu.inject(R_),Cn=gu}catch{}}return xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A_,xn.createPortal=function(n,r){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$d(r))throw Error(t(200));return k_(n,r,null,a)},xn.createRoot=function(n,r){if(!$d(n))throw Error(t(299));var a=!1,c="",h=Nm;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Ud(n,1,!1,null,null,a,!1,c,h),n[zr]=r.current,na(n.nodeType===8?n.parentNode:n),new zd(r)},xn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Uo(r),n=n===null?null:n.stateNode,n},xn.flushSync=function(n){return vi(n)},xn.hydrate=function(n,r,a){if(!pu(r))throw Error(t(200));return mu(null,n,r,!0,a)},xn.hydrateRoot=function(n,r,a){if(!$d(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,h=!1,p="",_=Nm;if(a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),r=Pm(r,null,n,1,a??null,h,!1,p,_),n[zr]=r.current,na(n),c)for(n=0;n<c.length;n++)a=c[n],h=a._getVersion,h=h(a._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[a,h]:r.mutableSourceEagerHydrationData.push(a,h);return new fu(r)},xn.render=function(n,r,a){if(!pu(r))throw Error(t(200));return mu(null,n,r,!1,a)},xn.unmountComponentAtNode=function(n){if(!pu(n))throw Error(t(40));return n._reactRootContainer?(vi(function(){mu(null,null,n,!1,function(){n._reactRootContainer=null,n[zr]=null})}),!0):!1},xn.unstable_batchedUpdates=Od,xn.unstable_renderSubtreeIntoContainer=function(n,r,a,c){if(!pu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return mu(n,r,a,!1,c)},xn.version="18.3.1-next-f1338f8080-20240426",xn}var Bm;function M_(){if(Bm)return qd.exports;Bm=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),qd.exports=V_(),qd.exports}var zm;function L_(){if(zm)return yu;zm=1;var s=M_();return yu.createRoot=s.createRoot,yu.hydrateRoot=s.hydrateRoot,yu}var j_=L_();var F_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const U_=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Ye=(s,e)=>{const t=De.forwardRef(({color:i="currentColor",size:o=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:m="",children:g,...w},T)=>De.createElement("svg",{ref:T,...F_,width:o,height:o,stroke:i,strokeWidth:d?Number(u)*24/Number(o):u,className:["lucide",`lucide-${U_(s)}`,m].join(" "),...w},[...e.map(([P,O])=>De.createElement(P,O)),...Array.isArray(g)?g:[g]]));return t.displayName=`${s}`,t};const $m=Ye("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const B_=Ye("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Dh=Ye("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const l0=Ye("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const u0=Ye("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const c0=Ye("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const z_=Ye("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Hm=Ye("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const $_=Ye("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const H_=Ye("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Oh=Ye("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const W_=Ye("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);const q_=Ye("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);const Vh=Ye("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]);const d0=Ye("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const K_=Ye("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const G_=Ye("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Q_=Ye("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Y_=Ye("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Wm=Ye("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const qm=Ye("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);const X_=Ye("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const J_=Ye("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]);const Z_=Ye("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const ew=Ye("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const tw=Ye("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Km=Ye("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const nw=Ye("UploadCloud",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M12 12v9",key:"192myk"}],["path",{d:"m16 16-4-4-4 4",key:"119tzi"}]]);const rw=Ye("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Ou=Ye("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);const h0=Ye("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const sw=Ye("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);var Gm={};const f0=function(s){const e=[];let t=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},iw=function(s){const e=[];let t=0,i=0;for(;t<s.length;){const o=s[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[t++];e[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[t++],d=s[t++],m=s[t++],g=((o&7)<<18|(u&63)<<12|(d&63)<<6|m&63)-65536;e[i++]=String.fromCharCode(55296+(g>>10)),e[i++]=String.fromCharCode(56320+(g&1023))}else{const u=s[t++],d=s[t++];e[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|d&63)}}return e.join("")},p0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],d=o+1<s.length,m=d?s[o+1]:0,g=o+2<s.length,w=g?s[o+2]:0,T=u>>2,P=(u&3)<<4|m>>4;let O=(m&15)<<2|w>>6,H=w&63;g||(H=64,d||(O=64)),i.push(t[T],t[P],t[O],t[H])}return i.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(f0(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):iw(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=t[s.charAt(o++)],m=o<s.length?t[s.charAt(o)]:0;++o;const w=o<s.length?t[s.charAt(o)]:64;++o;const P=o<s.length?t[s.charAt(o)]:64;if(++o,u==null||m==null||w==null||P==null)throw new ow;const O=u<<2|m>>4;if(i.push(O),w!==64){const H=m<<4&240|w>>2;if(i.push(H),P!==64){const Y=w<<6&192|P;i.push(Y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class ow extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const aw=function(s){const e=f0(s);return p0.encodeByteArray(e,!0)},Vu=function(s){return aw(s).replace(/\./g,"")},m0=function(s){try{return p0.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function lw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const uw=()=>lw().__FIREBASE_DEFAULTS__,cw=()=>{if(typeof process>"u"||typeof Gm>"u")return;const s=Gm.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},dw=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&m0(s[1]);return e&&JSON.parse(e)},Ju=()=>{try{return uw()||cw()||dw()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},g0=s=>{var e,t;return(t=(e=Ju())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[s]},hw=s=>{const e=g0(s);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},y0=()=>{var s;return(s=Ju())===null||s===void 0?void 0:s.config},v0=s=>{var e;return(e=Ju())===null||e===void 0?void 0:e[`_${s}`]};class fw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}function pw(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Vu(JSON.stringify(t)),Vu(JSON.stringify(d)),""].join(".")}function an(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(an())}function gw(){var s;const e=(s=Ju())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yw(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vw(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function _w(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ww(){const s=an();return s.indexOf("MSIE ")>=0||s.indexOf("Trident/")>=0}function Ew(){return!gw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tw(){try{return typeof indexedDB=="object"}catch{return!1}}function xw(){return new Promise((s,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var u;e(((u=o.error)===null||u===void 0?void 0:u.message)||"")}}catch(t){e(t)}})}const kw="FirebaseError";class is extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=kw,Object.setPrototypeOf(this,is.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wa.prototype.create)}}class Wa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],d=u?Iw(u,i):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new is(o,m,i)}}function Iw(s,e){return s.replace(Sw,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const Sw=/\{\$([^}]+)}/g;function Aw(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}function Mu(s,e){if(s===e)return!0;const t=Object.keys(s),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const u=s[o],d=e[o];if(Qm(u)&&Qm(d)){if(!Mu(u,d))return!1}else if(u!==d)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function Qm(s){return s!==null&&typeof s=="object"}function qa(s){const e=[];for(const[t,i]of Object.entries(s))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function xa(s){const e={};return s.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,u]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ka(s){const e=s.indexOf("?");if(!e)return"";const t=s.indexOf("#",e);return s.substring(e,t>0?t:void 0)}function Rw(s,e){const t=new Cw(s,e);return t.subscribe.bind(t)}class Cw{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Pw(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=Qd),o.error===void 0&&(o.error=Qd),o.complete===void 0&&(o.complete=Qd);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Pw(s,e){if(typeof s!="object"||s===null)return!1;for(const t of e)if(t in s&&typeof s[t]=="function")return!0;return!1}function Qd(){}function Qt(s){return s&&s._delegate?s._delegate:s}class Ii{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ti="[DEFAULT]";class bw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new fw;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),o=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(u){if(o)return null;throw u}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Dw(e))try{this.getOrInitializeService({instanceIdentifier:Ti})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(e=Ti){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ti){return this.instances.has(e)}getOptions(e=Ti){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[u,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);i===m&&d.resolve(o)}return o}onInit(e,t){var i;const o=this.normalizeInstanceIdentifier(t),u=(i=this.onInitCallbacks.get(o))!==null&&i!==void 0?i:new Set;u.add(e),this.onInitCallbacks.set(o,u);const d=this.instances.get(o);return d&&e(d,o),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Nw(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ti){return this.component?this.component.multipleInstances?e:Ti:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Nw(s){return s===Ti?void 0:s}function Dw(s){return s.instantiationMode==="EAGER"}class Ow{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new bw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}var Fe;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Fe||(Fe={}));const Vw={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},Mw=Fe.INFO,Lw={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},jw=(s,e,...t)=>{if(e<s.logLevel)return;const i=new Date().toISOString(),o=Lw[e];if(o)console[o](`[${i}]  ${s.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mh{constructor(e){this.name=e,this._logLevel=Mw,this._logHandler=jw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const Fw=(s,e)=>e.some(t=>s instanceof t);let Ym,Xm;function Uw(){return Ym||(Ym=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Bw(){return Xm||(Xm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const _0=new WeakMap,uh=new WeakMap,w0=new WeakMap,Yd=new WeakMap,Lh=new WeakMap;function zw(s){const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",d)},u=()=>{t(Us(s.result)),o()},d=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&_0.set(t,s)}).catch(()=>{}),Lh.set(e,s),e}function $w(s){if(uh.has(s))return;const e=new Promise((t,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",d),s.removeEventListener("abort",d)},u=()=>{t(),o()},d=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",d),s.addEventListener("abort",d)});uh.set(s,e)}let ch={get(s,e,t){if(s instanceof IDBTransaction){if(e==="done")return uh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||w0.get(s);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Us(s[e])},set(s,e,t){return s[e]=t,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Hw(s){ch=s(ch)}function Ww(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=s.call(Xd(this),e,...t);return w0.set(i,e.sort?e.sort():[e]),Us(i)}:Bw().includes(s)?function(...e){return s.apply(Xd(this),e),Us(_0.get(this))}:function(...e){return Us(s.apply(Xd(this),e))}}function qw(s){return typeof s=="function"?Ww(s):(s instanceof IDBTransaction&&$w(s),Fw(s,Uw())?new Proxy(s,ch):s)}function Us(s){if(s instanceof IDBRequest)return zw(s);if(Yd.has(s))return Yd.get(s);const e=qw(s);return e!==s&&(Yd.set(s,e),Lh.set(e,s)),e}const Xd=s=>Lh.get(s);function Kw(s,e,{blocked:t,upgrade:i,blocking:o,terminated:u}={}){const d=indexedDB.open(s,e),m=Us(d);return i&&d.addEventListener("upgradeneeded",g=>{i(Us(d.result),g.oldVersion,g.newVersion,Us(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",w=>o(w.oldVersion,w.newVersion,w))}).catch(()=>{}),m}const Gw=["get","getKey","getAll","getAllKeys","count"],Qw=["put","add","delete","clear"],Jd=new Map;function Jm(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Jd.get(e))return Jd.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=Qw.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||Gw.includes(t)))return;const u=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let w=g.store;return i&&(w=w.index(m.shift())),(await Promise.all([w[t](...m),o&&g.done]))[0]};return Jd.set(e,u),u}Hw(s=>({...s,get:(e,t,i)=>Jm(e,t)||s.get(e,t,i),has:(e,t)=>!!Jm(e,t)||s.has(e,t)}));class Yw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Xw(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Xw(s){const e=s.getComponent();return e?.type==="VERSION"}const dh="@firebase/app",Zm="0.10.13";const ts=new Mh("@firebase/app"),Jw="@firebase/app-compat",Zw="@firebase/analytics-compat",eE="@firebase/analytics",tE="@firebase/app-check-compat",nE="@firebase/app-check",rE="@firebase/auth",sE="@firebase/auth-compat",iE="@firebase/database",oE="@firebase/data-connect",aE="@firebase/database-compat",lE="@firebase/functions",uE="@firebase/functions-compat",cE="@firebase/installations",dE="@firebase/installations-compat",hE="@firebase/messaging",fE="@firebase/messaging-compat",pE="@firebase/performance",mE="@firebase/performance-compat",gE="@firebase/remote-config",yE="@firebase/remote-config-compat",vE="@firebase/storage",_E="@firebase/storage-compat",wE="@firebase/firestore",EE="@firebase/vertexai-preview",TE="@firebase/firestore-compat",xE="firebase",kE="10.14.1";const hh="[DEFAULT]",IE={[dh]:"fire-core",[Jw]:"fire-core-compat",[eE]:"fire-analytics",[Zw]:"fire-analytics-compat",[nE]:"fire-app-check",[tE]:"fire-app-check-compat",[rE]:"fire-auth",[sE]:"fire-auth-compat",[iE]:"fire-rtdb",[oE]:"fire-data-connect",[aE]:"fire-rtdb-compat",[lE]:"fire-fn",[uE]:"fire-fn-compat",[cE]:"fire-iid",[dE]:"fire-iid-compat",[hE]:"fire-fcm",[fE]:"fire-fcm-compat",[pE]:"fire-perf",[mE]:"fire-perf-compat",[gE]:"fire-rc",[yE]:"fire-rc-compat",[vE]:"fire-gcs",[_E]:"fire-gcs-compat",[wE]:"fire-fst",[TE]:"fire-fst-compat",[EE]:"fire-vertex","fire-js":"fire-js",[xE]:"fire-js-all"};const Lu=new Map,SE=new Map,fh=new Map;function eg(s,e){try{s.container.addComponent(e)}catch(t){ts.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,t)}}function Io(s){const e=s.name;if(fh.has(e))return ts.debug(`There were multiple attempts to register component ${e}.`),!1;fh.set(e,s);for(const t of Lu.values())eg(t,s);for(const t of SE.values())eg(t,s);return!0}function jh(s,e){const t=s.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),s.container.getProvider(e)}function Ir(s){return s.settings!==void 0}const AE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bs=new Wa("app","Firebase",AE);class RE{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ii("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bs.create("app-deleted",{appName:this._name})}}const Do=kE;function E0(s,e={}){let t=s;typeof e!="object"&&(e={name:e});const i=Object.assign({name:hh,automaticDataCollectionEnabled:!1},e),o=i.name;if(typeof o!="string"||!o)throw Bs.create("bad-app-name",{appName:String(o)});if(t||(t=y0()),!t)throw Bs.create("no-options");const u=Lu.get(o);if(u){if(Mu(t,u.options)&&Mu(i,u.config))return u;throw Bs.create("duplicate-app",{appName:o})}const d=new Ow(o);for(const g of fh.values())d.addComponent(g);const m=new RE(t,i,d);return Lu.set(o,m),m}function T0(s=hh){const e=Lu.get(s);if(!e&&s===hh&&y0())return E0();if(!e)throw Bs.create("no-app",{appName:s});return e}function zs(s,e,t){var i;let o=(i=IE[s])!==null&&i!==void 0?i:s;t&&(o+=`-${t}`);const u=o.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const m=[`Unable to register library "${o}" with version "${e}":`];u&&m.push(`library name "${o}" contains illegal characters (whitespace or "/")`),u&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ts.warn(m.join(" "));return}Io(new Ii(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}const CE="firebase-heartbeat-database",PE=1,Va="firebase-heartbeat-store";let Zd=null;function x0(){return Zd||(Zd=Kw(CE,PE,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Va)}catch(t){console.warn(t)}}}}).catch(s=>{throw Bs.create("idb-open",{originalErrorMessage:s.message})})),Zd}async function bE(s){try{const t=(await x0()).transaction(Va),i=await t.objectStore(Va).get(k0(s));return await t.done,i}catch(e){if(e instanceof is)ts.warn(e.message);else{const t=Bs.create("idb-get",{originalErrorMessage:e?.message});ts.warn(t.message)}}}async function tg(s,e){try{const i=(await x0()).transaction(Va,"readwrite");await i.objectStore(Va).put(e,k0(s)),await i.done}catch(t){if(t instanceof is)ts.warn(t.message);else{const i=Bs.create("idb-set",{originalErrorMessage:t?.message});ts.warn(i.message)}}}function k0(s){return`${s.name}!${s.options.appId}`}const NE=1024,DE=720*60*60*1e3;class OE{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ME(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=ng();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(d=>d.date===u)?void 0:(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=DE}),this._storage.overwrite(this._heartbeatsCache))}catch(i){ts.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ng(),{heartbeatsToSend:i,unsentEntries:o}=VE(this._heartbeatsCache.heartbeats),u=Vu(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(t){return ts.warn(t),""}}}function ng(){return new Date().toISOString().substring(0,10)}function VE(s,e=NE){const t=[];let i=s.slice();for(const o of s){const u=t.find(d=>d.agent===o.agent);if(u){if(u.dates.push(o.date),rg(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),rg(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class ME{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tw()?xw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await bE(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return tg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return tg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function rg(s){return Vu(JSON.stringify({version:2,heartbeats:s})).length}function LE(s){Io(new Ii("platform-logger",e=>new Yw(e),"PRIVATE")),Io(new Ii("heartbeat",e=>new OE(e),"PRIVATE")),zs(dh,Zm,s),zs(dh,Zm,"esm2017"),zs("fire-js","")}LE("");var jE="firebase",FE="10.14.1";zs(jE,FE,"app");function Fh(s,e){var t={};for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&e.indexOf(i)<0&&(t[i]=s[i]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(s);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(s,i[o])&&(t[i[o]]=s[i[o]]);return t}function I0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UE=I0,S0=new Wa("auth","Firebase",I0());const ju=new Mh("@firebase/auth");function BE(s,...e){ju.logLevel<=Fe.WARN&&ju.warn(`Auth (${Do}): ${s}`,...e)}function Iu(s,...e){ju.logLevel<=Fe.ERROR&&ju.error(`Auth (${Do}): ${s}`,...e)}function fr(s,...e){throw Uh(s,...e)}function Sr(s,...e){return Uh(s,...e)}function A0(s,e,t){const i=Object.assign(Object.assign({},UE()),{[e]:t});return new Wa("auth","Firebase",i).create(e,{appName:s.name})}function Zr(s){return A0(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uh(s,...e){if(typeof s!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=s.name),s._errorFactory.create(t,...i)}return S0.create(s,...e)}function Te(s,e,...t){if(!s)throw Uh(e,...t)}function Yr(s){const e="INTERNAL ASSERTION FAILED: "+s;throw Iu(e),new Error(e)}function ns(s,e){s||Yr(e)}function ph(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function zE(){return sg()==="http:"||sg()==="https:"}function sg(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}function $E(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zE()||vw()||"connection"in navigator)?navigator.onLine:!0}function HE(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}class Ka{constructor(e,t){this.shortDelay=e,this.longDelay=t,ns(t>e,"Short delay should be less than long delay!"),this.isMobile=mw()||_w()}get(){return $E()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Bh(s,e){ns(s.emulator,"Emulator should always be set here");const{url:t}=s.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}class R0{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const WE={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const qE=new Ka(3e4,6e4);function os(s,e){return s.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:s.tenantId}):e}async function as(s,e,t,i,o={}){return C0(s,o,async()=>{let u={},d={};i&&(e==="GET"?d=i:u={body:JSON.stringify(i)});const m=qa(Object.assign({key:s.config.apiKey},d)).slice(1),g=await s._getAdditionalHeaders();g["Content-Type"]="application/json",s.languageCode&&(g["X-Firebase-Locale"]=s.languageCode);const w=Object.assign({method:e,headers:g},u);return yw()||(w.referrerPolicy="no-referrer"),R0.fetch()(P0(s,s.config.apiHost,t,m),w)})}async function C0(s,e,t){s._canInitEmulator=!1;const i=Object.assign(Object.assign({},WE),e);try{const o=new GE(s),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await u.json();if("needConfirmation"in d)throw vu(s,"account-exists-with-different-credential",d);if(u.ok&&!("errorMessage"in d))return d;{const m=u.ok?d.errorMessage:d.error.message,[g,w]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw vu(s,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw vu(s,"email-already-in-use",d);if(g==="USER_DISABLED")throw vu(s,"user-disabled",d);const T=i[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw A0(s,T,w);fr(s,T)}}catch(o){if(o instanceof is)throw o;fr(s,"network-request-failed",{message:String(o)})}}async function Ga(s,e,t,i,o={}){const u=await as(s,e,t,i,o);return"mfaPendingCredential"in u&&fr(s,"multi-factor-auth-required",{_serverResponse:u}),u}function P0(s,e,t,i){const o=`${e}${t}?${i}`;return s.config.emulator?Bh(s.config,o):`${s.config.apiScheme}://${o}`}function KE(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class GE{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Sr(this.auth,"network-request-failed")),qE.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function vu(s,e,t){const i={appName:s.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=Sr(s,e,i);return o.customData._tokenResponse=t,o}function ig(s){return s!==void 0&&s.enterprise!==void 0}class QE{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return KE(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function YE(s,e){return as(s,"GET","/v2/recaptchaConfig",os(s,e))}async function XE(s,e){return as(s,"POST","/v1/accounts:delete",e)}async function b0(s,e){return as(s,"POST","/v1/accounts:lookup",e)}function Ca(s){if(s)try{const e=new Date(Number(s));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function JE(s,e=!1){const t=Qt(s),i=await t.getIdToken(e),o=zh(i);Te(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,d=u?.sign_in_provider;return{claims:o,token:i,authTime:Ca(eh(o.auth_time)),issuedAtTime:Ca(eh(o.iat)),expirationTime:Ca(eh(o.exp)),signInProvider:d||null,signInSecondFactor:u?.sign_in_second_factor||null}}function eh(s){return Number(s)*1e3}function zh(s){const[e,t,i]=s.split(".");if(e===void 0||t===void 0||i===void 0)return Iu("JWT malformed, contained fewer than 3 sections"),null;try{const o=m0(t);return o?JSON.parse(o):(Iu("Failed to decode base64 JWT payload"),null)}catch(o){return Iu("Caught error parsing JWT payload as JSON",o?.toString()),null}}function og(s){const e=zh(s);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ma(s,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof is&&ZE(i)&&s.auth.currentUser===s&&await s.auth.signOut(),i}}function ZE({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}class eT{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class mh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ca(this.lastLoginAt),this.creationTime=Ca(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Fu(s){var e;const t=s.auth,i=await s.getIdToken(),o=await Ma(s,b0(t,{idToken:i}));Te(o?.users.length,t,"internal-error");const u=o.users[0];s._notifyReloadListener(u);const d=!((e=u.providerUserInfo)===null||e===void 0)&&e.length?N0(u.providerUserInfo):[],m=nT(s.providerData,d),g=s.isAnonymous,w=!(s.email&&u.passwordHash)&&!m?.length,T=g?w:!1,P={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:m,metadata:new mh(u.createdAt,u.lastLoginAt),isAnonymous:T};Object.assign(s,P)}async function tT(s){const e=Qt(s);await Fu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function nT(s,e){return[...s.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function N0(s){return s.map(e=>{var{providerId:t}=e,i=Fh(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}async function rT(s,e){const t=await C0(s,{},async()=>{const i=qa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=s.config,d=P0(s,o,"/v1/token",`key=${u}`),m=await s._getAdditionalHeaders();return m["Content-Type"]="application/x-www-form-urlencoded",R0.fetch()(d,{method:"POST",headers:m,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sT(s,e){return as(s,"POST","/v2/accounts:revokeToken",os(s,e))}class Eo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):og(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const t=og(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:u}=await rT(e,t);this.updateTokensAndExpiration(i,o,Number(u))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:u}=t,d=new Eo;return i&&(Te(typeof i=="string","internal-error",{appName:e}),d.refreshToken=i),o&&(Te(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),d.expirationTime=u),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Eo,this.toJSON())}_performRefresh(){return Yr("not implemented")}}function Ds(s,e){Te(typeof s=="string"||typeof s>"u","internal-error",{appName:e})}class Xr{constructor(e){var{uid:t,auth:i,stsTokenManager:o}=e,u=Fh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new eT(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new mh(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(e){const t=await Ma(this,this.stsTokenManager.getToken(this.auth,e));return Te(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return JE(this,e)}reload(){return tT(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Xr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Fu(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ir(this.auth.app))return Promise.reject(Zr(this.auth));const e=await this.getIdToken();return await Ma(this,XE(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,o,u,d,m,g,w,T;const P=(i=t.displayName)!==null&&i!==void 0?i:void 0,O=(o=t.email)!==null&&o!==void 0?o:void 0,H=(u=t.phoneNumber)!==null&&u!==void 0?u:void 0,Y=(d=t.photoURL)!==null&&d!==void 0?d:void 0,X=(m=t.tenantId)!==null&&m!==void 0?m:void 0,$=(g=t._redirectEventId)!==null&&g!==void 0?g:void 0,Ee=(w=t.createdAt)!==null&&w!==void 0?w:void 0,me=(T=t.lastLoginAt)!==null&&T!==void 0?T:void 0,{uid:xe,emailVerified:ke,isAnonymous:Je,providerData:Ae,stsTokenManager:b}=t;Te(xe&&b,e,"internal-error");const x=Eo.fromJSON(this.name,b);Te(typeof xe=="string",e,"internal-error"),Ds(P,e.name),Ds(O,e.name),Te(typeof ke=="boolean",e,"internal-error"),Te(typeof Je=="boolean",e,"internal-error"),Ds(H,e.name),Ds(Y,e.name),Ds(X,e.name),Ds($,e.name),Ds(Ee,e.name),Ds(me,e.name);const S=new Xr({uid:xe,auth:e,email:O,emailVerified:ke,displayName:P,isAnonymous:Je,photoURL:Y,phoneNumber:H,tenantId:X,stsTokenManager:x,createdAt:Ee,lastLoginAt:me});return Ae&&Array.isArray(Ae)&&(S.providerData=Ae.map(R=>Object.assign({},R))),$&&(S._redirectEventId=$),S}static async _fromIdTokenResponse(e,t,i=!1){const o=new Eo;o.updateFromServerResponse(t);const u=new Xr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await Fu(u),u}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?N0(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!u?.length,m=new Eo;m.updateFromIdToken(i);const g=new Xr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new mh(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,w),g}}const ag=new Map;function Jr(s){ns(s instanceof Function,"Expected a class definition");let e=ag.get(s);return e?(ns(e instanceof s,"Instance stored in cache mismatched with class"),e):(e=new s,ag.set(s,e),e)}class D0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}D0.type="NONE";const lg=D0;function Su(s,e,t){return`firebase:${s}:${e}:${t}`}class To{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:u}=this.auth;this.fullUserKey=Su(this.userKey,o.apiKey,u),this.fullPersistenceKey=Su("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new To(Jr(lg),e,i);const o=(await Promise.all(t.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let u=o[0]||Jr(lg);const d=Su(i,e.config.apiKey,e.name);let m=null;for(const w of t)try{const T=await w._get(d);if(T){const P=Xr._fromJSON(e,T);w!==u&&(m=P),u=w;break}}catch{}const g=o.filter(w=>w._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new To(u,e,i):(u=g[0],m&&await u._set(d,m.toJSON()),await Promise.all(t.map(async w=>{if(w!==u)try{await w._remove(d)}catch{}})),new To(u,e,i))}}function ug(s){const e=s.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(L0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(O0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(F0(e))return"Blackberry";if(U0(e))return"Webos";if(V0(e))return"Safari";if((e.includes("chrome/")||M0(e))&&!e.includes("edge/"))return"Chrome";if(j0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=s.match(t);if(i?.length===2)return i[1]}return"Other"}function O0(s=an()){return/firefox\//i.test(s)}function V0(s=an()){const e=s.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function M0(s=an()){return/crios\//i.test(s)}function L0(s=an()){return/iemobile/i.test(s)}function j0(s=an()){return/android/i.test(s)}function F0(s=an()){return/blackberry/i.test(s)}function U0(s=an()){return/webos/i.test(s)}function $h(s=an()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function iT(s=an()){var e;return $h(s)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oT(){return ww()&&document.documentMode===10}function B0(s=an()){return $h(s)||j0(s)||U0(s)||F0(s)||/windows phone/i.test(s)||L0(s)}function z0(s,e=[]){let t;switch(s){case"Browser":t=ug(an());break;case"Worker":t=`${ug(an())}-${s}`;break;default:t=s}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Do}/${i}`}class aT{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=u=>new Promise((d,m)=>{try{const g=e(u);d(g)}catch(g){m(g)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}async function lT(s,e={}){return as(s,"GET","/v2/passwordPolicy",os(s,e))}const uT=6;class cT{constructor(e){var t,i,o,u;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=d.minPasswordLength)!==null&&t!==void 0?t:uT,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(u=e.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,o,u,d,m;const g={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,g),this.validatePasswordCharacterOptions(e,g),g.isValid&&(g.isValid=(t=g.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),g.isValid&&(g.isValid=(i=g.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),g.isValid&&(g.isValid=(o=g.containsLowercaseLetter)!==null&&o!==void 0?o:!0),g.isValid&&(g.isValid=(u=g.containsUppercaseLetter)!==null&&u!==void 0?u:!0),g.isValid&&(g.isValid=(d=g.containsNumericCharacter)!==null&&d!==void 0?d:!0),g.isValid&&(g.isValid=(m=g.containsNonAlphanumericCharacter)!==null&&m!==void 0?m:!0),g}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class dT{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cg(this),this.idTokenSubscription=new cg(this),this.beforeStateQueue=new aT(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Jr(t)),this._initializationPromise=this.queue(async()=>{var i,o;if(!this._deleted&&(this.persistenceManager=await To.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await b0(this,{idToken:e}),i=await Xr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ir(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(m=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(m,m))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,u=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,m=o?._redirectEventId,g=await this.tryRedirectSignIn(e);(!d||d===m)&&g?.user&&(o=g.user,u=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Fu(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HE()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ir(this.app))return Promise.reject(Zr(this));const t=e?Qt(e):null;return t&&Te(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ir(this.app)?Promise.reject(Zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ir(this.app)?Promise.reject(Zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await lT(this),t=new cT(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await sT(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Jr(e)||this._popupRedirectResolver;Te(t,this,"argument-error"),this.redirectPersistenceManager=await To.create(this,[Jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(m,this,"internal-error"),m.then(()=>{d||u(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,i,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=z0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&BE(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Ks(s){return Qt(s)}class cg{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rw(t=>this.observer=t)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function hT(s){Zu=s}function $0(s){return Zu.loadJS(s)}function fT(){return Zu.recaptchaEnterpriseScript}function pT(){return Zu.gapiScript}function mT(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const gT="recaptcha-enterprise",yT="NO_RECAPTCHA";class vT{constructor(e){this.type=gT,this.auth=Ks(e)}async verify(e="verify",t=!1){async function i(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(d,m)=>{YE(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const w=new QE(g);return u.tenantId==null?u._agentRecaptchaConfig=w:u._tenantRecaptchaConfigs[u.tenantId]=w,d(w.siteKey)}}).catch(g=>{m(g)})})}function o(u,d,m){const g=window.grecaptcha;ig(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(w=>{d(w)}).catch(()=>{d(yT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((u,d)=>{i(this.auth).then(m=>{if(!t&&ig(window.grecaptcha))o(m,u,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=fT();g.length!==0&&(g+=m),$0(g).then(()=>{o(m,u,d)}).catch(w=>{d(w)})}}).catch(m=>{d(m)})})}}async function dg(s,e,t,i=!1){const o=new vT(s);let u;try{u=await o.verify(t)}catch{u=await o.verify(t,!0)}const d=Object.assign({},e);return i?Object.assign(d,{captchaResp:u}):Object.assign(d,{captchaResponse:u}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Uu(s,e,t,i){var o;if(!((o=s._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await dg(s,e,t,t==="getOobCode");return i(s,u)}else return i(s,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await dg(s,e,t,t==="getOobCode");return i(s,d)}else return Promise.reject(u)})}function _T(s,e){const t=jh(s,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(Mu(u,e??{}))return o;fr(o,"already-initialized")}return t.initialize({options:e})}function wT(s,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Jr);e?.errorMap&&s._updateErrorMap(e.errorMap),s._initializeWithPersistence(i,e?.popupRedirectResolver)}function ET(s,e,t){const i=Ks(s);Te(i._canInitEmulator,i,"emulator-config-failed"),Te(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,u=H0(e),{host:d,port:m}=TT(e),g=m===null?"":`:${m}`;i.config.emulator={url:`${u}//${d}${g}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:d,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})}),xT()}function H0(s){const e=s.indexOf(":");return e<0?"":s.substr(0,e+1)}function TT(s){const e=H0(s),t=/(\/\/)?([^?#/]+)/.exec(s.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const u=o[1];return{host:u,port:hg(i.substr(u.length+1))}}else{const[u,d]=i.split(":");return{host:u,port:hg(d)}}}function hg(s){if(!s)return null;const e=Number(s);return isNaN(e)?null:e}function xT(){function s(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}class Hh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Yr("not implemented")}_getIdTokenResponse(e){return Yr("not implemented")}_linkToIdToken(e,t){return Yr("not implemented")}_getReauthenticationResolver(e){return Yr("not implemented")}}async function kT(s,e){return as(s,"POST","/v1/accounts:signUp",e)}async function IT(s,e){return Ga(s,"POST","/v1/accounts:signInWithPassword",os(s,e))}async function ST(s,e){return as(s,"POST","/v1/accounts:sendOobCode",os(s,e))}async function AT(s,e){return ST(s,e)}async function RT(s,e){return Ga(s,"POST","/v1/accounts:signInWithEmailLink",os(s,e))}async function CT(s,e){return Ga(s,"POST","/v1/accounts:signInWithEmailLink",os(s,e))}class La extends Hh{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new La(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new La(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uu(e,t,"signInWithPassword",IT);case"emailLink":return RT(e,{email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uu(e,i,"signUpPassword",kT);case"emailLink":return CT(e,{idToken:t,email:this._email,oobCode:this._password});default:fr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xo(s,e){return Ga(s,"POST","/v1/accounts:signInWithIdp",os(s,e))}const PT="http://localhost";class Si extends Hh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Si(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):fr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o}=t,u=Fh(t,["providerId","signInMethod"]);if(!i||!o)return null;const d=new Si(i,o);return d.idToken=u.idToken||void 0,d.accessToken=u.accessToken||void 0,d.secret=u.secret,d.nonce=u.nonce,d.pendingToken=u.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return xo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,xo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,xo(e,t)}buildRequest(){const e={requestUri:PT,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qa(t)}return e}}function bT(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function NT(s){const e=xa(ka(s)).link,t=e?xa(ka(e)).deep_link_id:null,i=xa(ka(s)).deep_link_id;return(i?xa(ka(i)).link:null)||i||t||e||s}class Wh{constructor(e){var t,i,o,u,d,m;const g=xa(ka(e)),w=(t=g.apiKey)!==null&&t!==void 0?t:null,T=(i=g.oobCode)!==null&&i!==void 0?i:null,P=bT((o=g.mode)!==null&&o!==void 0?o:null);Te(w&&T&&P,"argument-error"),this.apiKey=w,this.operation=P,this.code=T,this.continueUrl=(u=g.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(d=g.languageCode)!==null&&d!==void 0?d:null,this.tenantId=(m=g.tenantId)!==null&&m!==void 0?m:null}static parseLink(e){const t=NT(e);try{return new Wh(t)}catch{return null}}}class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return La._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Wh.parseLink(t);return Te(i,"argument-error"),La._fromEmailAndCode(e,i.code,i.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class W0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Qa extends W0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Vs extends Qa{constructor(){super("facebook.com")}static credential(e){return Si._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Vs.PROVIDER_ID="facebook.com";class Ms extends Qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Si._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ms.credential(t,i)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";class Ls extends Qa{constructor(){super("github.com")}static credential(e){return Si._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.GITHUB_SIGN_IN_METHOD="github.com";Ls.PROVIDER_ID="github.com";class js extends Qa{constructor(){super("twitter.com")}static credential(e,t){return Si._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return js.credential(t,i)}catch{return null}}}js.TWITTER_SIGN_IN_METHOD="twitter.com";js.PROVIDER_ID="twitter.com";async function DT(s,e){return Ga(s,"POST","/v1/accounts:signUp",os(s,e))}class Ai{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const u=await Xr._fromIdTokenResponse(e,i,o),d=fg(i);return new Ai({user:u,providerId:d,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=fg(i);return new Ai({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function fg(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}class Bu extends is{constructor(e,t,i,o){var u;super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,Bu.prototype),this.customData={appName:e.name,tenantId:(u=e.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new Bu(e,t,i,o)}}function q0(s,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(s):t._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Bu._fromErrorAndOperation(s,u,e,i):u})}async function OT(s,e,t=!1){const i=await Ma(s,e._linkToIdToken(s.auth,await s.getIdToken()),t);return Ai._forOperation(s,"link",i)}async function VT(s,e,t=!1){const{auth:i}=s;if(Ir(i.app))return Promise.reject(Zr(i));const o="reauthenticate";try{const u=await Ma(s,q0(i,o,e,s),t);Te(u.idToken,i,"internal-error");const d=zh(u.idToken);Te(d,i,"internal-error");const{sub:m}=d;return Te(s.uid===m,i,"user-mismatch"),Ai._forOperation(s,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&fr(i,"user-mismatch"),u}}async function K0(s,e,t=!1){if(Ir(s.app))return Promise.reject(Zr(s));const i="signIn",o=await q0(s,i,e),u=await Ai._fromIdTokenResponse(s,i,o);return t||await s._updateCurrentUser(u.user),u}async function MT(s,e){return K0(Ks(s),e)}async function G0(s){const e=Ks(s);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LT(s,e,t){const i=Ks(s);await Uu(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",AT)}async function jT(s,e,t){if(Ir(s.app))return Promise.reject(Zr(s));const i=Ks(s),d=await Uu(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",DT).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&G0(s),g}),m=await Ai._fromIdTokenResponse(i,"signIn",d);return await i._updateCurrentUser(m.user),m}function FT(s,e,t){return Ir(s.app)?Promise.reject(Zr(s)):MT(Qt(s),Oo.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&G0(s),i})}function UT(s,e,t,i){return Qt(s).onIdTokenChanged(e,t,i)}function BT(s,e,t){return Qt(s).beforeAuthStateChanged(e,t)}function zT(s,e,t,i){return Qt(s).onAuthStateChanged(e,t,i)}function $T(s){return Qt(s).signOut()}const zu="__sak";class Q0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zu,"1"),this.storage.removeItem(zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const HT=1e3,WT=10;class Y0 extends Q0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=B0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(i);!t&&this.localCache[i]===d||this.notifyListeners(i,d)},u=this.storage.getItem(i);oT()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,WT):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},HT)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Y0.type="LOCAL";const qT=Y0;class X0 extends Q0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}X0.type="SESSION";const J0=X0;function KT(s){return Promise.all(s.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}class ec{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new ec(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:u}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const m=Array.from(d).map(async w=>w(t.origin,u)),g=await KT(m);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ec.receivers=[];function qh(s="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return s+t}class GT{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,d;return new Promise((m,g)=>{const w=qh("",20);o.port1.start();const T=setTimeout(()=>{g(new Error("unsupported_event"))},i);d={messageChannel:o,onMessage(P){const O=P;if(O.data.eventId===w)switch(O.data.status){case"ack":clearTimeout(T),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(O.data.response);break;default:clearTimeout(T),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:w,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Ar(){return window}function QT(s){Ar().location.href=s}function Z0(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function YT(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XT(){var s;return((s=navigator?.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function JT(){return Z0()?self:null}const ey="firebaseLocalStorageDb",ZT=1,$u="firebaseLocalStorage",ty="fbase_key";class Ya{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tc(s,e){return s.transaction([$u],e?"readwrite":"readonly").objectStore($u)}function ex(){const s=indexedDB.deleteDatabase(ey);return new Ya(s).toPromise()}function gh(){const s=indexedDB.open(ey,ZT);return new Promise((e,t)=>{s.addEventListener("error",()=>{t(s.error)}),s.addEventListener("upgradeneeded",()=>{const i=s.result;try{i.createObjectStore($u,{keyPath:ty})}catch(o){t(o)}}),s.addEventListener("success",async()=>{const i=s.result;i.objectStoreNames.contains($u)?e(i):(i.close(),await ex(),e(await gh()))})})}async function pg(s,e,t){const i=tc(s,!0).put({[ty]:e,value:t});return new Ya(i).toPromise()}async function tx(s,e){const t=tc(s,!1).get(e),i=await new Ya(t).toPromise();return i===void 0?null:i.value}function mg(s,e){const t=tc(s,!0).delete(e);return new Ya(t).toPromise()}const nx=800,rx=3;class ny{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gh(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>rx)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Z0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ec._getInstance(JT()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await YT(),!this.activeServiceWorker)return;this.sender=new GT(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XT()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gh();return await pg(e,zu,"1"),await mg(e,zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>pg(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>tx(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>mg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=tc(o,!1).getAll();return new Ya(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ny.type="LOCAL";const sx=ny;new Ka(3e4,6e4);function ix(s,e){return e?Jr(e):(Te(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}class Kh extends Hh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ox(s){return K0(s.auth,new Kh(s),s.bypassAuthState)}function ax(s){const{auth:e,user:t}=s;return Te(t,e,"internal-error"),VT(t,new Kh(s),s.bypassAuthState)}async function lx(s){const{auth:e,user:t}=s;return Te(t,e,"internal-error"),OT(t,new Kh(s),s.bypassAuthState)}class ry{constructor(e,t,i,o,u=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:u,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:i,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ox;case"linkViaPopup":case"linkViaRedirect":return lx;case"reauthViaPopup":case"reauthViaRedirect":return ax;default:fr(this.auth,"internal-error")}}resolve(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ns(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ux=new Ka(2e3,1e4);class wo extends ry{constructor(e,t,i,o,u){super(e,t,o,u),this.provider=i,this.authWindow=null,this.pollId=null,wo.currentPopupAction&&wo.currentPopupAction.cancel(),wo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){ns(this.filter.length===1,"Popup operations only handle one event");const e=qh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ux.get())};e()}}wo.currentPopupAction=null;const cx="pendingRedirect",Au=new Map;class dx extends ry{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Au.get(this.auth._key());if(!e){try{const i=await hx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Au.set(this.auth._key(),e)}return this.bypassAuthState||Au.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hx(s,e){const t=mx(e),i=px(s);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function fx(s,e){Au.set(s._key(),e)}function px(s){return Jr(s._redirectPersistence)}function mx(s){return Su(cx,s.config.apiKey,s.name)}async function gx(s,e,t=!1){if(Ir(s.app))return Promise.reject(Zr(s));const i=Ks(s),o=ix(i,e),d=await new dx(i,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await i._persistUserIfCurrent(d.user),await i._setRedirectUser(null,e)),d}const yx=600*1e3;class vx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_x(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!sy(e)){const o=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Sr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yx&&this.cachedEventUids.clear(),this.cachedEventUids.has(gg(e))}saveEventToCache(e){this.cachedEventUids.add(gg(e)),this.lastProcessedEventTime=Date.now()}}function gg(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(e=>e).join("-")}function sy({type:s,error:e}){return s==="unknown"&&e?.code==="auth/no-auth-event"}function _x(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sy(s);default:return!1}}async function wx(s,e={}){return as(s,"GET","/v1/projects",e)}const Ex=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Tx=/^https?/;async function xx(s){if(s.config.emulator)return;const{authorizedDomains:e}=await wx(s);for(const t of e)try{if(kx(t))return}catch{}fr(s,"unauthorized-domain")}function kx(s){const e=ph(),{protocol:t,hostname:i}=new URL(e);if(s.startsWith("chrome-extension://")){const d=new URL(s);return d.hostname===""&&i===""?t==="chrome-extension:"&&s.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===i}if(!Tx.test(t))return!1;if(Ex.test(s))return i===s;const o=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}const Ix=new Ka(3e4,6e4);function yg(){const s=Ar().___jsl;if(s?.H){for(const e of Object.keys(s.H))if(s.H[e].r=s.H[e].r||[],s.H[e].L=s.H[e].L||[],s.H[e].r=[...s.H[e].L],s.CP)for(let t=0;t<s.CP.length;t++)s.CP[t]=null}}function Sx(s){return new Promise((e,t)=>{var i,o,u;function d(){yg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yg(),t(Sr(s,"network-request-failed"))},timeout:Ix.get()})}if(!((o=(i=Ar().gapi)===null||i===void 0?void 0:i.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((u=Ar().gapi)===null||u===void 0)&&u.load)d();else{const m=mT("iframefcb");return Ar()[m]=()=>{gapi.load?d():t(Sr(s,"network-request-failed"))},$0(`${pT()}?onload=${m}`).catch(g=>t(g))}}).catch(e=>{throw Ru=null,e})}let Ru=null;function Ax(s){return Ru=Ru||Sx(s),Ru}const Rx=new Ka(5e3,15e3),Cx="__/auth/iframe",Px="emulator/auth/iframe",bx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Nx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dx(s){const e=s.config;Te(e.authDomain,s,"auth-domain-config-required");const t=e.emulator?Bh(e,Px):`https://${s.config.authDomain}/${Cx}`,i={apiKey:e.apiKey,appName:s.name,v:Do},o=Nx.get(s.config.apiHost);o&&(i.eid=o);const u=s._getFrameworks();return u.length&&(i.fw=u.join(",")),`${t}?${qa(i).slice(1)}`}async function Ox(s){const e=await Ax(s),t=Ar().gapi;return Te(t,s,"internal-error"),e.open({where:document.body,url:Dx(s),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bx,dontclear:!0},i=>new Promise(async(o,u)=>{await i.restyle({setHideOnLeave:!1});const d=Sr(s,"network-request-failed"),m=Ar().setTimeout(()=>{u(d)},Rx.get());function g(){Ar().clearTimeout(m),o(i)}i.ping(g).then(g,()=>{u(d)})}))}const Vx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mx=500,Lx=600,jx="_blank",Fx="http://localhost";class vg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ux(s,e,t,i=Mx,o=Lx){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-i)/2,0).toString();let m="";const g=Object.assign(Object.assign({},Vx),{width:i.toString(),height:o.toString(),top:u,left:d}),w=an().toLowerCase();t&&(m=M0(w)?jx:t),O0(w)&&(e=e||Fx,g.scrollbars="yes");const T=Object.entries(g).reduce((O,[H,Y])=>`${O}${H}=${Y},`,"");if(iT(w)&&m!=="_self")return Bx(e||"",m),new vg(null);const P=window.open(e||"",m,T);Te(P,s,"popup-blocked");try{P.focus()}catch{}return new vg(P)}function Bx(s,e){const t=document.createElement("a");t.href=s,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}const zx="__/auth/handler",$x="emulator/auth/handler",Hx=encodeURIComponent("fac");async function _g(s,e,t,i,o,u){Te(s.config.authDomain,s,"auth-domain-config-required"),Te(s.config.apiKey,s,"invalid-api-key");const d={apiKey:s.config.apiKey,appName:s.name,authType:t,redirectUrl:i,v:Do,eventId:o};if(e instanceof W0){e.setDefaultLanguage(s.languageCode),d.providerId=e.providerId||"",Aw(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,P]of Object.entries({}))d[T]=P}if(e instanceof Qa){const T=e.getScopes().filter(P=>P!=="");T.length>0&&(d.scopes=T.join(","))}s.tenantId&&(d.tid=s.tenantId);const m=d;for(const T of Object.keys(m))m[T]===void 0&&delete m[T];const g=await s._getAppCheckToken(),w=g?`#${Hx}=${encodeURIComponent(g)}`:"";return`${Wx(s)}?${qa(m).slice(1)}${w}`}function Wx({config:s}){return s.emulator?Bh(s,$x):`https://${s.authDomain}/${zx}`}const th="webStorageSupport";class qx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=J0,this._completeRedirectFn=gx,this._overrideRedirectResult=fx}async _openPopup(e,t,i,o){var u;ns((u=this.eventManagers[e._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const d=await _g(e,t,i,ph(),o);return Ux(e,d,qh())}async _openRedirect(e,t,i,o){await this._originValidation(e);const u=await _g(e,t,i,ph(),o);return QT(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(ns(u,"If manager is not set, promise should be"),u)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Ox(e),i=new vx(e);return t.register("authEvent",o=>(Te(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(th,{type:th},o=>{var u;const d=(u=o?.[0])===null||u===void 0?void 0:u[th];d!==void 0&&t(!!d),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return B0()||V0()||$h()}}const Kx=qx;var wg="@firebase/auth",Eg="1.7.9";class Gx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qx(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yx(s){Io(new Ii("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=i.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:i.name});const g={apiKey:d,authDomain:m,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:z0(s)},w=new dT(i,o,u,g);return wT(w,t),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Io(new Ii("auth-internal",e=>{const t=Ks(e.getProvider("auth").getImmediate());return(i=>new Gx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(wg,Eg,Qx(s)),zs(wg,Eg,"esm2017")}const Xx=300,Jx=v0("authIdTokenMaxAge")||Xx;let Tg=null;const Zx=s=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Jx)return;const o=t?.token;Tg!==o&&(Tg=o,await fetch(s,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ek(s=T0()){const e=jh(s,"auth");if(e.isInitialized())return e.getImmediate();const t=_T(s,{popupRedirectResolver:Kx,persistence:[sx,qT,J0]}),i=v0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(i,location.origin);if(location.origin===u.origin){const d=Zx(u.toString());BT(t,d,()=>d(t.currentUser)),UT(t,m=>d(m))}}const o=g0("auth");return o&&ET(t,`http://${o}`),t}function tk(){var s,e;return(e=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&e!==void 0?e:document}hT({loadJS(s){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",s),i.onload=e,i.onerror=o=>{const u=Sr("internal-error");u.customData=o,t(u)},i.type="text/javascript",i.charset="UTF-8",tk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yx("Browser");var xg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var ki,iy;(function(){var s;function e(b,x){function S(){}S.prototype=x.prototype,b.D=x.prototype,b.prototype=new S,b.prototype.constructor=b,b.C=function(R,D,M){for(var I=Array(arguments.length-2),ft=2;ft<arguments.length;ft++)I[ft-2]=arguments[ft];return x.prototype[D].apply(R,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(b,x,S){S||(S=0);var R=Array(16);if(typeof x=="string")for(var D=0;16>D;++D)R[D]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(D=0;16>D;++D)R[D]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=b.g[0],S=b.g[1],D=b.g[2];var M=b.g[3],I=x+(M^S&(D^M))+R[0]+3614090360&4294967295;x=S+(I<<7&4294967295|I>>>25),I=M+(D^x&(S^D))+R[1]+3905402710&4294967295,M=x+(I<<12&4294967295|I>>>20),I=D+(S^M&(x^S))+R[2]+606105819&4294967295,D=M+(I<<17&4294967295|I>>>15),I=S+(x^D&(M^x))+R[3]+3250441966&4294967295,S=D+(I<<22&4294967295|I>>>10),I=x+(M^S&(D^M))+R[4]+4118548399&4294967295,x=S+(I<<7&4294967295|I>>>25),I=M+(D^x&(S^D))+R[5]+1200080426&4294967295,M=x+(I<<12&4294967295|I>>>20),I=D+(S^M&(x^S))+R[6]+2821735955&4294967295,D=M+(I<<17&4294967295|I>>>15),I=S+(x^D&(M^x))+R[7]+4249261313&4294967295,S=D+(I<<22&4294967295|I>>>10),I=x+(M^S&(D^M))+R[8]+1770035416&4294967295,x=S+(I<<7&4294967295|I>>>25),I=M+(D^x&(S^D))+R[9]+2336552879&4294967295,M=x+(I<<12&4294967295|I>>>20),I=D+(S^M&(x^S))+R[10]+4294925233&4294967295,D=M+(I<<17&4294967295|I>>>15),I=S+(x^D&(M^x))+R[11]+2304563134&4294967295,S=D+(I<<22&4294967295|I>>>10),I=x+(M^S&(D^M))+R[12]+1804603682&4294967295,x=S+(I<<7&4294967295|I>>>25),I=M+(D^x&(S^D))+R[13]+4254626195&4294967295,M=x+(I<<12&4294967295|I>>>20),I=D+(S^M&(x^S))+R[14]+2792965006&4294967295,D=M+(I<<17&4294967295|I>>>15),I=S+(x^D&(M^x))+R[15]+1236535329&4294967295,S=D+(I<<22&4294967295|I>>>10),I=x+(D^M&(S^D))+R[1]+4129170786&4294967295,x=S+(I<<5&4294967295|I>>>27),I=M+(S^D&(x^S))+R[6]+3225465664&4294967295,M=x+(I<<9&4294967295|I>>>23),I=D+(x^S&(M^x))+R[11]+643717713&4294967295,D=M+(I<<14&4294967295|I>>>18),I=S+(M^x&(D^M))+R[0]+3921069994&4294967295,S=D+(I<<20&4294967295|I>>>12),I=x+(D^M&(S^D))+R[5]+3593408605&4294967295,x=S+(I<<5&4294967295|I>>>27),I=M+(S^D&(x^S))+R[10]+38016083&4294967295,M=x+(I<<9&4294967295|I>>>23),I=D+(x^S&(M^x))+R[15]+3634488961&4294967295,D=M+(I<<14&4294967295|I>>>18),I=S+(M^x&(D^M))+R[4]+3889429448&4294967295,S=D+(I<<20&4294967295|I>>>12),I=x+(D^M&(S^D))+R[9]+568446438&4294967295,x=S+(I<<5&4294967295|I>>>27),I=M+(S^D&(x^S))+R[14]+3275163606&4294967295,M=x+(I<<9&4294967295|I>>>23),I=D+(x^S&(M^x))+R[3]+4107603335&4294967295,D=M+(I<<14&4294967295|I>>>18),I=S+(M^x&(D^M))+R[8]+1163531501&4294967295,S=D+(I<<20&4294967295|I>>>12),I=x+(D^M&(S^D))+R[13]+2850285829&4294967295,x=S+(I<<5&4294967295|I>>>27),I=M+(S^D&(x^S))+R[2]+4243563512&4294967295,M=x+(I<<9&4294967295|I>>>23),I=D+(x^S&(M^x))+R[7]+1735328473&4294967295,D=M+(I<<14&4294967295|I>>>18),I=S+(M^x&(D^M))+R[12]+2368359562&4294967295,S=D+(I<<20&4294967295|I>>>12),I=x+(S^D^M)+R[5]+4294588738&4294967295,x=S+(I<<4&4294967295|I>>>28),I=M+(x^S^D)+R[8]+2272392833&4294967295,M=x+(I<<11&4294967295|I>>>21),I=D+(M^x^S)+R[11]+1839030562&4294967295,D=M+(I<<16&4294967295|I>>>16),I=S+(D^M^x)+R[14]+4259657740&4294967295,S=D+(I<<23&4294967295|I>>>9),I=x+(S^D^M)+R[1]+2763975236&4294967295,x=S+(I<<4&4294967295|I>>>28),I=M+(x^S^D)+R[4]+1272893353&4294967295,M=x+(I<<11&4294967295|I>>>21),I=D+(M^x^S)+R[7]+4139469664&4294967295,D=M+(I<<16&4294967295|I>>>16),I=S+(D^M^x)+R[10]+3200236656&4294967295,S=D+(I<<23&4294967295|I>>>9),I=x+(S^D^M)+R[13]+681279174&4294967295,x=S+(I<<4&4294967295|I>>>28),I=M+(x^S^D)+R[0]+3936430074&4294967295,M=x+(I<<11&4294967295|I>>>21),I=D+(M^x^S)+R[3]+3572445317&4294967295,D=M+(I<<16&4294967295|I>>>16),I=S+(D^M^x)+R[6]+76029189&4294967295,S=D+(I<<23&4294967295|I>>>9),I=x+(S^D^M)+R[9]+3654602809&4294967295,x=S+(I<<4&4294967295|I>>>28),I=M+(x^S^D)+R[12]+3873151461&4294967295,M=x+(I<<11&4294967295|I>>>21),I=D+(M^x^S)+R[15]+530742520&4294967295,D=M+(I<<16&4294967295|I>>>16),I=S+(D^M^x)+R[2]+3299628645&4294967295,S=D+(I<<23&4294967295|I>>>9),I=x+(D^(S|~M))+R[0]+4096336452&4294967295,x=S+(I<<6&4294967295|I>>>26),I=M+(S^(x|~D))+R[7]+1126891415&4294967295,M=x+(I<<10&4294967295|I>>>22),I=D+(x^(M|~S))+R[14]+2878612391&4294967295,D=M+(I<<15&4294967295|I>>>17),I=S+(M^(D|~x))+R[5]+4237533241&4294967295,S=D+(I<<21&4294967295|I>>>11),I=x+(D^(S|~M))+R[12]+1700485571&4294967295,x=S+(I<<6&4294967295|I>>>26),I=M+(S^(x|~D))+R[3]+2399980690&4294967295,M=x+(I<<10&4294967295|I>>>22),I=D+(x^(M|~S))+R[10]+4293915773&4294967295,D=M+(I<<15&4294967295|I>>>17),I=S+(M^(D|~x))+R[1]+2240044497&4294967295,S=D+(I<<21&4294967295|I>>>11),I=x+(D^(S|~M))+R[8]+1873313359&4294967295,x=S+(I<<6&4294967295|I>>>26),I=M+(S^(x|~D))+R[15]+4264355552&4294967295,M=x+(I<<10&4294967295|I>>>22),I=D+(x^(M|~S))+R[6]+2734768916&4294967295,D=M+(I<<15&4294967295|I>>>17),I=S+(M^(D|~x))+R[13]+1309151649&4294967295,S=D+(I<<21&4294967295|I>>>11),I=x+(D^(S|~M))+R[4]+4149444226&4294967295,x=S+(I<<6&4294967295|I>>>26),I=M+(S^(x|~D))+R[11]+3174756917&4294967295,M=x+(I<<10&4294967295|I>>>22),I=D+(x^(M|~S))+R[2]+718787259&4294967295,D=M+(I<<15&4294967295|I>>>17),I=S+(M^(D|~x))+R[9]+3951481745&4294967295,b.g[0]=b.g[0]+x&4294967295,b.g[1]=b.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+M&4294967295}i.prototype.u=function(b,x){x===void 0&&(x=b.length);for(var S=x-this.blockSize,R=this.B,D=this.h,M=0;M<x;){if(D==0)for(;M<=S;)o(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<x;)if(R[D++]=b.charCodeAt(M++),D==this.blockSize){o(this,R),D=0;break}}else for(;M<x;)if(R[D++]=b[M++],D==this.blockSize){o(this,R),D=0;break}}this.h=D,this.o+=x},i.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var x=1;x<b.length-8;++x)b[x]=0;var S=8*this.o;for(x=b.length-8;x<b.length;++x)b[x]=S&255,S/=256;for(this.u(b),b=Array(16),x=S=0;4>x;++x)for(var R=0;32>R;R+=8)b[S++]=this.g[x]>>>R&255;return b};function u(b,x){var S=m;return Object.prototype.hasOwnProperty.call(S,b)?S[b]:S[b]=x(b)}function d(b,x){this.h=x;for(var S=[],R=!0,D=b.length-1;0<=D;D--){var M=b[D]|0;R&&M==x||(S[D]=M,R=!1)}this.g=S}var m={};function g(b){return-128<=b&&128>b?u(b,function(x){return new d([x|0],0>x?-1:0)}):new d([b|0],0>b?-1:0)}function w(b){if(isNaN(b)||!isFinite(b))return P;if(0>b)return $(w(-b));for(var x=[],S=1,R=0;b>=S;R++)x[R]=b/S|0,S*=4294967296;return new d(x,0)}function T(b,x){if(b.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(b.charAt(0)=="-")return $(T(b.substring(1),x));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=w(Math.pow(x,8)),R=P,D=0;D<b.length;D+=8){var M=Math.min(8,b.length-D),I=parseInt(b.substring(D,D+M),x);8>M?(M=w(Math.pow(x,M)),R=R.j(M).add(w(I))):(R=R.j(S),R=R.add(w(I)))}return R}var P=g(0),O=g(1),H=g(16777216);s=d.prototype,s.m=function(){if(X(this))return-$(this).m();for(var b=0,x=1,S=0;S<this.g.length;S++){var R=this.i(S);b+=(0<=R?R:4294967296+R)*x,x*=4294967296}return b},s.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(Y(this))return"0";if(X(this))return"-"+$(this).toString(b);for(var x=w(Math.pow(b,6)),S=this,R="";;){var D=ke(S,x).g;S=Ee(S,D.j(x));var M=((0<S.g.length?S.g[0]:S.h)>>>0).toString(b);if(S=D,Y(S))return M+R;for(;6>M.length;)M="0"+M;R=M+R}},s.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function Y(b){if(b.h!=0)return!1;for(var x=0;x<b.g.length;x++)if(b.g[x]!=0)return!1;return!0}function X(b){return b.h==-1}s.l=function(b){return b=Ee(this,b),X(b)?-1:Y(b)?0:1};function $(b){for(var x=b.g.length,S=[],R=0;R<x;R++)S[R]=~b.g[R];return new d(S,~b.h).add(O)}s.abs=function(){return X(this)?$(this):this},s.add=function(b){for(var x=Math.max(this.g.length,b.g.length),S=[],R=0,D=0;D<=x;D++){var M=R+(this.i(D)&65535)+(b.i(D)&65535),I=(M>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);R=I>>>16,M&=65535,I&=65535,S[D]=I<<16|M}return new d(S,S[S.length-1]&-2147483648?-1:0)};function Ee(b,x){return b.add($(x))}s.j=function(b){if(Y(this)||Y(b))return P;if(X(this))return X(b)?$(this).j($(b)):$($(this).j(b));if(X(b))return $(this.j($(b)));if(0>this.l(H)&&0>b.l(H))return w(this.m()*b.m());for(var x=this.g.length+b.g.length,S=[],R=0;R<2*x;R++)S[R]=0;for(R=0;R<this.g.length;R++)for(var D=0;D<b.g.length;D++){var M=this.i(R)>>>16,I=this.i(R)&65535,ft=b.i(D)>>>16,vt=b.i(D)&65535;S[2*R+2*D]+=I*vt,me(S,2*R+2*D),S[2*R+2*D+1]+=M*vt,me(S,2*R+2*D+1),S[2*R+2*D+1]+=I*ft,me(S,2*R+2*D+1),S[2*R+2*D+2]+=M*ft,me(S,2*R+2*D+2)}for(R=0;R<x;R++)S[R]=S[2*R+1]<<16|S[2*R];for(R=x;R<2*x;R++)S[R]=0;return new d(S,0)};function me(b,x){for(;(b[x]&65535)!=b[x];)b[x+1]+=b[x]>>>16,b[x]&=65535,x++}function xe(b,x){this.g=b,this.h=x}function ke(b,x){if(Y(x))throw Error("division by zero");if(Y(b))return new xe(P,P);if(X(b))return x=ke($(b),x),new xe($(x.g),$(x.h));if(X(x))return x=ke(b,$(x)),new xe($(x.g),x.h);if(30<b.g.length){if(X(b)||X(x))throw Error("slowDivide_ only works with positive integers.");for(var S=O,R=x;0>=R.l(b);)S=Je(S),R=Je(R);var D=Ae(S,1),M=Ae(R,1);for(R=Ae(R,2),S=Ae(S,2);!Y(R);){var I=M.add(R);0>=I.l(b)&&(D=D.add(S),M=I),R=Ae(R,1),S=Ae(S,1)}return x=Ee(b,D.j(x)),new xe(D,x)}for(D=P;0<=b.l(x);){for(S=Math.max(1,Math.floor(b.m()/x.m())),R=Math.ceil(Math.log(S)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),M=w(S),I=M.j(x);X(I)||0<I.l(b);)S-=R,M=w(S),I=M.j(x);Y(M)&&(M=O),D=D.add(M),b=Ee(b,I)}return new xe(D,b)}s.A=function(b){return ke(this,b).h},s.and=function(b){for(var x=Math.max(this.g.length,b.g.length),S=[],R=0;R<x;R++)S[R]=this.i(R)&b.i(R);return new d(S,this.h&b.h)},s.or=function(b){for(var x=Math.max(this.g.length,b.g.length),S=[],R=0;R<x;R++)S[R]=this.i(R)|b.i(R);return new d(S,this.h|b.h)},s.xor=function(b){for(var x=Math.max(this.g.length,b.g.length),S=[],R=0;R<x;R++)S[R]=this.i(R)^b.i(R);return new d(S,this.h^b.h)};function Je(b){for(var x=b.g.length+1,S=[],R=0;R<x;R++)S[R]=b.i(R)<<1|b.i(R-1)>>>31;return new d(S,b.h)}function Ae(b,x){var S=x>>5;x%=32;for(var R=b.g.length-S,D=[],M=0;M<R;M++)D[M]=0<x?b.i(M+S)>>>x|b.i(M+S+1)<<32-x:b.i(M+S);return new d(D,b.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,iy=i,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=w,d.fromString=T,ki=d}).apply(typeof xg<"u"?xg:typeof self<"u"?self:typeof window<"u"?window:{});var _u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var oy,Ia,ay,Cu,yh,ly,uy,cy;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,y){return l==Array.prototype||l==Object.prototype||(l[f]=y.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof _u=="object"&&_u];for(var f=0;f<l.length;++f){var y=l[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function o(l,f){if(f)e:{var y=i;l=l.split(".");for(var E=0;E<l.length-1;E++){var L=l[E];if(!(L in y))break e;y=y[L]}l=l[l.length-1],E=y[l],f=f(E),f!=E&&f!=null&&e(y,l,{configurable:!0,writable:!0,value:f})}}function u(l,f){l instanceof String&&(l+="");var y=0,E=!1,L={next:function(){if(!E&&y<l.length){var z=y++;return{value:f(z,l[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}o("Array.prototype.values",function(l){return l||function(){return u(this,function(f,y){return y})}});var d=d||{},m=this||self;function g(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function w(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function T(l,f,y){return l.call.apply(l.bind,arguments)}function P(l,f,y){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,E),l.apply(f,L)}}return function(){return l.apply(f,arguments)}}function O(l,f,y){return O=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?T:P,O.apply(null,arguments)}function H(l,f){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function Y(l,f){function y(){}y.prototype=f.prototype,l.aa=f.prototype,l.prototype=new y,l.prototype.constructor=l,l.Qb=function(E,L,z){for(var Z=Array(arguments.length-2),tt=2;tt<arguments.length;tt++)Z[tt-2]=arguments[tt];return f.prototype[L].apply(E,Z)}}function X(l){const f=l.length;if(0<f){const y=Array(f);for(let E=0;E<f;E++)y[E]=l[E];return y}return[]}function $(l,f){for(let y=1;y<arguments.length;y++){const E=arguments[y];if(g(E)){const L=l.length||0,z=E.length||0;l.length=L+z;for(let Z=0;Z<z;Z++)l[L+Z]=E[Z]}else l.push(E)}}class Ee{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function me(l){return/^[\s\xa0]*$/.test(l)}function xe(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function ke(l){return ke[" "](l),l}ke[" "]=function(){};var Je=xe().indexOf("Gecko")!=-1&&!(xe().toLowerCase().indexOf("webkit")!=-1&&xe().indexOf("Edge")==-1)&&!(xe().indexOf("Trident")!=-1||xe().indexOf("MSIE")!=-1)&&xe().indexOf("Edge")==-1;function Ae(l,f,y){for(const E in l)f.call(y,l[E],E,l)}function b(l,f){for(const y in l)f.call(void 0,l[y],y,l)}function x(l){const f={};for(const y in l)f[y]=l[y];return f}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(l,f){let y,E;for(let L=1;L<arguments.length;L++){E=arguments[L];for(y in E)l[y]=E[y];for(let z=0;z<S.length;z++)y=S[z],Object.prototype.hasOwnProperty.call(E,y)&&(l[y]=E[y])}}function D(l){var f=1;l=l.split(":");const y=[];for(;0<f&&l.length;)y.push(l.shift()),f--;return l.length&&y.push(l.join(":")),y}function M(l){m.setTimeout(()=>{throw l},0)}function I(){var l=pe;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ft{constructor(){this.h=this.g=null}add(f,y){const E=vt.get();E.set(f,y),this.h?this.h.next=E:this.g=E,this.h=E}}var vt=new Ee(()=>new Nt,l=>l.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let He,te=!1,pe=new ft,re=()=>{const l=m.Promise.resolve(void 0);He=()=>{l.then(V)}};var V=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(y){M(y)}var f=vt;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}te=!1};function B(){this.s=this.s,this.C=this.C}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var be=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};m.addEventListener("test",y,f),m.removeEventListener("test",y,f)}catch{}return l})();function Pe(l,f){if(ie.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var y=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Je){e:{try{ke(f.nodeName);var L=!0;break e}catch{}L=!1}L||(f=null)}}else y=="mouseover"?f=l.fromElement:y=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Ve[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Pe.aa.h.call(this)}}Y(Pe,ie);var Ve={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ue="closure_listenable_"+(1e6*Math.random()|0),We=0;function rt(l,f,y,E,L){this.listener=l,this.proxy=null,this.src=f,this.type=y,this.capture=!!E,this.ha=L,this.key=++We,this.da=this.fa=!1}function xt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ut(l){this.src=l,this.g={},this.h=0}Ut.prototype.add=function(l,f,y,E,L){var z=l.toString();l=this.g[z],l||(l=this.g[z]=[],this.h++);var Z=An(l,f,E,L);return-1<Z?(f=l[Z],y||(f.fa=!1)):(f=new rt(f,this.src,z,!!E,L),f.fa=y,l.push(f)),f};function Qn(l,f){var y=f.type;if(y in l.g){var E=l.g[y],L=Array.prototype.indexOf.call(E,f,void 0),z;(z=0<=L)&&Array.prototype.splice.call(E,L,1),z&&(xt(f),l.g[y].length==0&&(delete l.g[y],l.h--))}}function An(l,f,y,E){for(var L=0;L<l.length;++L){var z=l[L];if(!z.da&&z.listener==f&&z.capture==!!y&&z.ha==E)return L}return-1}var Xt="closure_lm_"+(1e6*Math.random()|0),ln={};function mn(l,f,y,E,L){if(Array.isArray(f)){for(var z=0;z<f.length;z++)mn(l,f[z],y,E,L);return null}return y=Yn(y),l&&l[Ue]?l.K(f,y,w(E)?!!E.capture:!1,L):Dr(l,f,y,!1,E,L)}function Dr(l,f,y,E,L,z){if(!f)throw Error("Invalid event type");var Z=w(L)?!!L.capture:!!L,tt=Bt(l);if(tt||(l[Xt]=tt=new Ut(l)),y=tt.add(f,y,E,Z,z),y.proxy)return y;if(E=Ln(),y.proxy=E,E.src=l,E.listener=y,l.addEventListener)be||(L=Z),L===void 0&&(L=!1),l.addEventListener(f.toString(),E,L);else if(l.attachEvent)l.attachEvent(Rn(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Ln(){function l(y){return f.call(l.src,l.listener,y)}const f=us;return l}function ls(l,f,y,E,L){if(Array.isArray(f))for(var z=0;z<f.length;z++)ls(l,f[z],y,E,L);else E=w(E)?!!E.capture:!!E,y=Yn(y),l&&l[Ue]?(l=l.i,f=String(f).toString(),f in l.g&&(z=l.g[f],y=An(z,y,E,L),-1<y&&(xt(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete l.g[f],l.h--)))):l&&(l=Bt(l))&&(f=l.g[f.toString()],l=-1,f&&(l=An(f,y,E,L)),(y=-1<l?f[l]:null)&&Jt(y))}function Jt(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Ue])Qn(f.i,l);else{var y=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(y,E,l.capture):f.detachEvent?f.detachEvent(Rn(y),E):f.addListener&&f.removeListener&&f.removeListener(E),(y=Bt(f))?(Qn(y,l),y.h==0&&(y.src=null,f[Xt]=null)):xt(l)}}}function Rn(l){return l in ln?ln[l]:ln[l]="on"+l}function us(l,f){if(l.da)l=!0;else{f=new Pe(f,this);var y=l.listener,E=l.ha||l.src;l.fa&&Jt(l),l=y.call(E,f)}return l}function Bt(l){return l=l[Xt],l instanceof Ut?l:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yn(l){return typeof l=="function"?l:(l[un]||(l[un]=function(f){return l.handleEvent(f)}),l[un])}function _t(){B.call(this),this.i=new Ut(this),this.M=this,this.F=null}Y(_t,B),_t.prototype[Ue]=!0,_t.prototype.removeEventListener=function(l,f,y,E){ls(this,l,f,y,E)};function wt(l,f){var y,E=l.F;if(E)for(y=[];E;E=E.F)y.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new ie(f,l);else if(f instanceof ie)f.target=f.target||l;else{var L=f;f=new ie(E,l),R(f,L)}if(L=!0,y)for(var z=y.length-1;0<=z;z--){var Z=f.g=y[z];L=Xn(Z,E,!0,f)&&L}if(Z=f.g=l,L=Xn(Z,E,!0,f)&&L,L=Xn(Z,E,!1,f)&&L,y)for(z=0;z<y.length;z++)Z=f.g=y[z],L=Xn(Z,E,!1,f)&&L}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var y=l.g[f],E=0;E<y.length;E++)xt(y[E]);delete l.g[f],l.h--}}this.F=null},_t.prototype.K=function(l,f,y,E){return this.i.add(String(l),f,!1,y,E)},_t.prototype.L=function(l,f,y,E){return this.i.add(String(l),f,!0,y,E)};function Xn(l,f,y,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var L=!0,z=0;z<f.length;++z){var Z=f[z];if(Z&&!Z.da&&Z.capture==y){var tt=Z.listener,At=Z.ha||Z.src;Z.fa&&Qn(l.i,Z),L=tt.call(At,E)!==!1&&L}}return L&&!E.defaultPrevented}function Qs(l,f,y){if(typeof l=="function")y&&(l=O(l,y));else if(l&&typeof l.handleEvent=="function")l=O(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function pr(l){l.g=Qs(()=>{l.g=null,l.i&&(l.i=!1,pr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Or extends B{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:pr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(l){B.call(this),this.h=l,this.g={}}Y(Vr,B);var Ys=[];function Xs(l){Ae(l.g,function(f,y){this.g.hasOwnProperty(y)&&Jt(f)},l),l.g={}}Vr.prototype.N=function(){Vr.aa.N.call(this),Xs(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Js=m.JSON.stringify,Zs=m.JSON.parse,ei=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function Mr(){}Mr.prototype.h=null;function A(l){return l.h||(l.h=l.i())}function ee(){}var de={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ae(){ie.call(this,"d")}Y(ae,ie);function ge(){ie.call(this,"c")}Y(ge,ie);var ne={},ye=null;function Ke(){return ye=ye||new _t}ne.La="serverreachability";function Le(l){ie.call(this,ne.La,l)}Y(Le,ie);function st(l){const f=Ke();wt(f,new Le(f))}ne.STAT_EVENT="statevent";function Be(l,f){ie.call(this,ne.STAT_EVENT,l),this.stat=f}Y(Be,ie);function Ne(l){const f=Ke();wt(f,new Be(f,l))}ne.Ma="timingevent";function Ze(l,f){ie.call(this,ne.Ma,l),this.size=f}Y(Ze,ie);function et(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function Dt(){this.g=!0}Dt.prototype.xa=function(){this.g=!1};function jn(l,f,y,E,L,z){l.info(function(){if(l.g)if(z)for(var Z="",tt=z.split("&"),At=0;At<tt.length;At++){var ze=tt[At].split("=");if(1<ze.length){var Ot=ze[0];ze=ze[1];var kt=Ot.split("_");Z=2<=kt.length&&kt[1]=="type"?Z+(Ot+"="+ze+"&"):Z+(Ot+"=redacted&")}}else Z=null;else Z=z;return"XMLHTTP REQ ("+E+") [attempt "+L+"]: "+f+`
`+y+`
`+Z})}function Fn(l,f,y,E,L,z,Z){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+L+"]: "+f+`
`+y+`
`+z+" "+Z})}function cn(l,f,y,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+vc(l,y)+(E?" "+E:"")})}function Fo(l,f){l.info(function(){return"TIMEOUT: "+f})}Dt.prototype.info=function(){};function vc(l,f){if(!l.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(l=0;l<y.length;l++)if(Array.isArray(y[l])){var E=y[l];if(!(2>E.length)){var L=E[1];if(Array.isArray(L)&&!(1>L.length)){var z=L[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Z=1;Z<L.length;Z++)L[Z]=""}}}}return Js(y)}catch{return f}}var Di={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jn;function ti(){}Y(ti,Mr),ti.prototype.g=function(){return new XMLHttpRequest},ti.prototype.i=function(){return{}},Jn=new ti;function Zn(l,f,y,E){this.j=l,this.i=f,this.l=y,this.R=E||1,this.U=new Vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sl}function sl(){this.i=null,this.g="",this.h=!1}var Uo={},Oi={};function Vi(l,f,y){l.L=1,l.v=ps(Pn(f)),l.m=y,l.P=!0,Bo(l,null)}function Bo(l,f){l.F=Date.now(),ot(l),l.A=Pn(l.v);var y=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),gs(y.i,"t",E),l.C=0,y=l.j.J,l.h=new sl,l.g=Tl(l.j,y?f:null,!l.m),0<l.O&&(l.M=new Or(O(l.Y,l,l.g),l.O)),f=l.U,y=l.g,E=l.ca;var L="readystatechange";Array.isArray(L)||(L&&(Ys[0]=L.toString()),L=Ys);for(var z=0;z<L.length;z++){var Z=mn(y,L[z],E||f.handleEvent,!1,f.h||f);if(!Z)break;f.g[Z.key]=Z}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),st(),jn(l.i,l.u,l.A,l.l,l.R,l.m)}Zn.prototype.ca=function(l){l=l.target;const f=this.M;f&&yn(l)==3?f.j():this.Y(l)},Zn.prototype.Y=function(l){try{if(l==this.g)e:{const kt=yn(this.g);var f=this.g.Ba();const zn=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Ko(this.g)))){this.J||kt!=4||f==7||(f==8||0>=zn?st(3):st(2)),ni(this);var y=this.g.Z();this.X=y;t:if(il(this)){var E=Ko(this.g);l="";var L=E.length,z=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Un(this),cs(this);var Z="";break t}this.h.i=new m.TextDecoder}for(f=0;f<L;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(z&&f==L-1)});E.length=0,this.h.g+=l,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=y==200,Fn(this.i,this.u,this.A,this.l,this.R,kt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var tt,At=this.g;if((tt=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!me(tt)){var ze=tt;break t}}ze=null}if(y=ze)cn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zo(this,y);else{this.o=!1,this.s=3,Ne(12),Un(this),cs(this);break e}}if(this.P){y=!0;let Nn;for(;!this.J&&this.C<Z.length;)if(Nn=_c(this,Z),Nn==Oi){kt==4&&(this.s=4,Ne(14),y=!1),cn(this.i,this.l,null,"[Incomplete Response]");break}else if(Nn==Uo){this.s=4,Ne(15),cn(this.i,this.l,Z,"[Invalid Chunk]"),y=!1;break}else cn(this.i,this.l,Nn,null),zo(this,Nn);if(il(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||Z.length!=0||this.h.h||(this.s=1,Ne(16),y=!1),this.o=this.o&&y,!y)cn(this.i,this.l,Z,"[Invalid Chunked Response]"),Un(this),cs(this);else if(0<Z.length&&!this.W){this.W=!0;var Ot=this.j;Ot.g==this&&Ot.ba&&!Ot.M&&(Ot.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Qo(Ot),Ot.M=!0,Ne(11))}}else cn(this.i,this.l,Z,null),zo(this,Z);kt==4&&Un(this),this.o&&!this.J&&(kt==4?qi(this.j,this):(this.o=!1,ot(this)))}else Bi(this.g),y==400&&0<Z.indexOf("Unknown SID")?(this.s=3,Ne(12)):(this.s=0,Ne(13)),Un(this),cs(this)}}}catch{}};function il(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _c(l,f){var y=l.C,E=f.indexOf(`
`,y);return E==-1?Oi:(y=Number(f.substring(y,E)),isNaN(y)?Uo:(E+=1,E+y>f.length?Oi:(f=f.slice(E,E+y),l.C=E+y,f)))}Zn.prototype.cancel=function(){this.J=!0,Un(this)};function ot(l){l.S=Date.now()+l.I,ol(l,l.I)}function ol(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=et(O(l.ba,l),f)}function ni(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Zn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Fo(this.i,this.A),this.L!=2&&(st(),Ne(17)),Un(this),this.s=2,cs(this)):ol(this,this.S-l)};function cs(l){l.j.G==0||l.J||qi(l.j,l)}function Un(l){ni(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Xs(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function zo(l,f){try{var y=l.j;if(y.G!=0&&(y.g==l||dn(y.h,l))){if(!l.K&&dn(y.h,l)&&y.G==3){try{var E=y.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var L=E;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<l.F)Wi(y),sr(y);else break e;Hi(y),Ne(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=et(O(y.Za,y),6e3));if(1>=ll(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Br(y,11)}else if((l.K||y.g==l)&&Wi(y),!me(f))for(L=y.Da.g.parse(f),f=0;f<L.length;f++){let ze=L[f];if(y.T=ze[0],ze=ze[1],y.G==2)if(ze[0]=="c"){y.K=ze[1],y.ia=ze[2];const Ot=ze[3];Ot!=null&&(y.la=Ot,y.j.info("VER="+y.la));const kt=ze[4];kt!=null&&(y.Aa=kt,y.j.info("SVER="+y.Aa));const zn=ze[5];zn!=null&&typeof zn=="number"&&0<zn&&(E=1.5*zn,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;const Nn=l.g;if(Nn){const ui=Nn.g?Nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var z=E.h;z.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&($o(z,z.h),z.h=null))}if(E.D){const Gi=Nn.g?Nn.g.getResponseHeader("X-HTTP-Session-Id"):null;Gi&&(E.ya=Gi,it(E.I,E.D,Gi))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-l.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var Z=l;if(E.qa=El(E,E.J?E.ia:null,E.W),Z.K){ul(E.h,Z);var tt=Z,At=E.L;At&&(tt.I=At),tt.B&&(ni(tt),ot(tt)),E.g=Z}else li(E);0<y.i.length&&vr(y)}else ze[0]!="stop"&&ze[0]!="close"||Br(y,7);else y.G==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?Br(y,7):$t(y):ze[0]!="noop"&&y.l&&y.l.ta(ze),y.v=0)}}st(4)}catch{}}var al=class{constructor(l,f){this.g=l,this.map=f}};function ri(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cn(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ll(l){return l.h?1:l.g?l.g.size:0}function dn(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function $o(l,f){l.g?l.g.add(f):l.h=f}function ul(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}ri.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function cl(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const y of l.g.values())f=f.concat(y.D);return f}return X(l.i)}function Mi(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(g(l)){for(var f=[],y=l.length,E=0;E<y;E++)f.push(l[E]);return f}f=[],y=0;for(E in l)f[y++]=l[E];return f}function Li(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(g(l)||typeof l=="string"){var f=[];l=l.length;for(var y=0;y<l;y++)f.push(y);return f}f=[],y=0;for(const E in l)f[y++]=E;return f}}}function ds(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(g(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var y=Li(l),E=Mi(l),L=E.length,z=0;z<L;z++)f.call(void 0,E[z],y&&y[z],l)}var si=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wc(l,f){if(l){l=l.split("&");for(var y=0;y<l.length;y++){var E=l[y].indexOf("="),L=null;if(0<=E){var z=l[y].substring(0,E);L=l[y].substring(E+1)}else z=l[y];f(z,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Lr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Lr){this.h=l.h,ii(this,l.j),this.o=l.o,this.g=l.g,hs(this,l.s),this.l=l.l;var f=l.i,y=new mr;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),fs(this,y),this.m=l.m}else l&&(f=String(l).match(si))?(this.h=!1,ii(this,f[1]||"",!0),this.o=je(f[2]||""),this.g=je(f[3]||"",!0),hs(this,f[4]),this.l=je(f[5]||"",!0),fs(this,f[6]||"",!0),this.m=je(f[7]||"")):(this.h=!1,this.i=new mr(null,this.h))}Lr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ms(f,ji,!0),":");var y=this.g;return(y||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ms(f,ji,!0),"@"),l.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&l.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(ms(y,y.charAt(0)=="/"?fl:hl,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",ms(y,Ho)),l.join("")};function Pn(l){return new Lr(l)}function ii(l,f,y){l.j=y?je(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function hs(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function fs(l,f,y){f instanceof mr?(l.i=f,gr(l.i,l.h)):(y||(f=ms(f,pl)),l.i=new mr(f,l.h))}function it(l,f,y){l.i.set(f,y)}function ps(l){return it(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function je(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ms(l,f,y){return typeof l=="string"?(l=encodeURI(l).replace(f,dl),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function dl(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ji=/[#\/\?@]/g,hl=/[#\?:]/g,fl=/[#\?]/g,pl=/[#\?@]/g,Ho=/#/g;function mr(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function zt(l){l.g||(l.g=new Map,l.h=0,l.i&&wc(l.i,function(f,y){l.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}s=mr.prototype,s.add=function(l,f){zt(this),this.i=null,l=Bn(this,l);var y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(f),this.h+=1,this};function er(l,f){zt(l),f=Bn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function tr(l,f){return zt(l),f=Bn(l,f),l.g.has(f)}s.forEach=function(l,f){zt(this),this.g.forEach(function(y,E){y.forEach(function(L){l.call(f,L,E,this)},this)},this)},s.na=function(){zt(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let E=0;E<f.length;E++){const L=l[E];for(let z=0;z<L.length;z++)y.push(f[E])}return y},s.V=function(l){zt(this);let f=[];if(typeof l=="string")tr(this,l)&&(f=f.concat(this.g.get(Bn(this,l))));else{l=Array.from(this.g.values());for(let y=0;y<l.length;y++)f=f.concat(l[y])}return f},s.set=function(l,f){return zt(this),this.i=null,l=Bn(this,l),tr(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},s.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function gs(l,f,y){er(l,f),0<y.length&&(l.i=null,l.g.set(Bn(l,f),X(y)),l.h+=y.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var E=f[y];const z=encodeURIComponent(String(E)),Z=this.V(E);for(E=0;E<Z.length;E++){var L=z;Z[E]!==""&&(L+="="+encodeURIComponent(String(Z[E]))),l.push(L)}}return this.i=l.join("&")};function Bn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function gr(l,f){f&&!l.j&&(zt(l),l.i=null,l.g.forEach(function(y,E){var L=E.toLowerCase();E!=L&&(er(this,E),gs(this,L,y))},l)),l.j=f}function Ec(l,f){const y=new Dt;if(m.Image){const E=new Image;E.onload=H(gn,y,"TestLoadImage: loaded",!0,f,E),E.onerror=H(gn,y,"TestLoadImage: error",!1,f,E),E.onabort=H(gn,y,"TestLoadImage: abort",!1,f,E),E.ontimeout=H(gn,y,"TestLoadImage: timeout",!1,f,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function ml(l,f){const y=new Dt,E=new AbortController,L=setTimeout(()=>{E.abort(),gn(y,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(z=>{clearTimeout(L),z.ok?gn(y,"TestPingServer: ok",!0,f):gn(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(L),gn(y,"TestPingServer: error",!1,f)})}function gn(l,f,y,E,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),E(y)}catch{}}function Tc(){this.g=new ei}function gl(l,f,y){const E=y||"";try{ds(l,function(L,z){let Z=L;w(L)&&(Z=Js(L)),f.push(E+z+"="+encodeURIComponent(Z))})}catch(L){throw f.push(E+"type="+encodeURIComponent("_badmap")),L}}function jr(l){this.l=l.Ub||null,this.j=l.eb||!1}Y(jr,Mr),jr.prototype.g=function(){return new oi(this.l,this.j)},jr.prototype.i=(function(l){return function(){return l}})({});function oi(l,f){_t.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Y(oi,_t),s=oi.prototype,s.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,rr(this)},s.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nr(this)),this.readyState=0},s.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,rr(this)),this.g&&(this.readyState=3,rr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;yl(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function yl(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}s.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?nr(this):rr(this),this.readyState==3&&yl(this)}},s.Ra=function(l){this.g&&(this.response=this.responseText=l,nr(this))},s.Qa=function(l){this.g&&(this.response=l,nr(this))},s.ga=function(){this.g&&nr(this)};function nr(l){l.readyState=4,l.l=null,l.j=null,l.v=null,rr(l)}s.setRequestHeader=function(l,f){this.u.append(l,f)},s.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=f.next();return l.join(`\r
`)};function rr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(oi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Fr(l){let f="";return Ae(l,function(y,E){f+=E,f+=":",f+=y,f+=`\r
`}),f}function ys(l,f,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=Fr(y),typeof l=="string"?y!=null&&encodeURIComponent(String(y)):it(l,f,y))}function ct(l){_t.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Y(ct,_t);var xc=/^https?$/i,Wo=["POST","PUT"];s=ct.prototype,s.Ha=function(l){this.J=l},s.ea=function(l,f,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jn.g(),this.v=this.o?A(this.o):A(Jn),this.g.onreadystatechange=O(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(z){ai(this,z);return}if(l=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var L in E)y.set(L,E[L]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const z of E.keys())y.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),L=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Wo,f,void 0))||E||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,Z]of y)this.g.setRequestHeader(z,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ui(this),this.u=!0,this.g.send(l),this.u=!1}catch(z){ai(this,z)}};function ai(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Fi(l),bn(l)}function Fi(l){l.A||(l.A=!0,wt(l,"complete"),wt(l,"error"))}s.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,wt(this,"complete"),wt(this,"abort"),bn(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bn(this,!0)),ct.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?qo(this):this.bb())},s.bb=function(){qo(this)};function qo(l){if(l.h&&typeof d<"u"&&(!l.v[1]||yn(l)!=4||l.Z()!=2)){if(l.u&&yn(l)==4)Qs(l.Ea,0,l);else if(wt(l,"readystatechange"),yn(l)==4){l.h=!1;try{const Z=l.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var E;if(E=Z===0){var L=String(l.D).match(si)[1]||null;!L&&m.self&&m.self.location&&(L=m.self.location.protocol.slice(0,-1)),E=!xc.test(L?L.toLowerCase():"")}y=E}if(y)wt(l,"complete"),wt(l,"success");else{l.m=6;try{var z=2<yn(l)?l.g.statusText:""}catch{z=""}l.l=z+" ["+l.Z()+"]",Fi(l)}}finally{bn(l)}}}}function bn(l,f){if(l.g){Ui(l);const y=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||wt(l,"ready");try{y.onreadystatechange=E}catch{}}}function Ui(l){l.I&&(m.clearTimeout(l.I),l.I=null)}s.isActive=function(){return!!this.g};function yn(l){return l.g?l.g.readyState:0}s.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Zs(f)}};function Ko(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Bi(l){const f={};l=(l.g&&2<=yn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(me(l[E]))continue;var y=D(l[E]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const z=f[L]||[];f[L]=z,z.push(y)}b(f,function(E){return E.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yr(l,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||f}function Go(l){this.Aa=0,this.i=[],this.j=new Dt,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yr("baseRetryDelayMs",5e3,l),this.cb=yr("retryDelaySeedMs",1e4,l),this.Wa=yr("forwardChannelMaxRetries",2,l),this.wa=yr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ri(l&&l.concurrentRequestLimit),this.Da=new Tc,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=Go.prototype,s.la=8,s.G=1,s.connect=function(l,f,y,E){Ne(0),this.W=l,this.H=f||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=El(this,null,this.W),vr(this)};function $t(l){if(zi(l),l.G==3){var f=l.U++,y=Pn(l.I);if(it(y,"SID",l.K),it(y,"RID",f),it(y,"TYPE","terminate"),Ur(l,y),f=new Zn(l,l.j,f),f.L=2,f.v=ps(Pn(y)),y=!1,m.navigator&&m.navigator.sendBeacon)try{y=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&m.Image&&(new Image().src=f.v,y=!0),y||(f.g=Tl(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ot(f)}wl(l)}function sr(l){l.g&&(Qo(l),l.g.cancel(),l.g=null)}function zi(l){sr(l),l.u&&(m.clearTimeout(l.u),l.u=null),Wi(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function vr(l){if(!Cn(l.h)&&!l.s){l.s=!0;var f=l.Ga;He||re(),te||(He(),te=!0),pe.add(f,l),l.B=0}}function kc(l,f){return ll(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=et(O(l.Ga,l,f),_l(l,l.B)),l.B++,!0)}s.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const L=new Zn(this,this.j,l);let z=this.o;if(this.S&&(z?(z=x(z),R(z,this.S)):z=this.S),this.m!==null||this.O||(L.H=z,z=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=vs(this,L,f),y=Pn(this.I),it(y,"RID",l),it(y,"CVER",22),this.D&&it(y,"X-HTTP-Session-Id",this.D),Ur(this,y),z&&(this.O?f="headers="+encodeURIComponent(String(Fr(z)))+"&"+f:this.m&&ys(y,this.m,z)),$o(this.h,L),this.Ua&&it(y,"TYPE","init"),this.P?(it(y,"$req",f),it(y,"SID","null"),L.T=!0,Vi(L,y,null)):Vi(L,y,f),this.G=2}}else this.G==3&&(l?$i(this,l):this.i.length==0||Cn(this.h)||$i(this))};function $i(l,f){var y;f?y=f.l:y=l.U++;const E=Pn(l.I);it(E,"SID",l.K),it(E,"RID",y),it(E,"AID",l.T),Ur(l,E),l.m&&l.o&&ys(E,l.m,l.o),y=new Zn(l,l.j,y,l.B+1),l.m===null&&(y.H=l.o),f&&(l.i=f.D.concat(l.i)),f=vs(l,y,1e3),y.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),$o(l.h,y),Vi(y,E,f)}function Ur(l,f){l.H&&Ae(l.H,function(y,E){it(f,E,y)}),l.l&&ds({},function(y,E){it(f,E,y)})}function vs(l,f,y){y=Math.min(l.i.length,y);var E=l.l?O(l.l.Na,l.l,l):null;e:{var L=l.i;let z=-1;for(;;){const Z=["count="+y];z==-1?0<y?(z=L[0].g,Z.push("ofs="+z)):z=0:Z.push("ofs="+z);let tt=!0;for(let At=0;At<y;At++){let ze=L[At].g;const Ot=L[At].map;if(ze-=z,0>ze)z=Math.max(0,L[At].g-100),tt=!1;else try{gl(Ot,Z,"req"+ze+"_")}catch{E&&E(Ot)}}if(tt){E=Z.join("&");break e}}}return l=l.i.splice(0,y),f.D=l,E}function li(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;He||re(),te||(He(),te=!0),pe.add(f,l),l.v=0}}function Hi(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=et(O(l.Fa,l),_l(l,l.v)),l.v++,!0)}s.Fa=function(){if(this.u=null,vl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=et(O(this.ab,this),l)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ne(10),sr(this),vl(this))};function Qo(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function vl(l){l.g=new Zn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Pn(l.qa);it(f,"RID","rpc"),it(f,"SID",l.K),it(f,"AID",l.T),it(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&it(f,"TO",l.ja),it(f,"TYPE","xmlhttp"),Ur(l,f),l.m&&l.o&&ys(f,l.m,l.o),l.L&&(l.g.I=l.L);var y=l.g;l=l.ia,y.L=1,y.v=ps(Pn(f)),y.m=null,y.P=!0,Bo(y,l)}s.Za=function(){this.C!=null&&(this.C=null,sr(this),Hi(this),Ne(19))};function Wi(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function qi(l,f){var y=null;if(l.g==f){Wi(l),Qo(l),l.g=null;var E=2}else if(dn(l.h,f))y=f.D,ul(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var L=l.B;E=Ke(),wt(E,new Ze(E,y)),vr(l)}else li(l);else if(L=f.s,L==3||L==0&&0<f.X||!(E==1&&kc(l,f)||E==2&&Hi(l)))switch(y&&0<y.length&&(f=l.h,f.i=f.i.concat(y)),L){case 1:Br(l,5);break;case 4:Br(l,10);break;case 3:Br(l,6);break;default:Br(l,2)}}}function _l(l,f){let y=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(y*=2),y*f}function Br(l,f){if(l.j.info("Error code "+f),f==2){var y=O(l.fb,l),E=l.Xa;const L=!E;E=new Lr(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||ii(E,"https"),ps(E),L?Ec(E.toString(),y):ml(E.toString(),y)}else Ne(2);l.G=0,l.l&&l.l.sa(f),wl(l),zi(l)}s.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ne(2)):(this.j.info("Failed to ping google.com"),Ne(1))};function wl(l){if(l.G=0,l.ka=[],l.l){const f=cl(l.h);(f.length!=0||l.i.length!=0)&&($(l.ka,f),$(l.ka,l.i),l.h.i.length=0,X(l.i),l.i.length=0),l.l.ra()}}function El(l,f,y){var E=y instanceof Lr?Pn(y):new Lr(y);if(E.g!="")f&&(E.g=f+"."+E.g),hs(E,E.s);else{var L=m.location;E=L.protocol,f=f?f+"."+L.hostname:L.hostname,L=+L.port;var z=new Lr(null);E&&ii(z,E),f&&(z.g=f),L&&hs(z,L),y&&(z.l=y),E=z}return y=l.D,f=l.ya,y&&f&&it(E,y,f),it(E,"VER",l.la),Ur(l,E),E}function Tl(l,f,y){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new ct(new jr({eb:y})):new ct(l.pa),f.Ha(l.J),f}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yo(){}s=Yo.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Ki(){}Ki.prototype.g=function(l,f){return new hn(l,f)};function hn(l,f){_t.call(this),this.g=new Go(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!me(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!me(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new _r(this)}Y(hn,_t),hn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){$t(this.g)},hn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.u&&(y={},y.__data__=Js(l),l=y);f.i.push(new al(f.Ya++,l)),f.G==3&&vr(f)},hn.prototype.N=function(){this.g.l=null,delete this.j,$t(this.g),delete this.g,hn.aa.N.call(this)};function xl(l){ae.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const y in f){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}Y(xl,ae);function kl(){ge.call(this),this.status=1}Y(kl,ge);function _r(l){this.g=l}Y(_r,Yo),_r.prototype.ua=function(){wt(this.g,"a")},_r.prototype.ta=function(l){wt(this.g,new xl(l))},_r.prototype.sa=function(l){wt(this.g,new kl)},_r.prototype.ra=function(){wt(this.g,"b")},Ki.prototype.createWebChannel=Ki.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,cy=function(){return new Ki},uy=function(){return Ke()},ly=ne,yh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Di.NO_ERROR=0,Di.TIMEOUT=8,Di.HTTP_ERROR=6,Cu=Di,rl.COMPLETE="complete",ay=rl,ee.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",_t.prototype.listen=_t.prototype.K,Ia=ee,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,oy=ct}).apply(typeof _u<"u"?_u:typeof self<"u"?self:typeof window<"u"?window:{});const kg="@firebase/firestore";class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");let Vo="10.14.0";const Ri=new Mh("@firebase/firestore");function Ea(){return Ri.logLevel}function ce(s,...e){if(Ri.logLevel<=Fe.DEBUG){const t=e.map(Gh);Ri.debug(`Firestore (${Vo}): ${s}`,...t)}}function rs(s,...e){if(Ri.logLevel<=Fe.ERROR){const t=e.map(Gh);Ri.error(`Firestore (${Vo}): ${s}`,...t)}}function So(s,...e){if(Ri.logLevel<=Fe.WARN){const t=e.map(Gh);Ri.warn(`Firestore (${Vo}): ${s}`,...t)}}function Gh(s){if(typeof s=="string")return s;try{return(function(t){return JSON.stringify(t)})(s)}catch{return s}}function Se(s="Unexpected state"){const e=`FIRESTORE (${Vo}) INTERNAL ASSERTION FAILED: `+s;throw rs(e),new Error(e)}function nt(s,e){s||Se()}function Ce(s,e){return s}const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends is{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class es{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class dy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class rk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class sk{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){nt(this.o===void 0);let i=this.i;const o=g=>this.i!==i?(i=this.i,t(g)):Promise.resolve();let u=new es;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new es,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new es)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(nt(typeof i.accessToken=="string"),new dy(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string"),new sn(e)}}class ik{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ok{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new ik(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ak{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){nt(this.o===void 0);const i=u=>{u.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.R;return this.R=u.token,ce("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>i(u)))};const o=u=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?o(u):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(nt(typeof t.token=="string"),this.R=t.token,new ak(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function uk(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<s;i++)t[i]=Math.floor(256*Math.random());return t}class hy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const o=uk(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<t&&(i+=e.charAt(o[u]%e.length))}return i}}function Qe(s,e){return s<e?-1:s>e?1:0}function Ao(s,e,t){return s.length===e.length&&s.every(((i,o)=>t(i,e[o])))}class bt{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bt.fromMillis(Date.now())}static fromDate(e){return bt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new bt(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Re{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Re(e)}static min(){return new Re(new bt(0,0))}static max(){return new Re(new bt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ja{constructor(e,t,i){t===void 0?t=0:t>e.length&&Se(),i===void 0?i=e.length-t:i>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ja.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ja?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ht extends ja{construct(e,t,i){return new ht(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new fe(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const ck=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends ja{construct(e,t,i){return new Kt(e,t,i)}static isValidIdentifier(e){return ck.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const t=[];let i="",o=0;const u=()=>{if(i.length===0)throw new fe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new fe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(i+=m,o++):(u(),o++)}if(u(),d)throw new fe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(t)}static emptyPath(){return new Kt([])}}class we{constructor(e){this.path=e}static fromPath(e){return new we(ht.fromString(e))}static fromName(e){return new we(ht.fromString(e).popFirst(5))}static empty(){return new we(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new ht(e.slice()))}}function dk(s,e){const t=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(i===1e9?new bt(t+1,0):new bt(t,i));return new Hs(o,we.empty(),e)}function hk(s){return new Hs(s.readTime,s.key,-1)}class Hs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Hs(Re.min(),we.empty(),-1)}static max(){return new Hs(Re.max(),we.empty(),-1)}}function fk(s,e){let t=s.readTime.compareTo(e.readTime);return t!==0?t:(t=we.comparator(s.documentKey,e.documentKey),t!==0?t:Qe(s.largestBatchId,e.largestBatchId))}const pk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Xa(s){if(s.code!==K.FAILED_PRECONDITION||s.message!==pk)throw s;ce("LocalStore","Unexpectedly lost primary lease")}class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,i)=>{t(e)}))}static reject(e){return new G(((t,i)=>{i(e)}))}static waitFor(e){return new G(((t,i)=>{let o=0,u=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++u,d&&u===o&&t()}),(g=>i(g)))})),d=!0,u===o&&t()}))}static or(e){let t=G.resolve(!1);for(const i of e)t=t.next((o=>o?G.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,u)=>{i.push(t.call(this,o,u))})),this.waitFor(i)}static mapArray(e,t){return new G(((i,o)=>{const u=e.length,d=new Array(u);let m=0;for(let g=0;g<u;g++){const w=g;t(e[w]).next((T=>{d[w]=T,++m,m===u&&i(d)}),(T=>o(T)))}}))}static doWhile(e,t){return new G(((i,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):i()};u()}))}}function gk(s){const e=s.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ja(s){return s.name==="IndexedDbTransactionError"}class Qh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Qh.oe=-1;function nc(s){return s==null}function Hu(s){return s===0&&1/s==-1/0}function yk(s){return typeof s=="number"&&Number.isInteger(s)&&!Hu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}function Ig(s){let e=0;for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e++;return e}function bi(s,e){for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&e(t,s[t])}function fy(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}class gt{constructor(e,t){this.comparator=e,this.root=t||qt.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wu(this.root,e,this.comparator,!1)}getReverseIterator(){return new wu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wu(this.root,e,this.comparator,!0)}}class wu{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?i(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,t,i,o,u){this.key=e,this.value=t,this.color=i??qt.RED,this.left=o??qt.EMPTY,this.right=u??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,u){return new qt(e??this.key,t??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const u=i(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,i),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return qt.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,i,o,u){return this}insert(e,t,i){return new qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Gt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sg(this.data.getIterator())}getIteratorFrom(e){return new Sg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class Sg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Mn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new Gt(Kt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}class py extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new py("Invalid base64 string: "+u):u}})(e);return new Yt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let d=0;d<o.length;++d)u+=String.fromCharCode(o[d]);return u})(e);return new Yt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const vk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ws(s){if(nt(!!s),typeof s=="string"){let e=0;const t=vk.exec(s);if(nt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(s.seconds),nanos:Tt(s.nanos)}}function Tt(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function Ci(s){return typeof s=="string"?Yt.fromBase64String(s):Yt.fromUint8Array(s)}function Yh(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Xh(s){const e=s.mapValue.fields.__previous_value__;return Yh(e)?Xh(e):e}function Fa(s){const e=Ws(s.mapValue.fields.__local_write_time__.timestampValue);return new bt(e.seconds,e.nanos)}class _k{constructor(e,t,i,o,u,d,m,g,w){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=w}}class Ua{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ua("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ua&&e.projectId===this.projectId&&e.database===this.database}}const Eu={mapValue:{}};function Pi(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Yh(s)?4:Ek(s)?9007199254740991:wk(s)?10:11:Se()}function Pr(s,e){if(s===e)return!0;const t=Pi(s);if(t!==Pi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Fa(s).isEqual(Fa(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const d=Ws(o.timestampValue),m=Ws(u.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(s,e);case 5:return s.stringValue===e.stringValue;case 6:return(function(o,u){return Ci(o.bytesValue).isEqual(Ci(u.bytesValue))})(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return(function(o,u){return Tt(o.geoPointValue.latitude)===Tt(u.geoPointValue.latitude)&&Tt(o.geoPointValue.longitude)===Tt(u.geoPointValue.longitude)})(s,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return Tt(o.integerValue)===Tt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const d=Tt(o.doubleValue),m=Tt(u.doubleValue);return d===m?Hu(d)===Hu(m):isNaN(d)&&isNaN(m)}return!1})(s,e);case 9:return Ao(s.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return(function(o,u){const d=o.mapValue.fields||{},m=u.mapValue.fields||{};if(Ig(d)!==Ig(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Pr(d[g],m[g])))return!1;return!0})(s,e);default:return Se()}}function Ba(s,e){return(s.values||[]).find((t=>Pr(t,e)))!==void 0}function Ro(s,e){if(s===e)return 0;const t=Pi(s),i=Pi(e);if(t!==i)return Qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(s.booleanValue,e.booleanValue);case 2:return(function(u,d){const m=Tt(u.integerValue||u.doubleValue),g=Tt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,e);case 3:return Ag(s.timestampValue,e.timestampValue);case 4:return Ag(Fa(s),Fa(e));case 5:return Qe(s.stringValue,e.stringValue);case 6:return(function(u,d){const m=Ci(u),g=Ci(d);return m.compareTo(g)})(s.bytesValue,e.bytesValue);case 7:return(function(u,d){const m=u.split("/"),g=d.split("/");for(let w=0;w<m.length&&w<g.length;w++){const T=Qe(m[w],g[w]);if(T!==0)return T}return Qe(m.length,g.length)})(s.referenceValue,e.referenceValue);case 8:return(function(u,d){const m=Qe(Tt(u.latitude),Tt(d.latitude));return m!==0?m:Qe(Tt(u.longitude),Tt(d.longitude))})(s.geoPointValue,e.geoPointValue);case 9:return Rg(s.arrayValue,e.arrayValue);case 10:return(function(u,d){var m,g,w,T;const P=u.fields||{},O=d.fields||{},H=(m=P.value)===null||m===void 0?void 0:m.arrayValue,Y=(g=O.value)===null||g===void 0?void 0:g.arrayValue,X=Qe(((w=H?.values)===null||w===void 0?void 0:w.length)||0,((T=Y?.values)===null||T===void 0?void 0:T.length)||0);return X!==0?X:Rg(H,Y)})(s.mapValue,e.mapValue);case 11:return(function(u,d){if(u===Eu.mapValue&&d===Eu.mapValue)return 0;if(u===Eu.mapValue)return 1;if(d===Eu.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),w=d.fields||{},T=Object.keys(w);g.sort(),T.sort();for(let P=0;P<g.length&&P<T.length;++P){const O=Qe(g[P],T[P]);if(O!==0)return O;const H=Ro(m[g[P]],w[T[P]]);if(H!==0)return H}return Qe(g.length,T.length)})(s.mapValue,e.mapValue);default:throw Se()}}function Ag(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Qe(s,e);const t=Ws(s),i=Ws(e),o=Qe(t.seconds,i.seconds);return o!==0?o:Qe(t.nanos,i.nanos)}function Rg(s,e){const t=s.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const u=Ro(t[o],i[o]);if(u)return u}return Qe(t.length,i.length)}function Co(s){return vh(s)}function vh(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(t){const i=Ws(t);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(t){return Ci(t).toBase64()})(s.bytesValue):"referenceValue"in s?(function(t){return we.fromName(t).toString()})(s.referenceValue):"geoPointValue"in s?(function(t){return`geo(${t.latitude},${t.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(t){let i="[",o=!0;for(const u of t.values||[])o?o=!1:i+=",",i+=vh(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const d of i)u?u=!1:o+=",",o+=`${d}:${vh(t.fields[d])}`;return o+"}"})(s.mapValue):Se()}function _h(s){return!!s&&"integerValue"in s}function Jh(s){return!!s&&"arrayValue"in s}function Cg(s){return!!s&&"nullValue"in s}function Pg(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Pu(s){return!!s&&"mapValue"in s}function wk(s){var e,t;return((t=(((e=s?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Pa(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return bi(s.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Pa(i))),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(s.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pa(s.arrayValue.values[t]);return e}return Object.assign({},s)}function Ek(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Pu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pa(t)}setAll(e){let t=Kt.emptyPath(),i={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,i,o),i={},o=[],t=m.popLast()}d?i[m.lastSegment()]=Pa(d):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,i,o)}delete(e){const t=this.field(e.popLast());Pu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];Pu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){bi(t,((o,u)=>e[o]=u));for(const o of i)delete e[o]}clone(){return new In(Pa(this.value))}}function my(s){const e=[];return bi(s.fields,((t,i)=>{const o=new Kt([t]);if(Pu(i)){const u=my(i.mapValue).fields;if(u.length===0)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)})),new Mn(e)}class on{constructor(e,t,i,o,u,d,m){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=u,this.data=d,this.documentState=m}static newInvalidDocument(e){return new on(e,0,Re.min(),Re.min(),Re.min(),In.empty(),0)}static newFoundDocument(e,t,i,o){return new on(e,1,t,Re.min(),i,o,0)}static newNoDocument(e,t){return new on(e,2,t,Re.min(),Re.min(),In.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Re.min(),Re.min(),In.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Wu{constructor(e,t){this.position=e,this.inclusive=t}}function bg(s,e,t){let i=0;for(let o=0;o<s.position.length;o++){const u=e[o],d=s.position[o];if(u.field.isKeyField()?i=we.comparator(we.fromName(d.referenceValue),t.key):i=Ro(d,t.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ng(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let t=0;t<s.position.length;t++)if(!Pr(s.position[t],e.position[t]))return!1;return!0}class qu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Tk(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}class gy{}class Pt extends gy{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new kk(e,t,i):t==="array-contains"?new Ak(e,i):t==="in"?new Rk(e,i):t==="not-in"?new Ck(e,i):t==="array-contains-any"?new Pk(e,i):new Pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Ik(e,i):new Sk(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ro(t,this.value)):t!==null&&Pi(this.value)===Pi(t)&&this.matchesComparison(Ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class br extends gy{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new br(e,t)}matches(e){return yy(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function yy(s){return s.op==="and"}function vy(s){return xk(s)&&yy(s)}function xk(s){for(const e of s.filters)if(e instanceof br)return!1;return!0}function wh(s){if(s instanceof Pt)return s.field.canonicalString()+s.op.toString()+Co(s.value);if(vy(s))return s.filters.map((e=>wh(e))).join(",");{const e=s.filters.map((t=>wh(t))).join(",");return`${s.op}(${e})`}}function _y(s,e){return s instanceof Pt?(function(i,o){return o instanceof Pt&&i.op===o.op&&i.field.isEqual(o.field)&&Pr(i.value,o.value)})(s,e):s instanceof br?(function(i,o){return o instanceof br&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,d,m)=>u&&_y(d,o.filters[m])),!0):!1})(s,e):void Se()}function wy(s){return s instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Co(t.value)}`})(s):s instanceof br?(function(t){return t.op.toString()+" {"+t.getFilters().map(wy).join(" ,")+"}"})(s):"Filter"}class kk extends Pt{constructor(e,t,i){super(e,t,i),this.key=we.fromName(i.referenceValue)}matches(e){const t=we.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ik extends Pt{constructor(e,t){super(e,"in",t),this.keys=Ey("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sk extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=Ey("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Ey(s,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((i=>we.fromName(i.referenceValue)))}class Ak extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Jh(t)&&Ba(t.arrayValue,this.value)}}class Rk extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ba(this.value.arrayValue,t)}}class Ck extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ba(this.value.arrayValue,t)}}class Pk extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Jh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ba(this.value.arrayValue,i)))}}class bk{constructor(e,t=null,i=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.ue=null}}function Dg(s,e=null,t=[],i=[],o=null,u=null,d=null){return new bk(s,e,t,i,o,u,d)}function Zh(s){const e=Ce(s);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>wh(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),nc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Co(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Co(i))).join(",")),e.ue=t}return e.ue}function ef(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<s.orderBy.length;t++)if(!Tk(s.orderBy[t],e.orderBy[t]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let t=0;t<s.filters.length;t++)if(!_y(s.filters[t],e.filters[t]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!Ng(s.startAt,e.startAt)&&Ng(s.endAt,e.endAt)}function Eh(s){return we.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}class rc{constructor(e,t=null,i=[],o=[],u=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=g,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Nk(s,e,t,i,o,u,d,m){return new rc(s,e,t,i,o,u,d,m)}function tf(s){return new rc(s)}function Og(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function Dk(s){return s.collectionGroup!==null}function ba(s){const e=Ce(s);if(e.ce===null){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Gt(Kt.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((w=>{w.isInequality()&&(m=m.add(w.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new qu(u,i))})),t.has(Kt.keyField().canonicalString())||e.ce.push(new qu(Kt.keyField(),i))}return e.ce}function Rr(s){const e=Ce(s);return e.le||(e.le=Ok(e,ba(s))),e.le}function Ok(s,e){if(s.limitType==="F")return Dg(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new qu(o.field,u)}));const t=s.endAt?new Wu(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Wu(s.startAt.position,s.startAt.inclusive):null;return Dg(s.path,s.collectionGroup,e,s.filters,s.limit,t,i)}}function Th(s,e,t){return new rc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,t,s.startAt,s.endAt)}function sc(s,e){return ef(Rr(s),Rr(e))&&s.limitType===e.limitType}function Ty(s){return`${Zh(Rr(s))}|lt:${s.limitType}`}function yo(s){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>wy(o))).join(", ")}]`),nc(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Co(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Co(o))).join(",")),`Target(${i})`})(Rr(s))}; limitType=${s.limitType})`}function ic(s,e){return e.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):we.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,e)&&(function(i,o){for(const u of ba(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,e)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,e)&&(function(i,o){return!(i.startAt&&!(function(d,m,g){const w=bg(d,m,g);return d.inclusive?w<=0:w<0})(i.startAt,ba(i),o)||i.endAt&&!(function(d,m,g){const w=bg(d,m,g);return d.inclusive?w>=0:w>0})(i.endAt,ba(i),o))})(s,e)}function Vk(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function xy(s){return(e,t)=>{let i=!1;for(const o of ba(s)){const u=Mk(o,e,t);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function Mk(s,e,t){const i=s.field.isKeyField()?we.comparator(e.key,t.key):(function(u,d,m){const g=d.data.field(u),w=m.data.field(u);return g!==null&&w!==null?Ro(g,w):Se()})(s.field,e,t);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return Se()}}class Mo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){bi(this.inner,((t,i)=>{for(const[o,u]of i)e(o,u)}))}isEmpty(){return fy(this.inner)}size(){return this.innerSize}}const Lk=new gt(we.comparator);function ss(){return Lk}const ky=new gt(we.comparator);function Sa(...s){let e=ky;for(const t of s)e=e.insert(t.key,t);return e}function Iy(s){let e=ky;return s.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function xi(){return Na()}function Sy(){return Na()}function Na(){return new Mo((s=>s.toString()),((s,e)=>s.isEqual(e)))}const jk=new gt(we.comparator),Fk=new Gt(we.comparator);function Me(...s){let e=Fk;for(const t of s)e=e.add(t);return e}const Uk=new Gt(Qe);function Bk(){return Uk}function nf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function Ay(s){return{integerValue:""+s}}function zk(s,e){return yk(e)?Ay(e):nf(s,e)}class oc{constructor(){this._=void 0}}function $k(s,e,t){return s instanceof za?(function(o,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Yh(u)&&(u=Xh(u)),u&&(d.fields.__previous_value__=u),{mapValue:d}})(t,e):s instanceof $a?Cy(s,e):s instanceof Ha?Py(s,e):(function(o,u){const d=Ry(o,u),m=Vg(d)+Vg(o.Pe);return _h(d)&&_h(o.Pe)?Ay(m):nf(o.serializer,m)})(s,e)}function Hk(s,e,t){return s instanceof $a?Cy(s,e):s instanceof Ha?Py(s,e):t}function Ry(s,e){return s instanceof Ku?(function(i){return _h(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(e)?e:{integerValue:0}:null}class za extends oc{}class $a extends oc{constructor(e){super(),this.elements=e}}function Cy(s,e){const t=by(e);for(const i of s.elements)t.some((o=>Pr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Ha extends oc{constructor(e){super(),this.elements=e}}function Py(s,e){let t=by(e);for(const i of s.elements)t=t.filter((o=>!Pr(o,i)));return{arrayValue:{values:t}}}class Ku extends oc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Vg(s){return Tt(s.integerValue||s.doubleValue)}function by(s){return Jh(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}class Wk{constructor(e,t){this.field=e,this.transform=t}}function qk(s,e){return s.field.isEqual(e.field)&&(function(i,o){return i instanceof $a&&o instanceof $a||i instanceof Ha&&o instanceof Ha?Ao(i.elements,o.elements,Pr):i instanceof Ku&&o instanceof Ku?Pr(i.Pe,o.Pe):i instanceof za&&o instanceof za})(s.transform,e.transform)}class Kk{constructor(e,t){this.version=e,this.transformResults=t}}class hr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class ac{}function Ny(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new rf(s.key,hr.none()):new Za(s.key,s.data,hr.none());{const t=s.data,i=In.empty();let o=new Gt(Kt.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);d===null&&u.length>1&&(u=u.popLast(),d=t.field(u)),d===null?i.delete(u):i.set(u,d),o=o.add(u)}return new Gs(s.key,i,new Mn(o.toArray()),hr.none())}}function Gk(s,e,t){s instanceof Za?(function(o,u,d){const m=o.value.clone(),g=Lg(o.fieldTransforms,u,d.transformResults);m.setAll(g),u.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(s,e,t):s instanceof Gs?(function(o,u,d){if(!bu(o.precondition,u))return void u.convertToUnknownDocument(d.version);const m=Lg(o.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(Dy(o)),g.setAll(m),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(s,e,t):(function(o,u,d){u.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Da(s,e,t,i){return s instanceof Za?(function(u,d,m,g){if(!bu(u.precondition,d))return m;const w=u.value.clone(),T=jg(u.fieldTransforms,g,d);return w.setAll(T),d.convertToFoundDocument(d.version,w).setHasLocalMutations(),null})(s,e,t,i):s instanceof Gs?(function(u,d,m,g){if(!bu(u.precondition,d))return m;const w=jg(u.fieldTransforms,g,d),T=d.data;return T.setAll(Dy(u)),T.setAll(w),d.convertToFoundDocument(d.version,T).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((P=>P.field)))})(s,e,t,i):(function(u,d,m){return bu(u.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(s,e,t)}function Qk(s,e){let t=null;for(const i of s.fieldTransforms){const o=e.data.field(i.field),u=Ry(i.transform,o||null);u!=null&&(t===null&&(t=In.empty()),t.set(i.field,u))}return t||null}function Mg(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Ao(i,o,((u,d)=>qk(u,d)))})(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Za extends ac{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gs extends ac{constructor(e,t,i,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Dy(s){const e=new Map;return s.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=s.data.field(t);e.set(t,i)}})),e}function Lg(s,e,t){const i=new Map;nt(s.length===t.length);for(let o=0;o<t.length;o++){const u=s[o],d=u.transform,m=e.data.field(u.field);i.set(u.field,Hk(d,m,t[o]))}return i}function jg(s,e,t){const i=new Map;for(const o of s){const u=o.transform,d=t.data.field(o.field);i.set(o.field,$k(u,d,e))}return i}class rf extends ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Yk extends ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xk{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Gk(u,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Da(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Da(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Sy();return this.mutations.forEach((o=>{const u=e.get(o.key),d=u.overlayedDocument;let m=this.applyToLocalView(d,u.mutatedFields);m=t.has(o.key)?null:m;const g=Ny(d,m);g!==null&&i.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((t,i)=>Mg(t,i)))&&Ao(this.baseMutations,e.baseMutations,((t,i)=>Mg(t,i)))}}class sf{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){nt(e.mutations.length===i.length);let o=(function(){return jk})();const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,i[d].version);return new sf(e,t,i,o)}}class Jk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class Zk{constructor(e,t){this.count=e,this.unchangedNames=t}}var St,$e;function eI(s){switch(s){default:return Se();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function Oy(s){if(s===void 0)return rs("GRPC error has no .code"),K.UNKNOWN;switch(s){case St.OK:return K.OK;case St.CANCELLED:return K.CANCELLED;case St.UNKNOWN:return K.UNKNOWN;case St.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case St.INTERNAL:return K.INTERNAL;case St.UNAVAILABLE:return K.UNAVAILABLE;case St.UNAUTHENTICATED:return K.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case St.NOT_FOUND:return K.NOT_FOUND;case St.ALREADY_EXISTS:return K.ALREADY_EXISTS;case St.PERMISSION_DENIED:return K.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case St.ABORTED:return K.ABORTED;case St.OUT_OF_RANGE:return K.OUT_OF_RANGE;case St.UNIMPLEMENTED:return K.UNIMPLEMENTED;case St.DATA_LOSS:return K.DATA_LOSS;default:return Se()}}($e=St||(St={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";function tI(){return new TextEncoder}const nI=new ki([4294967295,4294967295],0);function Fg(s){const e=tI().encode(s),t=new iy;return t.update(e),new Uint8Array(t.digest())}function Ug(s){const e=new DataView(s.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ki([t,i],0),new ki([o,u],0)]}class of{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Aa(`Invalid padding: ${t}`);if(i<0)throw new Aa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Aa(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Aa(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ki.fromNumber(this.Ie)}Ee(e,t,i){let o=e.add(t.multiply(ki.fromNumber(i)));return o.compare(nI)===1&&(o=new ki([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Fg(e),[i,o]=Ug(t);for(let u=0;u<this.hashCount;u++){const d=this.Ee(i,o,u);if(!this.de(d))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new of(u,o,t);return i.forEach((m=>d.insert(m))),d}insert(e){if(this.Ie===0)return;const t=Fg(e),[i,o]=Ug(t);for(let u=0;u<this.hashCount;u++){const d=this.Ee(i,o,u);this.Ae(d)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Aa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lc{constructor(e,t,i,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,el.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new lc(Re.min(),o,new gt(Qe),ss(),Me())}}class el{constructor(e,t,i,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new el(i,t,Me(),Me(),Me())}}class Nu{constructor(e,t,i,o){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=o}}class Vy{constructor(e,t){this.targetId=e,this.me=t}}class My{constructor(e,t,i=Yt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class Bg{constructor(){this.fe=0,this.ge=$g(),this.pe=Yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),t=Me(),i=Me();return this.ge.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Se()}})),new el(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=$g()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class rI{constructor(e){this.Le=e,this.Be=new Map,this.ke=ss(),this.qe=zg(),this.Qe=new gt(Qe)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,(t=>{const i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Se()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach(((i,o)=>{this.ze(o)&&t(o)}))}He(e){const t=e.targetId,i=e.me.count,o=this.Je(t);if(o){const u=o.target;if(Eh(u))if(i===0){const d=new we(u.path);this.Ue(t,d,on.newNoDocument(d,Re.min()))}else nt(i===1);else{const d=this.Ye(t);if(d!==i){const m=this.Ze(e),g=m?this.Xe(m,e,d):1;if(g!==0){this.je(t);const w=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,w)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=t;let d,m;try{d=Ci(i).toUint8Array()}catch(g){if(g instanceof py)return So("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new of(d,o,u)}catch(g){return So(g instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.Ie===0?null:m}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let o=0;return i.forEach((u=>{const d=this.Le.tt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.Ue(t,u,null),o++)})),o}rt(e){const t=new Map;this.Be.forEach(((u,d)=>{const m=this.Je(d);if(m){if(u.current&&Eh(m.target)){const g=new we(m.target.path);this.ke.get(g)!==null||this.it(d,g)||this.Ue(d,g,on.newNoDocument(g,e))}u.be&&(t.set(d,u.ve()),u.Ce())}}));let i=Me();this.qe.forEach(((u,d)=>{let m=!0;d.forEachWhile((g=>{const w=this.Je(g);return!w||w.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(i=i.add(u))})),this.ke.forEach(((u,d)=>d.setReadTime(e)));const o=new lc(e,t,this.Qe,this.ke,i);return this.ke=ss(),this.qe=zg(),this.Qe=new gt(Qe),o}$e(e,t){if(!this.ze(e))return;const i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;const o=this.Ge(e);this.it(e,t)?o.Fe(t,1):o.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Bg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Gt(Qe),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bg),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.Ue(e,t,null)}))}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function zg(){return new gt(we.comparator)}function $g(){return new gt(we.comparator)}const sI={asc:"ASCENDING",desc:"DESCENDING"},iI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oI={and:"AND",or:"OR"};class aI{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xh(s,e){return s.useProto3Json||nc(e)?e:{value:e}}function Gu(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ly(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function lI(s,e){return Gu(s,e.toTimestamp())}function Cr(s){return nt(!!s),Re.fromTimestamp((function(t){const i=Ws(t);return new bt(i.seconds,i.nanos)})(s))}function af(s,e){return kh(s,e).canonicalString()}function kh(s,e){const t=(function(o){return new ht(["projects",o.projectId,"databases",o.database])})(s).child("documents");return e===void 0?t:t.child(e)}function jy(s){const e=ht.fromString(s);return nt($y(e)),e}function Ih(s,e){return af(s.databaseId,e.path)}function nh(s,e){const t=jy(e);if(t.get(1)!==s.databaseId.projectId)throw new fe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+s.databaseId.projectId);if(t.get(3)!==s.databaseId.database)throw new fe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+s.databaseId.database);return new we(Uy(t))}function Fy(s,e){return af(s.databaseId,e)}function uI(s){const e=jy(s);return e.length===4?ht.emptyPath():Uy(e)}function Sh(s){return new ht(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Uy(s){return nt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function Hg(s,e,t){return{name:Ih(s,e),fields:t.value.mapValue.fields}}function cI(s,e){let t;if("targetChange"in e){e.targetChange;const i=(function(w){return w==="NO_CHANGE"?0:w==="ADD"?1:w==="REMOVE"?2:w==="CURRENT"?3:w==="RESET"?4:Se()})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(w,T){return w.useProto3Json?(nt(T===void 0||typeof T=="string"),Yt.fromBase64String(T||"")):(nt(T===void 0||T instanceof Buffer||T instanceof Uint8Array),Yt.fromUint8Array(T||new Uint8Array))})(s,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(w){const T=w.code===void 0?K.UNKNOWN:Oy(w.code);return new fe(T,w.message||"")})(d);t=new My(i,o,u,m||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=nh(s,i.document.name),u=Cr(i.document.updateTime),d=i.document.createTime?Cr(i.document.createTime):Re.min(),m=new In({mapValue:{fields:i.document.fields}}),g=on.newFoundDocument(o,u,d,m),w=i.targetIds||[],T=i.removedTargetIds||[];t=new Nu(w,T,g.key,g)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=nh(s,i.document),u=i.readTime?Cr(i.readTime):Re.min(),d=on.newNoDocument(o,u),m=i.removedTargetIds||[];t=new Nu([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=nh(s,i.document),u=i.removedTargetIds||[];t=new Nu([],u,o,null)}else{if(!("filter"in e))return Se();{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,d=new Zk(o,u),m=i.targetId;t=new Vy(m,d)}}return t}function dI(s,e){let t;if(e instanceof Za)t={update:Hg(s,e.key,e.value)};else if(e instanceof rf)t={delete:Ih(s,e.key)};else if(e instanceof Gs)t={update:Hg(s,e.key,e.data),updateMask:wI(e.fieldMask)};else{if(!(e instanceof Yk))return Se();t={verify:Ih(s,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(u,d){const m=d.transform;if(m instanceof za)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof $a)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Ha)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Ku)return{fieldPath:d.field.canonicalString(),increment:m.Pe};throw Se()})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:lI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Se()})(s,e.precondition)),t}function hI(s,e){return s&&s.length>0?(nt(e!==void 0),s.map((t=>(function(o,u){let d=o.updateTime?Cr(o.updateTime):Cr(u);return d.isEqual(Re.min())&&(d=Cr(u)),new Kk(d,o.transformResults||[])})(t,e)))):[]}function fI(s,e){return{documents:[Fy(s,e.path)]}}function pI(s,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Fy(s,o);const u=(function(w){if(w.length!==0)return zy(br.create(w,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const d=(function(w){if(w.length!==0)return w.map((T=>(function(O){return{field:vo(O.field),direction:yI(O.dir)}})(T)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=xh(s,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(w){return{before:w.inclusive,values:w.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(w){return{before:!w.inclusive,values:w.position}})(e.endAt)),{_t:t,parent:o}}function mI(s){let e=uI(s.parent);const t=s.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){nt(i===1);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=(function(P){const O=By(P);return O instanceof br&&vy(O)?O.getFilters():[O]})(t.where));let d=[];t.orderBy&&(d=(function(P){return P.map((O=>(function(Y){return new qu(_o(Y.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(O)))})(t.orderBy));let m=null;t.limit&&(m=(function(P){let O;return O=typeof P=="object"?P.value:P,nc(O)?null:O})(t.limit));let g=null;t.startAt&&(g=(function(P){const O=!!P.before,H=P.values||[];return new Wu(H,O)})(t.startAt));let w=null;return t.endAt&&(w=(function(P){const O=!P.before,H=P.values||[];return new Wu(H,O)})(t.endAt)),Nk(e,o,d,u,m,"F",g,w)}function gI(s,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function By(s){return s.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=_o(t.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=_o(t.unaryFilter.field);return Pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=_o(t.unaryFilter.field);return Pt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=_o(t.unaryFilter.field);return Pt.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Se()}})(s):s.fieldFilter!==void 0?(function(t){return Pt.create(_o(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}})(t.fieldFilter.op),t.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(t){return br.create(t.compositeFilter.filters.map((i=>By(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Se()}})(t.compositeFilter.op))})(s):Se()}function yI(s){return sI[s]}function vI(s){return iI[s]}function _I(s){return oI[s]}function vo(s){return{fieldPath:s.canonicalString()}}function _o(s){return Kt.fromServerFormat(s.fieldPath)}function zy(s){return s instanceof Pt?(function(t){if(t.op==="=="){if(Pg(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NAN"}};if(Cg(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Pg(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NAN"}};if(Cg(t.value))return{unaryFilter:{field:vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(t.field),op:vI(t.op),value:t.value}}})(s):s instanceof br?(function(t){const i=t.getFilters().map((o=>zy(o)));return i.length===1?i[0]:{compositeFilter:{op:_I(t.op),filters:i}}})(s):Se()}function wI(s){const e=[];return s.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function $y(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}class Fs{constructor(e,t,i,o,u=Re.min(),d=Re.min(),m=Yt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new Fs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class EI{constructor(e){this.ct=e}}function TI(s){const e=mI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?Th(e,e.limit,"L"):e}class xI{constructor(){this.un=new kI}addToCollectionParentIndex(e,t){return this.un.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(Hs.min())}updateCollectionGroup(e,t,i){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class kI{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new Gt(ht.comparator),u=!o.has(i);return this.index[t]=o.add(i),u}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new Gt(ht.comparator)).toArray()}}class Po{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Po(0)}static kn(){return new Po(-1)}}class II{constructor(){this.changes=new Mo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?G.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class SI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class AI{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Da(i.mutation,o,Mn.empty(),bt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Me()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Me()){const o=xi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((u=>{let d=Sa();return u.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const i=xi();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Me())))}populateOverlays(e,t,i){const o=[];return i.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,i,o){let u=ss();const d=Na(),m=(function(){return Na()})();return t.forEach(((g,w)=>{const T=i.get(w.key);o.has(w.key)&&(T===void 0||T.mutation instanceof Gs)?u=u.insert(w.key,w):T!==void 0?(d.set(w.key,T.mutation.getFieldMask()),Da(T.mutation,w,T.mutation.getFieldMask(),bt.now())):d.set(w.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((w,T)=>d.set(w,T))),t.forEach(((w,T)=>{var P;return m.set(w,new SI(T,(P=d.get(w))!==null&&P!==void 0?P:null))})),m)))}recalculateAndSaveOverlays(e,t){const i=Na();let o=new gt(((d,m)=>d-m)),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((g=>{const w=t.get(g);if(w===null)return;let T=i.get(g)||Mn.empty();T=m.applyToLocalView(w,T),i.set(g,T);const P=(o.get(m.batchId)||Me()).add(g);o=o.insert(m.batchId,P)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),w=g.key,T=g.value,P=Sy();T.forEach((O=>{if(!u.has(O)){const H=Ny(t.get(O),i.get(O));H!==null&&P.set(O,H),u=u.add(O)}})),d.push(this.documentOverlayCache.saveOverlays(e,w,P))}return G.waitFor(d)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(d){return we.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-u.size):G.resolve(xi());let m=-1,g=u;return d.next((w=>G.forEach(w,((T,P)=>(m<P.largestBatchId&&(m=P.largestBatchId),u.get(T)?G.resolve():this.remoteDocumentCache.getEntry(e,T).next((O=>{g=g.insert(T,O)}))))).next((()=>this.populateOverlays(e,w,u))).next((()=>this.computeViews(e,g,w,Me()))).next((T=>({batchId:m,changes:Iy(T)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new we(t)).next((i=>{let o=Sa();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const u=t.collectionGroup;let d=Sa();return this.indexManager.getCollectionParents(e,u).next((m=>G.forEach(m,(g=>{const w=(function(P,O){return new rc(O,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt)})(t,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,w,i,o).next((T=>{T.forEach(((P,O)=>{d=d.insert(P,O)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,u,o)))).next((d=>{u.forEach(((g,w)=>{const T=w.getKey();d.get(T)===null&&(d=d.insert(T,on.newInvalidDocument(T)))}));let m=Sa();return d.forEach(((g,w)=>{const T=u.get(g);T!==void 0&&Da(T.mutation,w,Mn.empty(),bt.now()),ic(t,w)&&(m=m.insert(g,w))})),m}))}}class RI{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return G.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Cr(o.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,(function(o){return{name:o.name,query:TI(o.bundledQuery),readTime:Cr(o.readTime)}})(t)),G.resolve()}}class CI{constructor(){this.overlays=new gt(we.comparator),this.Ir=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const i=xi();return G.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,u)=>{this.ht(e,t,u)})),G.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.Ir.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Ir.delete(i)),G.resolve()}getOverlaysForCollection(e,t,i){const o=xi(),u=t.length+1,d=new we(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,w=g.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===u&&g.largestBatchId>i&&o.set(g.getKey(),g)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let u=new gt(((w,T)=>w-T));const d=this.overlays.getIterator();for(;d.hasNext();){const w=d.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>i){let T=u.get(w.largestBatchId);T===null&&(T=xi(),u=u.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const m=xi(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((w,T)=>m.set(w,T))),!(m.size()>=o)););return G.resolve(m)}ht(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const d=this.Ir.get(o.largestBatchId).delete(i.key);this.Ir.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(i.key,new Jk(t,i));let u=this.Ir.get(t);u===void 0&&(u=Me(),this.Ir.set(t,u)),this.Ir.set(t,u.add(i.key))}}class PI{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}class lf{constructor(){this.Tr=new Gt(Ft.Er),this.dr=new Gt(Ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const i=new Ft(e,t);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Vr(new Ft(e,t))}mr(e,t){e.forEach((i=>this.removeReference(i,t)))}gr(e){const t=new we(new ht([])),i=new Ft(t,e),o=new Ft(t,e+1),u=[];return this.dr.forEachInRange([i,o],(d=>{this.Vr(d),u.push(d.key)})),u}pr(){this.Tr.forEach((e=>this.Vr(e)))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new we(new ht([])),i=new Ft(t,e),o=new Ft(t,e+1);let u=Me();return this.dr.forEachInRange([i,o],(d=>{u=u.add(d.key)})),u}containsKey(e){const t=new Ft(e,0),i=this.Tr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return we.comparator(e.key,t.key)||Qe(e.wr,t.wr)}static Ar(e,t){return Qe(e.wr,t.wr)||we.comparator(e.key,t.key)}}class bI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Gt(Ft.Er)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const u=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new Xk(u,t,i,o);this.mutationQueue.push(d);for(const m of o)this.br=this.br.add(new Ft(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return G.resolve(d)}lookupMutationBatch(e,t){return G.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.vr(i),u=o<0?0:o;return G.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Ft(t,0),o=new Ft(t,Number.POSITIVE_INFINITY),u=[];return this.br.forEachInRange([i,o],(d=>{const m=this.Dr(d.wr);u.push(m)})),G.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Gt(Qe);return t.forEach((o=>{const u=new Ft(o,0),d=new Ft(o,Number.POSITIVE_INFINITY);this.br.forEachInRange([u,d],(m=>{i=i.add(m.wr)}))})),G.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let u=i;we.isDocumentKey(u)||(u=u.child(""));const d=new Ft(new we(u),0);let m=new Gt(Qe);return this.br.forEachWhile((g=>{const w=g.key.path;return!!i.isPrefixOf(w)&&(w.length===o&&(m=m.add(g.wr)),!0)}),d),G.resolve(this.Cr(m))}Cr(e){const t=[];return e.forEach((i=>{const o=this.Dr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){nt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return G.forEach(t.mutations,(o=>{const u=new Ft(o.key,t.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.br=i}))}On(e){}containsKey(e,t){const i=new Ft(t,0),o=this.br.firstAfterOrEqual(i);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class NI{constructor(e){this.Mr=e,this.docs=(function(){return new gt(we.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),u=o?o.size:0,d=this.Mr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return G.resolve(i?i.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let i=ss();return t.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():on.newInvalidDocument(o))})),G.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let u=ss();const d=t.path,m=new we(d.child("")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:w,value:{document:T}}=g.getNext();if(!d.isPrefixOf(w.path))break;w.path.length>d.length+1||fk(hk(T),i)<=0||(o.has(T.key)||ic(t,T))&&(u=u.insert(T.key,T.mutableCopy()))}return G.resolve(u)}getAllFromCollectionGroup(e,t,i,o){Se()}Or(e,t){return G.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new DI(this)}getSize(e){return G.resolve(this.size)}}class DI extends II{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.cr.addEntry(e,o)):this.cr.removeEntry(i)})),G.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}class OI{constructor(e){this.persistence=e,this.Nr=new Mo((t=>Zh(t)),ef),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new lf,this.targetCount=0,this.kr=Po.Bn()}forEachTarget(e,t){return this.Nr.forEach(((i,o)=>t(o))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Lr&&(this.Lr=t),G.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new Po(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Kn(t),G.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,i){let o=0;const u=[];return this.Nr.forEach(((d,m)=>{m.sequenceNumber<=t&&i.get(m.targetId)===null&&(this.Nr.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),G.waitFor(u).next((()=>o))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const i=this.Nr.get(t)||null;return G.resolve(i)}addMatchingKeys(e,t,i){return this.Br.Rr(t,i),G.resolve()}removeMatchingKeys(e,t,i){this.Br.mr(t,i);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((d=>{u.push(o.markPotentiallyOrphaned(e,d))})),G.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Br.yr(t);return G.resolve(i)}containsKey(e,t){return G.resolve(this.Br.containsKey(t))}}class VI{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Qh(0),this.Kr=!1,this.Kr=!0,this.$r=new PI,this.referenceDelegate=e(this),this.Ur=new OI(this),this.indexManager=new xI,this.remoteDocumentCache=(function(o){return new NI(o)})((i=>this.referenceDelegate.Wr(i))),this.serializer=new EI(t),this.Gr=new RI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new CI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.qr[e.toKey()];return i||(i=new bI(t,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,i){ce("MemoryPersistence","Starting transaction:",e);const o=new MI(this.Qr.next());return this.referenceDelegate.zr(),i(o).next((u=>this.referenceDelegate.jr(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Hr(e,t){return G.or(Object.values(this.qr).map((i=>()=>i.containsKey(e,t))))}}class MI extends mk{constructor(e){super(),this.currentSequenceNumber=e}}class uf{constructor(e){this.persistence=e,this.Jr=new lf,this.Yr=null}static Zr(e){return new uf(e)}get Xr(){if(this.Yr)return this.Yr;throw Se()}addReference(e,t,i){return this.Jr.addReference(i,t),this.Xr.delete(i.toString()),G.resolve()}removeReference(e,t,i){return this.Jr.removeReference(i,t),this.Xr.add(i.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),G.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach((o=>this.Xr.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.Xr.add(u.toString())))})).next((()=>i.removeTargetData(e,t)))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.Xr,(i=>{const o=we.fromPath(i);return this.ei(e,o).next((u=>{u||t.removeEntry(o,Re.min())}))})).next((()=>(this.Yr=null,t.apply(e))))}updateLimboDocument(e,t){return this.ei(e,t).next((i=>{i?this.Xr.delete(t.toString()):this.Xr.add(t.toString())}))}Wr(e){return 0}ei(e,t){return G.or([()=>G.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}class cf{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.$i=i,this.Ui=o}static Wi(e,t){let i=Me(),o=Me();for(const u of t.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new cf(e,t.fromCache,i,o)}}class LI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class jI{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=(function(){return Ew()?8:gk(an())>0?6:4})()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,i,o){const u={result:null};return this.Yi(e,t).next((d=>{u.result=d})).next((()=>{if(!u.result)return this.Zi(e,t,o,i).next((d=>{u.result=d}))})).next((()=>{if(u.result)return;const d=new LI;return this.Xi(e,t,d).next((m=>{if(u.result=m,this.zi)return this.es(e,t,d,m.size)}))})).next((()=>u.result))}es(e,t,i,o){return i.documentReadCount<this.ji?(Ea()<=Fe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),G.resolve()):(Ea()<=Fe.DEBUG&&ce("QueryEngine","Query:",yo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.Hi*o?(Ea()<=Fe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rr(t))):G.resolve())}Yi(e,t){if(Og(t))return G.resolve(null);let i=Rr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Th(t,null,"F"),i=Rr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((u=>{const d=Me(...u);return this.Ji.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,i).next((g=>{const w=this.ts(t,m);return this.ns(t,w,d,g.readTime)?this.Yi(e,Th(t,null,"F")):this.rs(e,w,t,g)}))))})))))}Zi(e,t,i,o){return Og(t)||o.isEqual(Re.min())?G.resolve(null):this.Ji.getDocuments(e,i).next((u=>{const d=this.ts(t,u);return this.ns(t,d,i,o)?G.resolve(null):(Ea()<=Fe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(t)),this.rs(e,d,t,dk(o,-1)).next((m=>m)))}))}ts(e,t){let i=new Gt(xy(e));return t.forEach(((o,u)=>{ic(e,u)&&(i=i.add(u))})),i}ns(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Xi(e,t,i){return Ea()<=Fe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",yo(t)),this.Ji.getDocumentsMatchingQuery(e,t,Hs.min(),i)}rs(e,t,i,o){return this.Ji.getDocumentsMatchingQuery(e,i,o).next((u=>(t.forEach((d=>{u=u.insert(d.key,d)})),u)))}}class FI{constructor(e,t,i,o){this.persistence=e,this.ss=t,this.serializer=o,this.os=new gt(Qe),this._s=new Mo((u=>Zh(u)),ef),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.os)))}}function UI(s,e,t,i){return new FI(s,e,t,i)}async function Hy(s,e){const t=Ce(s);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,t.ls(e),t.mutationQueue.getAllMutationBatches(i)))).next((u=>{const d=[],m=[];let g=Me();for(const w of o){d.push(w.batchId);for(const T of w.mutations)g=g.add(T.key)}for(const w of u){m.push(w.batchId);for(const T of w.mutations)g=g.add(T.key)}return t.localDocuments.getDocuments(i,g).next((w=>({hs:w,removedBatchIds:d,addedBatchIds:m})))}))}))}function BI(s,e){const t=Ce(s);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),u=t.cs.newChangeBuffer({trackRemovals:!0});return(function(m,g,w,T){const P=w.batch,O=P.keys();let H=G.resolve();return O.forEach((Y=>{H=H.next((()=>T.getEntry(g,Y))).next((X=>{const $=w.docVersions.get(Y);nt($!==null),X.version.compareTo($)<0&&(P.applyToRemoteDocument(X,w),X.isValidDocument()&&(X.setReadTime(w.commitVersion),T.addEntry(X)))}))})),H.next((()=>m.mutationQueue.removeMutationBatch(g,P)))})(t,i,e,u).next((()=>u.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(m){let g=Me();for(let w=0;w<m.mutationResults.length;++w)m.mutationResults[w].transformResults.length>0&&(g=g.add(m.batch.mutations[w].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function Wy(s){const e=Ce(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Ur.getLastRemoteSnapshotVersion(t)))}function zI(s,e){const t=Ce(s),i=e.snapshotVersion;let o=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const d=t.cs.newChangeBuffer({trackRemovals:!0});o=t.os;const m=[];e.targetChanges.forEach(((T,P)=>{const O=o.get(P);if(!O)return;m.push(t.Ur.removeMatchingKeys(u,T.removedDocuments,P).next((()=>t.Ur.addMatchingKeys(u,T.addedDocuments,P))));let H=O.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(P)!==null?H=H.withResumeToken(Yt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):T.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(T.resumeToken,i)),o=o.insert(P,H),(function(X,$,Ee){return X.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8?!0:Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0})(O,H,T)&&m.push(t.Ur.updateTargetData(u,H))}));let g=ss(),w=Me();if(e.documentUpdates.forEach((T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))})),m.push($I(u,d,e.documentUpdates).next((T=>{g=T.Ps,w=T.Is}))),!i.isEqual(Re.min())){const T=t.Ur.getLastRemoteSnapshotVersion(u).next((P=>t.Ur.setTargetsMetadata(u,u.currentSequenceNumber,i)));m.push(T)}return G.waitFor(m).next((()=>d.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,g,w))).next((()=>g))})).then((u=>(t.os=o,u)))}function $I(s,e,t){let i=Me(),o=Me();return t.forEach((u=>i=i.add(u))),e.getEntries(s,i).next((u=>{let d=ss();return t.forEach(((m,g)=>{const w=u.get(m);g.isFoundDocument()!==w.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(Re.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!w.isValidDocument()||g.version.compareTo(w.version)>0||g.version.compareTo(w.version)===0&&w.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):ce("LocalStore","Ignoring outdated watch update for ",m,". Current version:",w.version," Watch version:",g.version)})),{Ps:d,Is:o}}))}function HI(s,e){const t=Ce(s);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function WI(s,e){const t=Ce(s);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Ur.getTargetData(i,e).next((u=>u?(o=u,G.resolve(o)):t.Ur.allocateTargetId(i).next((d=>(o=new Fs(e,d,"TargetPurposeListen",i.currentSequenceNumber),t.Ur.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.os.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.os=t.os.insert(i.targetId,i),t._s.set(e,i.targetId)),i}))}async function Ah(s,e,t){const i=Ce(s),o=i.os.get(e),u=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",u,(d=>i.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Ja(d))throw d;ce("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}i.os=i.os.remove(e),i._s.delete(o.target)}function Wg(s,e,t){const i=Ce(s);let o=Re.min(),u=Me();return i.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,w,T){const P=Ce(g),O=P._s.get(T);return O!==void 0?G.resolve(P.os.get(O)):P.Ur.getTargetData(w,T)})(i,d,Rr(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(d,m.targetId).next((g=>{u=g}))})).next((()=>i.ss.getDocumentsMatchingQuery(d,e,t?o:Re.min(),t?u:Me()))).next((m=>(qI(i,Vk(e),m),{documents:m,Ts:u})))))}function qI(s,e,t){let i=s.us.get(e)||Re.min();t.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.us.set(e,i)}class qg{constructor(){this.activeTargetIds=Bk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KI{constructor(){this.so=new qg,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,i){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qg,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class GI{_o(e){}shutdown(){}}class Kg{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ce("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ce("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let Tu=null;function rh(){return Tu===null?Tu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Tu++,"0x"+Tu.toString(16)}const QI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class YI{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}const rn="WebChannelConnection";class XI extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+t.host,this.vo=`projects/${o}/databases/${u}`,this.Co=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${u}`}get Fo(){return!1}Mo(t,i,o,u,d){const m=rh(),g=this.xo(t,i.toUriEncodedString());ce("RestConnection",`Sending RPC '${t}' ${m}:`,g,o);const w={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(w,u,d),this.No(t,g,w,o).then((T=>(ce("RestConnection",`Received RPC '${t}' ${m}: `,T),T)),(T=>{throw So("RestConnection",`RPC '${t}' ${m} failed with error: `,T,"url: ",g,"request:",o),T}))}Lo(t,i,o,u,d,m){return this.Mo(t,i,o,u,d)}Oo(t,i,o){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Vo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((u,d)=>t[d]=u)),o&&o.headers.forEach(((u,d)=>t[d]=u))}xo(t,i){const o=QI[t];return`${this.Do}/v1/${i}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,i,o){const u=rh();return new Promise(((d,m)=>{const g=new oy;g.setWithCredentials(!0),g.listenOnce(ay.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Cu.NO_ERROR:const T=g.getResponseJson();ce(rn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),d(T);break;case Cu.TIMEOUT:ce(rn,`RPC '${e}' ${u} timed out`),m(new fe(K.DEADLINE_EXCEEDED,"Request time out"));break;case Cu.HTTP_ERROR:const P=g.getStatus();if(ce(rn,`RPC '${e}' ${u} failed with status:`,P,"response text:",g.getResponseText()),P>0){let O=g.getResponseJson();Array.isArray(O)&&(O=O[0]);const H=O?.error;if(H&&H.status&&H.message){const Y=(function($){const Ee=$.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(Ee)>=0?Ee:K.UNKNOWN})(H.status);m(new fe(Y,H.message))}else m(new fe(K.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new fe(K.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{ce(rn,`RPC '${e}' ${u} completed.`)}}));const w=JSON.stringify(o);ce(rn,`RPC '${e}' ${u} sending request:`,o),g.send(t,"POST",w,i,15)}))}Bo(e,t,i){const o=rh(),u=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=cy(),m=uy(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;w!==void 0&&(g.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(g.useFetchStreams=!0),this.Oo(g.initMessageHeaders,t,i),g.encodeInitMessageHeaders=!0;const T=u.join("");ce(rn,`Creating RPC '${e}' stream ${o}: ${T}`,g);const P=d.createWebChannel(T,g);let O=!1,H=!1;const Y=new YI({Io:$=>{H?ce(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(O||(ce(rn,`Opening RPC '${e}' stream ${o} transport.`),P.open(),O=!0),ce(rn,`RPC '${e}' stream ${o} sending:`,$),P.send($))},To:()=>P.close()}),X=($,Ee,me)=>{$.listen(Ee,(xe=>{try{me(xe)}catch(ke){setTimeout((()=>{throw ke}),0)}}))};return X(P,Ia.EventType.OPEN,(()=>{H||(ce(rn,`RPC '${e}' stream ${o} transport opened.`),Y.yo())})),X(P,Ia.EventType.CLOSE,(()=>{H||(H=!0,ce(rn,`RPC '${e}' stream ${o} transport closed`),Y.So())})),X(P,Ia.EventType.ERROR,($=>{H||(H=!0,So(rn,`RPC '${e}' stream ${o} transport errored:`,$),Y.So(new fe(K.UNAVAILABLE,"The operation could not be completed")))})),X(P,Ia.EventType.MESSAGE,($=>{var Ee;if(!H){const me=$.data[0];nt(!!me);const xe=me,ke=xe.error||((Ee=xe[0])===null||Ee===void 0?void 0:Ee.error);if(ke){ce(rn,`RPC '${e}' stream ${o} received error:`,ke);const Je=ke.status;let Ae=(function(S){const R=St[S];if(R!==void 0)return Oy(R)})(Je),b=ke.message;Ae===void 0&&(Ae=K.INTERNAL,b="Unknown error status: "+Je+" with message "+ke.message),H=!0,Y.So(new fe(Ae,b)),P.close()}else ce(rn,`RPC '${e}' stream ${o} received:`,me),Y.bo(me)}})),X(m,ly.STAT_EVENT,($=>{$.stat===yh.PROXY?ce(rn,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===yh.NOPROXY&&ce(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{Y.wo()}),0),Y}}function sh(){return typeof document<"u"?document:null}function uc(s){return new aI(s,!0)}class qy{constructor(e,t,i=1e3,o=1.5,u=6e4){this.ui=e,this.timerId=t,this.ko=i,this.qo=o,this.Qo=u,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),o=Math.max(0,t-i);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,o,(()=>(this.Uo=Date.now(),e()))),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}class Ky{constructor(e,t,i,o,u,d,m,g){this.ui=e,this.Ho=i,this.Jo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qy(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,(()=>this.__())))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(rs(t.toString()),rs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.Yo===t&&this.P_(i,o)}),(i=>{e((()=>{const o=new fe(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(o)}))}))}P_(e,t){const i=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo((()=>{i((()=>this.listener.Eo()))})),this.stream.Ro((()=>{i((()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,(()=>(this.r_()&&(this.state=3),Promise.resolve()))),this.listener.Ro())))})),this.stream.mo((o=>{i((()=>this.I_(o)))})),this.stream.onMessage((o=>{i((()=>++this.e_==1?this.E_(o):this.onNext(o)))}))}i_(){this.state=5,this.t_.Go((async()=>{this.state=0,this.start()}))}I_(e){return ce("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget((()=>this.Yo===e?t():(ce("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class JI extends Ky{constructor(e,t,i,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,d),this.serializer=u}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=cI(this.serializer,e),i=(function(u){if(!("targetChange"in u))return Re.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?Re.min():d.readTime?Cr(d.readTime):Re.min()})(e);return this.listener.d_(t,i)}A_(e){const t={};t.database=Sh(this.serializer),t.addTarget=(function(u,d){let m;const g=d.target;if(m=Eh(g)?{documents:fI(u,g)}:{query:pI(u,g)._t},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=Ly(u,d.resumeToken);const w=xh(u,d.expectedCount);w!==null&&(m.expectedCount=w)}else if(d.snapshotVersion.compareTo(Re.min())>0){m.readTime=Gu(u,d.snapshotVersion.toTimestamp());const w=xh(u,d.expectedCount);w!==null&&(m.expectedCount=w)}return m})(this.serializer,e);const i=gI(this.serializer,e);i&&(t.labels=i),this.a_(t)}R_(e){const t={};t.database=Sh(this.serializer),t.removeTarget=e,this.a_(t)}}class ZI extends Ky{constructor(e,t,i,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,d),this.serializer=u}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return nt(!!e.streamToken),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=hI(e.writeResults,e.commitTime),i=Cr(e.commitTime);return this.listener.g_(i,t)}p_(){const e={};e.database=Sh(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>dI(this.serializer,i)))};this.a_(t)}}class e1 extends class{}{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.y_=!1}w_(){if(this.y_)throw new fe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,d])=>this.connection.Mo(e,kh(t,i),o,u,d))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new fe(K.UNKNOWN,u.toString())}))}Lo(e,t,i,o,u){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Lo(e,kh(t,i),o,d,m,u))).catch((d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new fe(K.UNKNOWN,d.toString())}))}terminate(){this.y_=!0,this.connection.terminate()}}class t1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve()))))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rs(t),this.D_=!1):ce("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}class n1{constructor(e,t,i,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=u,this.k_._o((d=>{i.enqueueAndForget((async()=>{Ni(this)&&(ce("RemoteStore","Restarting streams for network reachability change."),await(async function(g){const w=Ce(g);w.L_.add(4),await tl(w),w.q_.set("Unknown"),w.L_.delete(4),await cc(w)})(this))}))})),this.q_=new t1(i,o)}}async function cc(s){if(Ni(s))for(const e of s.B_)await e(!0)}async function tl(s){for(const e of s.B_)await e(!1)}function Gy(s,e){const t=Ce(s);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),pf(t)?ff(t):Lo(t).r_()&&hf(t,e))}function df(s,e){const t=Ce(s),i=Lo(t);t.N_.delete(e),i.r_()&&Qy(t,e),t.N_.size===0&&(i.r_()?i.o_():Ni(t)&&t.q_.set("Unknown"))}function hf(s,e){if(s.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Lo(s).A_(e)}function Qy(s,e){s.Q_.xe(e),Lo(s).R_(e)}function ff(s){s.Q_=new rI({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>s.N_.get(e)||null,tt:()=>s.datastore.serializer.databaseId}),Lo(s).start(),s.q_.v_()}function pf(s){return Ni(s)&&!Lo(s).n_()&&s.N_.size>0}function Ni(s){return Ce(s).L_.size===0}function Yy(s){s.Q_=void 0}async function r1(s){s.q_.set("Online")}async function s1(s){s.N_.forEach(((e,t)=>{hf(s,e)}))}async function i1(s,e){Yy(s),pf(s)?(s.q_.M_(e),ff(s)):s.q_.set("Unknown")}async function o1(s,e,t){if(s.q_.set("Online"),e instanceof My&&e.state===2&&e.cause)try{await(async function(o,u){const d=u.cause;for(const m of u.targetIds)o.N_.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.N_.delete(m),o.Q_.removeTarget(m))})(s,e)}catch(i){ce("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Qu(s,i)}else if(e instanceof Nu?s.Q_.Ke(e):e instanceof Vy?s.Q_.He(e):s.Q_.We(e),!t.isEqual(Re.min()))try{const i=await Wy(s.localStore);t.compareTo(i)>=0&&await(function(u,d){const m=u.Q_.rt(d);return m.targetChanges.forEach(((g,w)=>{if(g.resumeToken.approximateByteSize()>0){const T=u.N_.get(w);T&&u.N_.set(w,T.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,w)=>{const T=u.N_.get(g);if(!T)return;u.N_.set(g,T.withResumeToken(Yt.EMPTY_BYTE_STRING,T.snapshotVersion)),Qy(u,g);const P=new Fs(T.target,g,w,T.sequenceNumber);hf(u,P)})),u.remoteSyncer.applyRemoteEvent(m)})(s,t)}catch(i){ce("RemoteStore","Failed to raise snapshot:",i),await Qu(s,i)}}async function Qu(s,e,t){if(!Ja(e))throw e;s.L_.add(1),await tl(s),s.q_.set("Offline"),t||(t=()=>Wy(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{ce("RemoteStore","Retrying IndexedDB access"),await t(),s.L_.delete(1),await cc(s)}))}function Xy(s,e){return e().catch((t=>Qu(s,t,e)))}async function dc(s){const e=Ce(s),t=qs(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;a1(e);)try{const o=await HI(e.localStore,i);if(o===null){e.O_.length===0&&t.o_();break}i=o.batchId,l1(e,o)}catch(o){await Qu(e,o)}Jy(e)&&Zy(e)}function a1(s){return Ni(s)&&s.O_.length<10}function l1(s,e){s.O_.push(e);const t=qs(s);t.r_()&&t.V_&&t.m_(e.mutations)}function Jy(s){return Ni(s)&&!qs(s).n_()&&s.O_.length>0}function Zy(s){qs(s).start()}async function u1(s){qs(s).p_()}async function c1(s){const e=qs(s);for(const t of s.O_)e.m_(t.mutations)}async function d1(s,e,t){const i=s.O_.shift(),o=sf.from(i,e,t);await Xy(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await dc(s)}async function h1(s,e){e&&qs(s).V_&&await(async function(i,o){if((function(d){return eI(d)&&d!==K.ABORTED})(o.code)){const u=i.O_.shift();qs(i).s_(),await Xy(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await dc(i)}})(s,e),Jy(s)&&Zy(s)}async function Gg(s,e){const t=Ce(s);t.asyncQueue.verifyOperationInProgress(),ce("RemoteStore","RemoteStore received new credentials");const i=Ni(t);t.L_.add(3),await tl(t),i&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await cc(t)}async function f1(s,e){const t=Ce(s);e?(t.L_.delete(2),await cc(t)):e||(t.L_.add(2),await tl(t),t.q_.set("Unknown"))}function Lo(s){return s.K_||(s.K_=(function(t,i,o){const u=Ce(t);return u.w_(),new JI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:r1.bind(null,s),Ro:s1.bind(null,s),mo:i1.bind(null,s),d_:o1.bind(null,s)}),s.B_.push((async e=>{e?(s.K_.s_(),pf(s)?ff(s):s.q_.set("Unknown")):(await s.K_.stop(),Yy(s))}))),s.K_}function qs(s){return s.U_||(s.U_=(function(t,i,o){const u=Ce(t);return u.w_(),new ZI(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Eo:()=>Promise.resolve(),Ro:u1.bind(null,s),mo:h1.bind(null,s),f_:c1.bind(null,s),g_:d1.bind(null,s)}),s.B_.push((async e=>{e?(s.U_.s_(),await dc(s)):(await s.U_.stop(),s.O_.length>0&&(ce("RemoteStore",`Stopping write stream with ${s.O_.length} pending writes`),s.O_=[]))}))),s.U_}class mf{constructor(e,t,i,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,u){const d=Date.now()+i,m=new mf(e,t,d,o,u);return m.start(i),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gf(s,e){if(rs("AsyncQueue",`${e}: ${s}`),Ja(s))return new fe(K.UNAVAILABLE,`${e}: ${s}`);throw s}class ko{constructor(e){this.comparator=e?(t,i)=>e(t,i)||we.comparator(t.key,i.key):(t,i)=>we.comparator(t.key,i.key),this.keyedMap=Sa(),this.sortedSet=new gt(this.comparator)}static emptySet(e){return new ko(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ko)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new ko;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Qg{constructor(){this.W_=new gt(we.comparator)}track(e){const t=e.doc.key,i=this.W_.get(t);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(t,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(t):e.type===1&&i.type===2?this.W_=this.W_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):Se():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal(((t,i)=>{e.push(i)})),e}}class bo{constructor(e,t,i,o,u,d,m,g,w){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=w}static fromInitialDocuments(e,t,i,o,u){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new bo(e,t,ko.emptySet(t),d,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}class p1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some((e=>e.J_()))}}class m1{constructor(){this.queries=Yg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,i){const o=Ce(t),u=o.queries;o.queries=Yg(),u.forEach(((d,m)=>{for(const g of m.j_)g.onError(i)}))})(this,new fe(K.ABORTED,"Firestore shutting down"))}}function Yg(){return new Mo((s=>Ty(s)),sc)}async function ev(s,e){const t=Ce(s);let i=3;const o=e.query;let u=t.queries.get(o);u?!u.H_()&&e.J_()&&(i=2):(u=new p1,i=e.J_()?0:1);try{switch(i){case 0:u.z_=await t.onListen(o,!0);break;case 1:u.z_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=gf(d,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.j_.push(e),e.Z_(t.onlineState),u.z_&&e.X_(u.z_)&&yf(t)}async function tv(s,e){const t=Ce(s),i=e.query;let o=3;const u=t.queries.get(i);if(u){const d=u.j_.indexOf(e);d>=0&&(u.j_.splice(d,1),u.j_.length===0?o=e.J_()?0:1:!u.H_()&&e.J_()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function g1(s,e){const t=Ce(s);let i=!1;for(const o of e){const u=o.query,d=t.queries.get(u);if(d){for(const m of d.j_)m.X_(o)&&(i=!0);d.z_=o}}i&&yf(t)}function y1(s,e,t){const i=Ce(s),o=i.queries.get(e);if(o)for(const u of o.j_)u.onError(t);i.queries.delete(e)}function yf(s){s.Y_.forEach((e=>{e.next()}))}var Rh,Xg;(Xg=Rh||(Rh={})).ea="default",Xg.Cache="cache";class nv{constructor(e,t,i){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new bo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const i=t!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Rh.Cache}}class rv{constructor(e){this.key=e}}class sv{constructor(e){this.key=e}}class v1{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=xy(e),this.Ra=new ko(this.Aa)}get Va(){return this.Ta}ma(e,t){const i=t?t.fa:new Qg,o=t?t.Ra:this.Ra;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,w=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((T,P)=>{const O=o.get(T),H=ic(this.query,P)?P:null,Y=!!O&&this.mutatedKeys.has(O.key),X=!!H&&(H.hasLocalMutations||this.mutatedKeys.has(H.key)&&H.hasCommittedMutations);let $=!1;O&&H?O.data.isEqual(H.data)?Y!==X&&(i.track({type:3,doc:H}),$=!0):this.ga(O,H)||(i.track({type:2,doc:H}),$=!0,(g&&this.Aa(H,g)>0||w&&this.Aa(H,w)<0)&&(m=!0)):!O&&H?(i.track({type:0,doc:H}),$=!0):O&&!H&&(i.track({type:1,doc:O}),$=!0,(g||w)&&(m=!0)),$&&(H?(d=d.add(H),u=X?u.add(T):u.delete(T)):(d=d.delete(T),u=u.delete(T)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const T=this.query.limitType==="F"?d.last():d.first();d=d.delete(T.key),u=u.delete(T.key),i.track({type:1,doc:T})}return{Ra:d,fa:i,ns:m,mutatedKeys:u}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const u=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const d=e.fa.G_();d.sort(((T,P)=>(function(H,Y){const X=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return X(H)-X(Y)})(T.type,P.type)||this.Aa(T.doc,P.doc))),this.pa(i),o=o!=null&&o;const m=t&&!o?this.ya():[],g=this.da.size===0&&this.current&&!o?1:0,w=g!==this.Ea;return this.Ea=g,d.length!==0||w?{snapshot:new bo(this.query,e.Ra,u,d,e.mutatedKeys,g===0,w,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:m}:{wa:m}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach((t=>this.Ta=this.Ta.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ta=this.Ta.delete(t))),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Me(),this.Ra.forEach((i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))}));const t=[];return e.forEach((i=>{this.da.has(i)||t.push(new sv(i))})),this.da.forEach((i=>{e.has(i)||t.push(new rv(i))})),t}ba(e){this.Ta=e.Ts,this.da=Me();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return bo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class _1{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class w1{constructor(e){this.key=e,this.va=!1}}class E1{constructor(e,t,i,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Ca={},this.Fa=new Mo((m=>Ty(m)),sc),this.Ma=new Map,this.xa=new Set,this.Oa=new gt(we.comparator),this.Na=new Map,this.La=new lf,this.Ba={},this.ka=new Map,this.qa=Po.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function T1(s,e,t=!0){const i=cv(s);let o;const u=i.Fa.get(e);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.Da()):o=await iv(i,e,t,!0),o}async function x1(s,e){const t=cv(s);await iv(t,e,!0,!1)}async function iv(s,e,t,i){const o=await WI(s.localStore,Rr(e)),u=o.targetId,d=s.sharedClientState.addLocalQueryTarget(u,t);let m;return i&&(m=await k1(s,e,u,d==="current",o.resumeToken)),s.isPrimaryClient&&t&&Gy(s.remoteStore,o),m}async function k1(s,e,t,i,o){s.Ka=(P,O,H)=>(async function(X,$,Ee,me){let xe=$.view.ma(Ee);xe.ns&&(xe=await Wg(X.localStore,$.query,!1).then((({documents:b})=>$.view.ma(b,xe))));const ke=me&&me.targetChanges.get($.targetId),Je=me&&me.targetMismatches.get($.targetId)!=null,Ae=$.view.applyChanges(xe,X.isPrimaryClient,ke,Je);return Zg(X,$.targetId,Ae.wa),Ae.snapshot})(s,P,O,H);const u=await Wg(s.localStore,e,!0),d=new v1(e,u.Ts),m=d.ma(u.documents),g=el.createSynthesizedTargetChangeForCurrentChange(t,i&&s.onlineState!=="Offline",o),w=d.applyChanges(m,s.isPrimaryClient,g);Zg(s,t,w.wa);const T=new _1(e,t,d);return s.Fa.set(e,T),s.Ma.has(t)?s.Ma.get(t).push(e):s.Ma.set(t,[e]),w.snapshot}async function I1(s,e,t){const i=Ce(s),o=i.Fa.get(e),u=i.Ma.get(o.targetId);if(u.length>1)return i.Ma.set(o.targetId,u.filter((d=>!sc(d,e)))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Ah(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&df(i.remoteStore,o.targetId),Ch(i,o.targetId)})).catch(Xa)):(Ch(i,o.targetId),await Ah(i.localStore,o.targetId,!0))}async function S1(s,e){const t=Ce(s),i=t.Fa.get(e),o=t.Ma.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),df(t.remoteStore,i.targetId))}async function A1(s,e,t){const i=O1(s);try{const o=await(function(d,m){const g=Ce(d),w=bt.now(),T=m.reduce(((H,Y)=>H.add(Y.key)),Me());let P,O;return g.persistence.runTransaction("Locally write mutations","readwrite",(H=>{let Y=ss(),X=Me();return g.cs.getEntries(H,T).next(($=>{Y=$,Y.forEach(((Ee,me)=>{me.isValidDocument()||(X=X.add(Ee))}))})).next((()=>g.localDocuments.getOverlayedDocuments(H,Y))).next(($=>{P=$;const Ee=[];for(const me of m){const xe=Qk(me,P.get(me.key).overlayedDocument);xe!=null&&Ee.push(new Gs(me.key,xe,my(xe.value.mapValue),hr.exists(!0)))}return g.mutationQueue.addMutationBatch(H,w,Ee,m)})).next(($=>{O=$;const Ee=$.applyToLocalDocumentSet(P,X);return g.documentOverlayCache.saveOverlays(H,$.batchId,Ee)}))})).then((()=>({batchId:O.batchId,changes:Iy(P)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let w=d.Ba[d.currentUser.toKey()];w||(w=new gt(Qe)),w=w.insert(m,g),d.Ba[d.currentUser.toKey()]=w})(i,o.batchId,t),await nl(i,o.changes),await dc(i.remoteStore)}catch(o){const u=gf(o,"Failed to persist write");t.reject(u)}}async function ov(s,e){const t=Ce(s);try{const i=await zI(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const d=t.Na.get(u);d&&(nt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.va=!0:o.modifiedDocuments.size>0?nt(d.va):o.removedDocuments.size>0&&(nt(d.va),d.va=!1))})),await nl(t,i,e)}catch(i){await Xa(i)}}function Jg(s,e,t){const i=Ce(s);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Fa.forEach(((u,d)=>{const m=d.view.Z_(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Ce(d);g.onlineState=m;let w=!1;g.queries.forEach(((T,P)=>{for(const O of P.j_)O.Z_(m)&&(w=!0)})),w&&yf(g)})(i.eventManager,e),o.length&&i.Ca.d_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function R1(s,e,t){const i=Ce(s);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Na.get(e),u=o&&o.key;if(u){let d=new gt(we.comparator);d=d.insert(u,on.newNoDocument(u,Re.min()));const m=Me().add(u),g=new lc(Re.min(),new Map,new gt(Qe),d,m);await ov(i,g),i.Oa=i.Oa.remove(u),i.Na.delete(e),vf(i)}else await Ah(i.localStore,e,!1).then((()=>Ch(i,e,t))).catch(Xa)}async function C1(s,e){const t=Ce(s),i=e.batch.batchId;try{const o=await BI(t.localStore,e);lv(t,i,null),av(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await nl(t,o)}catch(o){await Xa(o)}}async function P1(s,e,t){const i=Ce(s);try{const o=await(function(d,m){const g=Ce(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(w=>{let T;return g.mutationQueue.lookupMutationBatch(w,m).next((P=>(nt(P!==null),T=P.keys(),g.mutationQueue.removeMutationBatch(w,P)))).next((()=>g.mutationQueue.performConsistencyCheck(w))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(w,T,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,T))).next((()=>g.localDocuments.getDocuments(w,T)))}))})(i.localStore,e);lv(i,e,t),av(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await nl(i,o)}catch(o){await Xa(o)}}function av(s,e){(s.ka.get(e)||[]).forEach((t=>{t.resolve()})),s.ka.delete(e)}function lv(s,e,t){const i=Ce(s);let o=i.Ba[i.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),i.Ba[i.currentUser.toKey()]=o}}function Ch(s,e,t=null){s.sharedClientState.removeLocalQueryTarget(e);for(const i of s.Ma.get(e))s.Fa.delete(i),t&&s.Ca.$a(i,t);s.Ma.delete(e),s.isPrimaryClient&&s.La.gr(e).forEach((i=>{s.La.containsKey(i)||uv(s,i)}))}function uv(s,e){s.xa.delete(e.path.canonicalString());const t=s.Oa.get(e);t!==null&&(df(s.remoteStore,t),s.Oa=s.Oa.remove(e),s.Na.delete(t),vf(s))}function Zg(s,e,t){for(const i of t)i instanceof rv?(s.La.addReference(i.key,e),b1(s,i)):i instanceof sv?(ce("SyncEngine","Document no longer in limbo: "+i.key),s.La.removeReference(i.key,e),s.La.containsKey(i.key)||uv(s,i.key)):Se()}function b1(s,e){const t=e.key,i=t.path.canonicalString();s.Oa.get(t)||s.xa.has(i)||(ce("SyncEngine","New document in limbo: "+t),s.xa.add(i),vf(s))}function vf(s){for(;s.xa.size>0&&s.Oa.size<s.maxConcurrentLimboResolutions;){const e=s.xa.values().next().value;s.xa.delete(e);const t=new we(ht.fromString(e)),i=s.qa.next();s.Na.set(i,new w1(t)),s.Oa=s.Oa.insert(t,i),Gy(s.remoteStore,new Fs(Rr(tf(t.path)),i,"TargetPurposeLimboResolution",Qh.oe))}}async function nl(s,e,t){const i=Ce(s),o=[],u=[],d=[];i.Fa.isEmpty()||(i.Fa.forEach(((m,g)=>{d.push(i.Ka(g,e,t).then((w=>{var T;if((w||t)&&i.isPrimaryClient){const P=w?!w.fromCache:(T=t?.targetChanges.get(g.targetId))===null||T===void 0?void 0:T.current;i.sharedClientState.updateQueryState(g.targetId,P?"current":"not-current")}if(w){o.push(w);const P=cf.Wi(g.targetId,w);u.push(P)}})))})),await Promise.all(d),i.Ca.d_(o),await(async function(g,w){const T=Ce(g);try{await T.persistence.runTransaction("notifyLocalViewChanges","readwrite",(P=>G.forEach(w,(O=>G.forEach(O.$i,(H=>T.persistence.referenceDelegate.addReference(P,O.targetId,H))).next((()=>G.forEach(O.Ui,(H=>T.persistence.referenceDelegate.removeReference(P,O.targetId,H)))))))))}catch(P){if(!Ja(P))throw P;ce("LocalStore","Failed to update sequence numbers: "+P)}for(const P of w){const O=P.targetId;if(!P.fromCache){const H=T.os.get(O),Y=H.snapshotVersion,X=H.withLastLimboFreeSnapshotVersion(Y);T.os=T.os.insert(O,X)}}})(i.localStore,u))}async function N1(s,e){const t=Ce(s);if(!t.currentUser.isEqual(e)){ce("SyncEngine","User change. New user:",e.toKey());const i=await Hy(t.localStore,e);t.currentUser=e,(function(u,d){u.ka.forEach((m=>{m.forEach((g=>{g.reject(new fe(K.CANCELLED,d))}))})),u.ka.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nl(t,i.hs)}}function D1(s,e){const t=Ce(s),i=t.Na.get(e);if(i&&i.va)return Me().add(i.key);{let o=Me();const u=t.Ma.get(e);if(!u)return o;for(const d of u){const m=t.Fa.get(d);o=o.unionWith(m.view.Va)}return o}}function cv(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=ov.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D1.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R1.bind(null,e),e.Ca.d_=g1.bind(null,e.eventManager),e.Ca.$a=y1.bind(null,e.eventManager),e}function O1(s){const e=Ce(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C1.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=P1.bind(null,e),e}class Yu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=uc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return UI(this.persistence,new jI,e.initialUser,this.serializer)}Ga(e){return new VI(uf.Zr,this.serializer)}Wa(e){return new KI}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yu.provider={build:()=>new Yu};class Ph{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jg(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=N1.bind(null,this.syncEngine),await f1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new m1})()}createDatastore(e){const t=uc(e.databaseInfo.databaseId),i=(function(u){return new XI(u)})(e.databaseInfo);return(function(u,d,m,g){return new e1(u,d,m,g)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,u,d,m){return new n1(i,o,u,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Jg(this.syncEngine,t,0)),(function(){return Kg.D()?new Kg:new GI})())}createSyncEngine(e,t){return(function(o,u,d,m,g,w,T){const P=new E1(o,u,d,m,g,w);return T&&(P.Qa=!0),P})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const u=Ce(o);ce("RemoteStore","RemoteStore shutting down."),u.L_.add(5),await tl(u),u.k_.shutdown(),u.q_.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ph.provider={build:()=>new Ph};class dv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}class V1{constructor(e,t,i,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=hy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async d=>{ce("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(i,(d=>(ce("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=gf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ih(s,e){s.asyncQueue.verifyOperationInProgress(),ce("FirestoreClient","Initializing OfflineComponentProvider");const t=s.configuration;await e.initialize(t);let i=t.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Hy(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=e}async function e0(s,e){s.asyncQueue.verifyOperationInProgress();const t=await M1(s);ce("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,s.configuration),s.setCredentialChangeListener((i=>Gg(e.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>Gg(e.remoteStore,o))),s._onlineComponents=e}async function M1(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){ce("FirestoreClient","Using user provided OfflineComponentProvider");try{await ih(s,s._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;So("Error using user provided cache. Falling back to memory cache: "+t),await ih(s,new Yu)}}else ce("FirestoreClient","Using default OfflineComponentProvider"),await ih(s,new Yu);return s._offlineComponents}async function hv(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(ce("FirestoreClient","Using user provided OnlineComponentProvider"),await e0(s,s._uninitializedComponentsProvider._online)):(ce("FirestoreClient","Using default OnlineComponentProvider"),await e0(s,new Ph))),s._onlineComponents}function L1(s){return hv(s).then((e=>e.syncEngine))}async function fv(s){const e=await hv(s),t=e.eventManager;return t.onListen=T1.bind(null,e.syncEngine),t.onUnlisten=I1.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=x1.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S1.bind(null,e.syncEngine),t}function j1(s,e,t={}){const i=new es;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,g,w){const T=new dv({next:O=>{T.Za(),d.enqueueAndForget((()=>tv(u,P)));const H=O.docs.has(m);!H&&O.fromCache?w.reject(new fe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&O.fromCache&&g&&g.source==="server"?w.reject(new fe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),P=new nv(tf(m.path),T,{includeMetadataChanges:!0,_a:!0});return ev(u,P)})(await fv(s),s.asyncQueue,e,t,i))),i.promise}function F1(s,e,t={}){const i=new es;return s.asyncQueue.enqueueAndForget((async()=>(function(u,d,m,g,w){const T=new dv({next:O=>{T.Za(),d.enqueueAndForget((()=>tv(u,P))),O.fromCache&&g.source==="server"?w.reject(new fe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),P=new nv(m,T,{includeMetadataChanges:!0,_a:!0});return ev(u,P)})(await fv(s),s.asyncQueue,e,t,i))),i.promise}function pv(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}const t0=new Map;function mv(s,e,t){if(!t)throw new fe(K.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function U1(s,e,t,i){if(e===!0&&i===!0)throw new fe(K.INVALID_ARGUMENT,`${s} and ${t} cannot be used together.`)}function n0(s){if(!we.isDocumentKey(s))throw new fe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function r0(s){if(we.isDocumentKey(s))throw new fe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function _f(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":Se()}function Nr(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new fe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_f(s);throw new fe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return s}class s0{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}U1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pv((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),(function(u){if(u.timeoutSeconds!==void 0){if(isNaN(u.timeoutSeconds))throw new fe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new fe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new fe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class hc{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s0(e),e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new nk;switch(i.type){case"firstParty":return new ok(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new fe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=t0.get(t);i&&(ce("ComponentProvider","Removing Datastore"),t0.delete(t),i.terminate())})(this),Promise.resolve()}}function B1(s,e,t,i={}){var o;const u=(s=Nr(s,hc))._getSettings(),d=`${e}:${t}`;if(u.host!=="firestore.googleapis.com"&&u.host!==d&&So("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},u),{host:d,ssl:!1})),i.mockUserToken){let m,g;if(typeof i.mockUserToken=="string")m=i.mockUserToken,g=sn.MOCK_USER;else{m=pw(i.mockUserToken,(o=s._app)===null||o===void 0?void 0:o.options.projectId);const w=i.mockUserToken.sub||i.mockUserToken.user_id;if(!w)throw new fe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new sn(w)}s._authCredentials=new rk(new dy(m,g))}}class fc{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new fc(this.firestore,e,this._query)}}class Sn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sn(this.firestore,e,this._key)}}class $s extends fc{constructor(e,t,i){super(e,t,tf(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new we(e))}withConverter(e){return new $s(this.firestore,e,this._path)}}function kr(s,e,...t){if(s=Qt(s),mv("collection","path",e),s instanceof hc){const i=ht.fromString(e,...t);return r0(i),new $s(s,null,i)}{if(!(s instanceof Sn||s instanceof $s))throw new fe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ht.fromString(e,...t));return r0(i),new $s(s.firestore,null,i)}}function kn(s,e,...t){if(s=Qt(s),arguments.length===1&&(e=hy.newId()),mv("doc","path",e),s instanceof hc){const i=ht.fromString(e,...t);return n0(i),new Sn(s,null,new we(i))}{if(!(s instanceof Sn||s instanceof $s))throw new fe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(ht.fromString(e,...t));return n0(i),new Sn(s.firestore,s instanceof $s?s.converter:null,new we(i))}}class i0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qy(this,"async_queue_retry"),this.Vu=()=>{const i=sh();i&&ce("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const t=sh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=sh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise((()=>{}));const t=new es;return this.gu((()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Pu.push(e),this.pu())))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ja(e))throw e;ce("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go((()=>this.pu()))}}gu(e){const t=this.mu.then((()=>(this.du=!0,e().catch((i=>{this.Eu=i,this.du=!1;const o=(function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m})(i);throw rs("INTERNAL UNHANDLED ERROR: ",o),i})).then((i=>(this.du=!1,i))))));return this.mu=t,t}enqueueAfterDelay(e,t,i){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const o=mf.createAndSchedule(this,e,t,i,(u=>this.yu(u)));return this.Tu.push(o),o}fu(){this.Eu&&Se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then((()=>{this.Tu.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()}))}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}class jo extends hc{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new i0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i0(e),this._firestoreClient=void 0,await e}}}function z1(s,e){const t=typeof s=="object"?s:T0(),i=typeof s=="string"?s:"(default)",o=jh(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=hw("firestore");u&&B1(o,...u)}return o}function wf(s){if(s._terminated)throw new fe(K.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||$1(s),s._firestoreClient}function $1(s){var e,t,i;const o=s._freezeSettings(),u=(function(m,g,w,T){return new _k(m,g,w,T.host,T.ssl,T.experimentalForceLongPolling,T.experimentalAutoDetectLongPolling,pv(T.experimentalLongPollingOptions),T.useFetchStreams)})(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,o);s._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=o.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(s._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),s._firestoreClient=new V1(s._authCredentials,s._appCheckCredentials,s._queue,u,s._componentsProvider&&(function(m){const g=m?._online.build();return{_offline:m?._offline.build(g),_online:g}})(s._componentsProvider))}class No{constructor(e){this._byteString=e}static fromBase64String(e){try{return new No(Yt.fromBase64String(e))}catch(t){throw new fe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new No(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class mc{constructor(e){this._methodName=e}}class Ef{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}}class Tf{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,e._values)}}const H1=/^__.*__$/;class W1{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Za(e,this.data,t,this.fieldTransforms)}}class gv{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yv(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class xf{constructor(e,t,i,o,u,d){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.vu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new xf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.Ou(e),o}Nu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.Fu({path:i,xu:!1});return o.vu(),o}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yv(this.Cu)&&H1.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class q1{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||uc(e)}Qu(e,t,i,o=!1){return new xf({Cu:e,methodName:t,qu:i,path:Kt.emptyPath(),xu:!1,ku:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vv(s){const e=s._freezeSettings(),t=uc(s._databaseId);return new q1(s._databaseId,!!e.ignoreUndefinedProperties,t)}function K1(s,e,t,i,o,u={}){const d=s.Qu(u.merge||u.mergeFields?2:0,e,t,o);If("Data must be an object, but it was:",d,i);const m=_v(i,d);let g,w;if(u.merge)g=new Mn(d.fieldMask),w=d.fieldTransforms;else if(u.mergeFields){const T=[];for(const P of u.mergeFields){const O=bh(e,P,t);if(!d.contains(O))throw new fe(K.INVALID_ARGUMENT,`Field '${O}' is specified in your field mask but missing from your input data.`);Ev(T,O)||T.push(O)}g=new Mn(T),w=d.fieldTransforms.filter((P=>g.covers(P.field)))}else g=null,w=d.fieldTransforms;return new W1(new In(m),g,w)}class gc extends mc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gc}}class kf extends mc{_toFieldTransform(e){return new Wk(e.path,new za)}isEqual(e){return e instanceof kf}}function G1(s,e,t,i){const o=s.Qu(1,e,t);If("Data must be an object, but it was:",o,i);const u=[],d=In.empty();bi(i,((g,w)=>{const T=Sf(e,g,t);w=Qt(w);const P=o.Nu(T);if(w instanceof gc)u.push(T);else{const O=yc(w,P);O!=null&&(u.push(T),d.set(T,O))}}));const m=new Mn(u);return new gv(d,m,o.fieldTransforms)}function Q1(s,e,t,i,o,u){const d=s.Qu(1,e,t),m=[bh(e,i,t)],g=[o];if(u.length%2!=0)throw new fe(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let O=0;O<u.length;O+=2)m.push(bh(e,u[O])),g.push(u[O+1]);const w=[],T=In.empty();for(let O=m.length-1;O>=0;--O)if(!Ev(w,m[O])){const H=m[O];let Y=g[O];Y=Qt(Y);const X=d.Nu(H);if(Y instanceof gc)w.push(H);else{const $=yc(Y,X);$!=null&&(w.push(H),T.set(H,$))}}const P=new Mn(w);return new gv(T,P,d.fieldTransforms)}function yc(s,e){if(wv(s=Qt(s)))return If("Unsupported field value:",e,s),_v(s,e);if(s instanceof mc)return(function(i,o){if(!yv(o.Cu))throw o.Bu(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Bu(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return(function(i,o){const u=[];let d=0;for(const m of i){let g=yc(m,o.Lu(d));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}})(s,e)}return(function(i,o){if((i=Qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return zk(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=bt.fromDate(i);return{timestampValue:Gu(o.serializer,u)}}if(i instanceof bt){const u=new bt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gu(o.serializer,u)}}if(i instanceof Ef)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof No)return{bytesValue:Ly(o.serializer,i._byteString)};if(i instanceof Sn){const u=o.databaseId,d=i.firestore._databaseId;if(!d.isEqual(u))throw o.Bu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:af(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof Tf)return(function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map((g=>{if(typeof g!="number")throw m.Bu("VectorValues must only contain numeric values.");return nf(m.serializer,g)}))}}}}}})(i,o);throw o.Bu(`Unsupported field value: ${_f(i)}`)})(s,e)}function _v(s,e){const t={};return fy(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):bi(s,((i,o)=>{const u=yc(o,e.Mu(i));u!=null&&(t[i]=u)})),{mapValue:{fields:t}}}function wv(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof bt||s instanceof Ef||s instanceof No||s instanceof Sn||s instanceof mc||s instanceof Tf)}function If(s,e,t){if(!wv(t)||!(function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)})(t)){const i=_f(t);throw i==="an object"?e.Bu(s+" a custom object"):e.Bu(s+" "+i)}}function bh(s,e,t){if((e=Qt(e))instanceof pc)return e._internalPath;if(typeof e=="string")return Sf(s,e);throw Xu("Field path arguments must be of type string or ",s,!1,void 0,t)}const Y1=new RegExp("[~\\*/\\[\\]]");function Sf(s,e,t){if(e.search(Y1)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,t);try{return new pc(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,t)}}function Xu(s,e,t,i,o){const u=i&&!i.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${i}`),d&&(g+=` in document ${o}`),g+=")"),new fe(K.INVALID_ARGUMENT,m+s+g)}function Ev(s,e){return s.some((t=>t.isEqual(e)))}class Tv{constructor(e,t,i,o,u){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new X1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xv("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class X1 extends Tv{data(){return super.data()}}function xv(s,e){return typeof e=="string"?Sf(s,e):e instanceof pc?e._internalPath:e._delegate._internalPath}function J1(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new fe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z1{convertValue(e,t="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ci(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return bi(e,((o,u)=>{i[o]=this.convertValue(u,t)})),i}convertVectorValue(e){var t,i,o;const u=(o=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||o===void 0?void 0:o.map((d=>Tt(d.doubleValue)));return new Tf(u)}convertGeoPoint(e){return new Ef(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Xh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Fa(e));default:return null}}convertTimestamp(e){const t=Ws(e);return new bt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ht.fromString(e);nt($y(i));const o=new Ua(i.get(1),i.get(3)),u=new we(i.popFirst(5));return o.isEqual(t)||rs(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function eS(s,e,t){let i;return i=s?t&&(t.merge||t.mergeFields)?s.toFirestore(e,t):s.toFirestore(e):e,i}class Ra{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kv extends Tv{constructor(e,t,i,o,u,d){super(e,t,i,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(xv("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Du extends kv{data(e={}){return super.data(e)}}class tS{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ra(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Du(this._firestore,this._userDataWriter,i.key,i,new Ra(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new Du(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ra(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Du(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ra(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let w=-1,T=-1;return m.type!==0&&(w=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),T=d.indexOf(m.doc.key)),{type:nS(m.type),doc:g,oldIndex:w,newIndex:T}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function nS(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Se()}}function rS(s){s=Nr(s,Sn);const e=Nr(s.firestore,jo);return j1(wf(e),s._key).then((t=>sS(e,s,t)))}class Iv extends Z1{constructor(e){super(),this.firestore=e}convertBytes(e){return new No(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}}function xu(s){s=Nr(s,fc);const e=Nr(s.firestore,jo),t=wf(e),i=new Iv(e);return J1(s._query),F1(t,s._query).then((o=>new tS(e,i,s,o)))}function Os(s,e,t){s=Nr(s,Sn);const i=Nr(s.firestore,jo),o=eS(s.converter,e,t);return Af(i,[K1(vv(i),"setDoc",s._key,o,s.converter!==null,t).toMutation(s._key,hr.none())])}function oh(s,e,t,...i){s=Nr(s,Sn);const o=Nr(s.firestore,jo),u=vv(o);let d;return d=typeof(e=Qt(e))=="string"||e instanceof pc?Q1(u,"updateDoc",s._key,e,t,i):G1(u,"updateDoc",s._key,e),Af(o,[d.toMutation(s._key,hr.exists(!0))])}function ah(s){return Af(Nr(s.firestore,jo),[new rf(s._key,hr.none())])}function Af(s,e){return(function(i,o){const u=new es;return i.asyncQueue.enqueueAndForget((async()=>A1(await L1(i),o,u))),u.promise})(wf(s),e)}function sS(s,e,t){const i=t.docs.get(e._key),o=new Iv(s);return new kv(s,o,e._key,i,new Ra(t.hasPendingWrites,t.fromCache),e.converter)}function dr(){return new kf("serverTimestamp")}(function(e,t=!0){(function(o){Vo=o})(Do),Io(new Ii("firestore",((i,{instanceIdentifier:o,options:u})=>{const d=i.getProvider("app").getImmediate(),m=new jo(new sk(i.getProvider("auth-internal")),new lk(i.getProvider("app-check-internal")),(function(w,T){if(!Object.prototype.hasOwnProperty.apply(w.options,["projectId"]))throw new fe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ua(w.options.projectId,T)})(d,o),d);return u=Object.assign({useFetchStreams:t},u),m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),zs(kg,"4.7.3",e),zs(kg,"4.7.3","esm2017")})();const iS={apiKey:"AIzaSyBjCYP_kqxflfLEj0tdxExF9NRv9EUgkn8",authDomain:"property-tracker-d44a0.firebaseapp.com",projectId:"property-tracker-d44a0",storageBucket:"property-tracker-d44a0.firebasestorage.app",messagingSenderId:"110428888734",appId:"1:110428888734:web:c7191afeabe83bd968a58f",measurementId:"G-5ER3RSQLXS"},Sv=E0(iS),Oa=ek(Sv),jt=z1(Sv),Xe=s=>!s&&s!==0?"0":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(s),Ta=s=>{if(!s)return"-";try{return new Date(s).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"2-digit"})}catch{return s}},oS=({darkMode:s,setDarkMode:e})=>v.jsx("button",{onClick:()=>e(!s),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-800 rounded-xl transition-colors",title:s?"Light Mode":"Dark Mode",children:s?v.jsx(ew,{className:"w-5 h-5"}):v.jsx(Y_,{className:"w-5 h-5"})}),go=({title:s,value:e,subtext:t,icon:i,variant:o="default",onClick:u,className:d=""})=>{const m={default:"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 text-slate-800 dark:text-slate-100",primary:"bg-indigo-600 border-indigo-500 text-white",dark:"bg-slate-900 border-slate-800 text-white",success:"bg-emerald-50 dark:bg-emerald-900/20 border-emerald-100 dark:border-emerald-800 text-emerald-900 dark:text-emerald-100",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-100 dark:border-amber-800 text-amber-900 dark:text-amber-100"};return v.jsxs("div",{onClick:u,className:`p-5 rounded-3xl shadow-[0_2px_10px_rgba(0,0,0,0.03)] dark:shadow-[0_2px_10px_rgba(0,0,0,0.3)] border transition-all duration-300 hover:shadow-[0_8px_30px_rgba(0,0,0,0.06)] dark:hover:shadow-[0_8px_30px_rgba(0,0,0,0.4)] flex flex-col justify-between h-full relative overflow-hidden ${m[o]} ${d} ${u?"cursor-pointer":""}`,children:[v.jsxs("div",{className:"relative z-10",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-3 opacity-80",children:[i&&v.jsx(i,{className:"w-4 h-4"}),v.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:s})]}),v.jsx("div",{className:"text-2xl font-bold tracking-tight",children:e}),t&&v.jsx("div",{className:"text-xs mt-1 opacity-70 font-medium",children:t})]}),i&&v.jsx(i,{className:"absolute -bottom-4 -right-4 w-24 h-24 opacity-[0.05] pointer-events-none"})]})},o0=({label:s,original:e,current:t,unit:i="",color:o="bg-indigo-500"})=>{const u=Math.max(e,t),d=u>0?e/u*100:0,m=u>0?t/u*100:0;return v.jsxs("div",{className:"space-y-2",children:[v.jsxs("div",{className:"flex justify-between text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:[v.jsx("span",{children:s}),e>t&&v.jsxs("span",{className:"text-emerald-600 dark:text-emerald-400",children:["Saved: ",i===""?Xe(e-t):(e-t).toFixed(0)+" "+i]})]}),v.jsxs("div",{className:"space-y-1",children:[v.jsxs("div",{className:"relative h-6 bg-slate-100 dark:bg-slate-700 rounded-md overflow-hidden flex items-center",children:[v.jsx("div",{style:{width:`${d}%`},className:"absolute h-full bg-slate-300 dark:bg-slate-600 rounded-r-md"}),v.jsxs("span",{className:"relative z-10 text-[10px] font-bold text-slate-600 dark:text-slate-300 pl-2",children:["Current: ",i===""?Xe(e):e.toFixed(0)+" "+i]})]}),v.jsxs("div",{className:"relative h-6 bg-slate-50 dark:bg-slate-800 rounded-md overflow-hidden flex items-center",children:[v.jsx("div",{style:{width:`${m}%`},className:`absolute h-full ${o} rounded-r-md transition-all duration-500 ease-out`}),v.jsxs("span",{className:`relative z-10 text-[10px] font-bold pl-2 ${m>50?"text-white":"text-slate-800 dark:text-slate-200"}`,children:["New: ",i===""?Xe(t):t.toFixed(0)+" "+i]})]})]})]})},a0=({title:s,total:e,items:t,icon:i,bgClass:o="bg-white dark:bg-slate-800",borderClass:u="border-slate-100 dark:border-slate-700"})=>v.jsxs("div",{className:`p-6 rounded-[2rem] border ${u} shadow-[0_2px_10px_rgba(0,0,0,0.02)] dark:shadow-[0_2px_10px_rgba(0,0,0,0.3)] flex flex-col justify-between h-full ${o} relative overflow-hidden group hover:shadow-lg transition-all duration-300`,children:[v.jsxs("div",{className:"relative z-10",children:[v.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[v.jsx("div",{className:"p-2 rounded-xl bg-white/80 dark:bg-slate-700/80 backdrop-blur-sm shadow-sm border border-slate-100/50 dark:border-slate-600/50",children:v.jsx(i,{className:"w-4 h-4 text-slate-600 dark:text-slate-300"})}),v.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-slate-500 dark:text-slate-400",children:s})]}),v.jsx("div",{className:"space-y-3",children:t.map((d,m)=>v.jsxs("div",{className:"flex justify-between text-sm items-center border-b border-slate-50 dark:border-slate-700 last:border-0 pb-1.5 last:pb-0",children:[v.jsx("span",{className:"text-slate-500 dark:text-slate-400 font-medium text-xs md:text-sm",children:d.label}),v.jsx("span",{className:"font-bold text-slate-700 dark:text-slate-200 font-mono text-xs md:text-sm",children:d.value})]},m))})]}),v.jsxs("div",{className:"mt-5 pt-4 border-t border-slate-200/50 dark:border-slate-700/50 flex justify-between items-end",children:[v.jsx("span",{className:"text-[10px] font-bold uppercase text-slate-400 dark:text-slate-500 tracking-widest",children:"Total"}),v.jsx("span",{className:"text-lg font-bold text-slate-800 dark:text-slate-100",children:e})]}),v.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-[0.03] dark:opacity-[0.06] group-hover:opacity-[0.06] dark:group-hover:opacity-[0.1] transition-opacity transform rotate-12 scale-150 pointer-events-none",children:v.jsx(i,{className:"w-32 h-32"})})]}),lh=({status:s})=>{const e={paid:"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800",received:"bg-emerald-100 dark:bg-emerald-900/40 text-emerald-700 dark:text-emerald-300 border-emerald-200 dark:border-emerald-800",pending:"bg-slate-100 dark:bg-slate-800 text-slate-500 dark:text-slate-400 border-slate-200 dark:border-slate-700",partial:"bg-amber-100 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800",na:"bg-slate-50 dark:bg-slate-900 text-slate-400 dark:text-slate-500 border-slate-100 dark:border-slate-800"},t={paid:"Paid",received:"Received",pending:"Pending",partial:"Partial",na:"N/A"};return v.jsxs("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-wide border ${e[s]||e.pending} flex items-center gap-1 w-fit`,children:[(s==="paid"||s==="received")&&v.jsx(c0,{className:"w-3 h-3"}),t[s]||s]})},aS=({activeTab:s,setActiveTab:e})=>{const t=[{id:"schedule",icon:Dh,label:"Schedule"},{id:"loan",icon:Ou,label:"Finance"},{id:"bank_plan",icon:Vh,label:"Bank"},{id:"docs",icon:Oh,label:"Docs"}];return v.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white/90 dark:bg-slate-900/90 backdrop-blur-xl border-t border-slate-200 dark:border-slate-700 pb-safe z-50 safe-area-bottom no-print",children:v.jsx("div",{className:"flex justify-around items-center p-2",children:t.map(i=>v.jsxs("button",{onClick:()=>e(i.id),className:`flex flex-col items-center gap-1 p-2 rounded-2xl transition-all duration-300 w-16 ${s===i.id?"text-indigo-600 bg-indigo-50 dark:bg-indigo-900/40":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300"}`,children:[v.jsx(i.icon,{className:`w-5 h-5 ${s===i.id?"fill-current":""}`}),v.jsx("span",{className:"text-[10px] font-medium",children:i.label})]},i.id))})})},lS=({activeTab:s,setActiveTab:e})=>v.jsx("div",{className:"hidden md:flex bg-slate-100/80 dark:bg-slate-800/80 p-1.5 rounded-2xl border border-slate-200/50 dark:border-slate-700/50 backdrop-blur-sm",children:[{id:"schedule",icon:Dh,label:"Schedule"},{id:"loan",icon:Ou,label:"Finance"},{id:"bank_plan",icon:Vh,label:"Bank"},{id:"docs",icon:Oh,label:"Documents"}].map(t=>v.jsxs("button",{onClick:()=>e(t.id),className:`flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-semibold transition-all duration-300 ${s===t.id?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-sm shadow-slate-200 dark:shadow-slate-900":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 hover:bg-slate-200/50 dark:hover:bg-slate-700/50"}`,children:[v.jsx(t.icon,{className:"w-4 h-4"}),t.label]},t.id))}),ku=({isOpen:s,onClose:e,title:t,children:i})=>s?v.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end md:items-center justify-center sm:p-4 no-print animate-in fade-in duration-200",children:[v.jsx("div",{className:"absolute inset-0 bg-slate-900/30 dark:bg-slate-950/60 backdrop-blur-sm transition-opacity",onClick:e}),v.jsxs("div",{className:"relative w-full max-w-lg bg-white dark:bg-slate-800 rounded-t-3xl md:rounded-3xl shadow-2xl transform transition-all animate-in slide-in-from-bottom-full md:slide-in-from-bottom-10 duration-300 max-h-[90vh] overflow-y-auto",children:[v.jsxs("div",{className:"sticky top-0 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md z-10 px-6 py-4 border-b border-slate-100 dark:border-slate-700 flex justify-between items-center rounded-t-3xl",children:[v.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:t}),v.jsx("button",{onClick:e,className:"p-2 bg-slate-100 dark:bg-slate-700 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600",children:v.jsx(h0,{className:"w-4 h-4"})})]}),v.jsx("div",{className:"p-6",children:i})]})]}):null,uS=({data:s,size:e=120})=>{const t=s.reduce((o,u)=>o+u.value,0);let i=0;return t===0?v.jsx("div",{className:"flex items-center justify-center text-xs text-slate-400 h-full w-full bg-slate-50 dark:bg-slate-800 rounded-full",children:"No Data"}):v.jsx("div",{className:"relative flex items-center justify-center",children:v.jsxs("svg",{width:e,height:e,viewBox:"0 0 100 100",className:"transform -rotate-90",children:[s.map((o,u)=>{const d=o.value/t*360,m=50+40*Math.cos(Math.PI*i/180),g=50+40*Math.sin(Math.PI*i/180),w=50+40*Math.cos(Math.PI*(i+d)/180),T=50+40*Math.sin(Math.PI*(i+d)/180),P=d>180?1:0,O=t===o.value?"M 50 10 m 0 40 a 40 40 0 1 0 0 -80 a 40 40 0 1 0 0 80":`M 50 50 L ${m} ${g} A 40 40 0 ${P} 1 ${w} ${T} Z`;return i+=d,v.jsx("path",{d:O,fill:o.color,stroke:"white",strokeWidth:"2"},u)}),v.jsx("circle",{cx:"50",cy:"50",r:"25",fill:"white",className:"dark:fill-slate-800"})]})})},cS=({data:s})=>!s||s.length===0?v.jsx("div",{className:"w-full h-40 flex items-center justify-center text-xs text-slate-400 bg-white dark:bg-slate-800 rounded-[2rem] border border-slate-100 dark:border-slate-700",children:"No payment history found"}):v.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-sm border border-slate-100 dark:border-slate-700 h-full flex flex-col",children:[v.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-4 flex items-center gap-2 text-sm",children:[v.jsx(u0,{className:"w-4 h-4 text-indigo-500"})," Annual Payment Summary"]}),v.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 custom-scrollbar max-h-[180px]",children:[...s].sort((e,t)=>t.label.localeCompare(e.label)).map((e,t)=>v.jsxs("div",{className:"flex justify-between items-center p-3 bg-slate-50/50 dark:bg-slate-700/50 rounded-xl border border-slate-100 dark:border-slate-600 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[v.jsx("span",{className:"text-sm font-medium text-slate-600 dark:text-slate-300",children:e.label}),v.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-100 font-mono",children:e.formattedValue})]},t))})]}),dS=({darkMode:s})=>{const[e,t]=De.useState(!1),[i,o]=De.useState(!1),[u,d]=De.useState(""),[m,g]=De.useState(""),[w,T]=De.useState({type:"",text:""}),[P,O]=De.useState(!1),H=async X=>{X.preventDefault(),t(!0),T({type:"",text:""});try{i?(await jT(Oa,u,m),T({type:"success",text:"Account created successfully!"})):await FT(Oa,u,m)}catch($){let Ee="An error occurred";$.code==="auth/email-already-in-use"?Ee="Email already in use":$.code==="auth/invalid-email"?Ee="Invalid email address":$.code==="auth/weak-password"?Ee="Password should be at least 6 characters":($.code==="auth/user-not-found"||$.code==="auth/wrong-password")&&(Ee="Invalid email or password"),T({type:"error",text:Ee})}finally{t(!1)}},Y=async()=>{if(!u){T({type:"error",text:"Please enter your email address"});return}try{await LT(Oa,u),T({type:"success",text:"Password reset email sent!"})}catch{T({type:"error",text:"Failed to send reset email"})}};return v.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex flex-col justify-center items-center p-4 transition-colors",children:v.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-xl p-8 border border-slate-100 dark:border-slate-700",children:[v.jsxs("div",{className:"text-center mb-8",children:[v.jsx("div",{className:"inline-flex p-3 rounded-2xl bg-indigo-600 text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50 mb-4",children:v.jsx(l0,{className:"w-8 h-8"})}),v.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"Property Tracker"}),v.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-sm mt-1",children:i?"Create Account":"Secure Login"})]}),v.jsxs("form",{onSubmit:H,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Email"}),v.jsxs("div",{className:"relative",children:[v.jsx(Q_,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),v.jsx("input",{type:"email",required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500 text-slate-800 dark:text-slate-100",value:u,onChange:X=>d(X.target.value)})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-1 block",children:"Password"}),v.jsxs("div",{className:"relative",children:[v.jsx(K_,{className:"absolute left-3 top-3 w-4 h-4 text-slate-400"}),v.jsx("input",{type:P?"text":"password",required:!0,className:"w-full pl-10 pr-12 py-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-500 text-slate-800 dark:text-slate-100",value:m,onChange:X=>g(X.target.value)}),v.jsx("button",{type:"button",onClick:()=>O(!P),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600",children:P?v.jsx($_,{className:"w-4 h-4"}):v.jsx(H_,{className:"w-4 h-4"})})]})]}),w.text&&v.jsx("div",{className:`p-3 rounded-xl text-xs ${w.type==="error"?"bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300":"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-300"}`,children:w.text}),v.jsxs("button",{disabled:e,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3.5 rounded-xl transition-all shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50 flex justify-center items-center gap-2 disabled:opacity-50",children:[e&&v.jsx(d0,{className:"w-4 h-4 animate-spin"}),i?"Sign Up":"Login"]}),v.jsxs("div",{className:"flex justify-between items-center text-xs",children:[v.jsx("button",{type:"button",onClick:()=>o(!i),className:"text-indigo-600 dark:text-indigo-400 hover:underline",children:i?"Already have account?":"Create account"}),!i&&v.jsx("button",{type:"button",onClick:Y,className:"text-slate-500 dark:text-slate-400 hover:underline",children:"Forgot password?"})]})]})]})})},hS=()=>{const[s,e]=De.useState(null),[t,i]=De.useState(!0),[o,u]=De.useState(()=>{const A=localStorage.getItem("darkMode");return A?JSON.parse(A):!1}),[d,m]=De.useState("schedule"),[g,w]=De.useState(""),[T,P]=De.useState(""),[O,H]=De.useState("lumpsum"),[Y,X]=De.useState([{id:"allotment",label:"Allotment Letter",status:"pending"},{id:"agreement",label:"Registered Agreement",status:"pending"},{id:"index2",label:"Index II Document",status:"pending"},{id:"receipts",label:"All Payment Receipts",status:"pending"},{id:"sanction",label:"Loan Sanction Letter",status:"pending"},{id:"noc",label:"Builder NOC",status:"pending"},{id:"possession",label:"Possession Letter",status:"pending"}]),[$,Ee]=De.useState({}),[me,xe]=De.useState([]),[ke,Je]=De.useState([]),[Ae,b]=De.useState(null),[x,S]=De.useState({date:"",receipt:"",amount:""}),[R,D]=De.useState({type:"emi",date:"",amount:"",notes:""}),[M,I]=De.useState(null),[ft,vt]=De.useState(!1),[Nt,He]=De.useState(!1),[te,pe]=De.useState(!1),[re,V]=De.useState(null),[B,ie]=De.useState({date:"",type:"emi",emi:"",amount:"",interest:"",principal:"",roi:"",balance:""}),[be,Pe]=De.useState(!1),Ve=44e5,Ue=.06,We=4e4,rt=123600,xt=103e3;De.useEffect(()=>{localStorage.setItem("darkMode",JSON.stringify(o)),o?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[o]),De.useEffect(()=>{const A=zT(Oa,ee=>{e(ee),i(!1)});return()=>A()},[]),De.useEffect(()=>{if(!s)return;(async()=>{try{const ee=kr(jt,"users",s.uid,"payments"),de=await xu(ee),ae={};de.forEach(Ze=>{const et=Ze.data();ae[et.stage_id]={dbId:Ze.id,paidAmount:et.amount,date:et.payment_date,receipt:et.receipt_number}}),Ee(ae);const ge=kr(jt,"users",s.uid,"transactions"),ne=await xu(ge),ye=[];ne.forEach(Ze=>{ye.push({id:Ze.id,...Ze.data()})}),xe(ye);const Ke=kr(jt,"users",s.uid,"bankEntries"),Le=await xu(Ke),st=[];Le.forEach(Ze=>{st.push({id:Ze.id,...Ze.data()})}),Je(st.sort((Ze,et)=>new Date(Ze.date)-new Date(et.date)));const Be=kn(jt,"users",s.uid,"settings","main"),Ne=await rS(Be);if(Ne.exists()){const Ze=Ne.data();Ze.checklist&&X(et=>et.map(Dt=>({...Dt,status:Ze.checklist[Dt.id]||"pending"})))}}catch(ee){console.error("Error loading data:",ee)}})()},[s]);const Ut=Ve,Qn=.01,An=Ut*Qn,Xt=Ut*Ue,ln=We,mn=rt+xt,Dr=De.useMemo(()=>me.filter(A=>A.type==="incidental").reduce((A,ee)=>A+(parseFloat(ee.amount)||0),0),[me]),Ln=Ut+An+Xt+ln+mn+Dr,ls=[{label:"Booking",cumulative:5},{label:"On execution of Sales Agreement",cumulative:10},{label:"Payment within 15 Days After Registration",cumulative:30},{label:"Plinth",cumulative:45},{label:"1st Slab",cumulative:49},{label:"3rd Slab",cumulative:53},{label:"5th Slab",cumulative:57},{label:"7th Slab",cumulative:61},{label:"9th Slab",cumulative:65},{label:"11th Slab",cumulative:69},{label:"13th Slab",cumulative:73},{label:"15th Slab",cumulative:77},{label:"17th Slab",cumulative:81},{label:"19th Slab",cumulative:85},{label:"On Bricks work",cumulative:90},{label:"On Plaster Flooring",cumulative:95},{label:"On 100% Completion",cumulative:100}],Jt=De.useMemo(()=>{let A=0;const ee=ls.map((ye,Ke)=>{const Le=Ke+1,st=ye.cumulative-A,Be=Ut*st/100,Ne=Be*Qn,Ze=Be+Ne;A=ye.cumulative;const et=$[Le]||{},Dt=parseFloat(et.paidAmount)||0,jn=Ze-Dt;let Fn="pending";return Dt>=Ze-1?Fn="paid":Dt>0&&(Fn="partial"),{id:Le,label:ye.label,type:"construction",stagePercent:parseFloat(st.toFixed(2)),totalPayable:Ze,record:et,paidAmount:Dt,balance:jn,status:Fn}}),de={id:101,label:"Stamp Duty (6%)",type:"tax",stagePercent:0,totalPayable:Xt,record:$[101]||{},paidAmount:parseFloat($[101]?.paidAmount)||0,balance:Xt-(parseFloat($[101]?.paidAmount)||0),status:(parseFloat($[101]?.paidAmount)||0)>=Xt-1?"paid":"pending"},ae={id:102,label:"Registration",type:"tax",stagePercent:0,totalPayable:ln,record:$[102]||{},paidAmount:parseFloat($[102]?.paidAmount)||0,balance:ln-(parseFloat($[102]?.paidAmount)||0),status:(parseFloat($[102]?.paidAmount)||0)>=ln-1?"paid":"pending"},ge={id:103,label:"Maint. + Corpus",type:"possession",stagePercent:0,totalPayable:mn,record:$[103]||{},paidAmount:parseFloat($[103]?.paidAmount)||0,balance:mn-(parseFloat($[103]?.paidAmount)||0),status:(parseFloat($[103]?.paidAmount)||0)>=mn-1?"paid":"pending"},ne=[...ee];return ne.splice(3,0,de,ae),ne.push(ge),ne},[Ut,Qn,$,Xt,ln,mn]),Rn=Jt.reduce((A,ee)=>A+(parseFloat(ee.paidAmount)||0),0),us=Ln>0?Rn/Ln*100:0,Bt=De.useMemo(()=>{const A=me.filter(Be=>Be.type==="disbursement"),ee=me.filter(Be=>Be.type==="own"),de=me.filter(Be=>Be.type==="emi"),ae=A.reduce((Be,Ne)=>Be+(parseFloat(Ne.amount)||0),0),ge=ee.reduce((Be,Ne)=>Be+(parseFloat(Ne.amount)||0),0),ne=de.reduce((Be,Ne)=>Be+(parseFloat(Ne.amount)||0),0),ye=ae+ge,Ke=Ln-ye,Le={};de.forEach(Be=>{const Ne=Be.transaction_date||Be.date;if(!Ne)return;const Ze=new Date(Ne),et=Ze.getMonth(),Dt=Ze.getFullYear(),jn=et>=3?Dt:Dt-1,Fn=(jn+1).toString().slice(-2),cn=`FY ${jn}-${Fn}`;Le[cn]||(Le[cn]=0),Le[cn]+=parseFloat(Be.amount)||0});const st=Object.keys(Le).sort().map(Be=>({label:Be,value:Le[Be],formattedValue:Xe(Le[Be])}));return{totalDisbursed:ae,totalOwn:ge,totalEmiPaid:ne,byFY:Le,balanceDue:Ke,totalPaidTowardsCost:ye,chartData:st}},[me,Ln]),un=De.useMemo(()=>{if(ke.length===0)return{currentEMI:0,projectedEMI:0,currentROI:0,tenureEnd:"-",currentPrincipal:0};const A=new Date,ee=[...ke].sort((ye,Ke)=>new Date(ye.date)-new Date(Ke.date)),de=ee.filter(ye=>new Date(ye.date)<=A).pop()||ee[0],ae=ee.filter(ye=>new Date(ye.date)>A&&ye.type==="emi"),ge=ae.length>0?Math.max(...ae.map(ye=>ye.emi||ye.amount)):0,ne=ee[ee.length-1];return{currentEMI:de.emi||de.amount||0,projectedEMI:ge,currentROI:de.roi||0,tenureEnd:ne?Ta(ne.date):"-",currentPrincipal:de.balance||0}},[ke]),Yn=De.useMemo(()=>{const A=un.currentPrincipal,ee=un.currentROI,de=un.currentEMI;if(A<=0||ee<=0||de<=0)return null;const ae=ee/100/12;let ge=0;if(A*ae>=de)return null;ge=-Math.log(1-A*ae/de)/Math.log(1+ae);const ne=ge*de-A;let ye=0,Ke=0;if(O==="lumpsum"){const Le=parseFloat(g)||0;if(Le<=0||Le>=A)return{originalInterest:ne,newInterest:ne,originalTenure:ge,newTenure:ge};ye=-Math.log(1-(A-Le)*ae/de)/Math.log(1+ae),Ke=ye*de-(A-Le)}else{const Le=parseFloat(T)||0;let st=A,Be=de,Ne=0;if(Le<=0)ye=ge,Ke=ne;else{for(;st>0&&Ne<600;){const Ze=st*ae;let et=Be-Ze;if(et<=0)break;if(st<et){Ke+=st*ae,Ne++,st=0;break}st-=et,Ke+=Ze,Ne++,Ne%12===0&&(Be=Be*(1+Le/100))}ye=Ne}}return ye===0||ye===1/0?null:{originalInterest:ne,newInterest:Math.max(0,Ke),originalTenure:ge,newTenure:ye}},[un,g,T,O]),_t=async()=>{if(!(!s||!Ae))try{const A=$[Ae],ee={stage_id:Ae,amount:parseFloat(x.amount),payment_date:x.date,receipt_number:x.receipt,updated_at:dr()};if(A?.dbId){const de=kn(jt,"users",s.uid,"payments",A.dbId);await oh(de,ee),Ee(ae=>({...ae,[Ae]:{...A,paidAmount:x.amount,date:x.date,receipt:x.receipt}}))}else{const de=kr(jt,"users",s.uid,"payments"),ae=kn(de);await Os(ae,{...ee,created_at:dr()}),Ee(ge=>({...ge,[Ae]:{dbId:ae.id,paidAmount:x.amount,date:x.date,receipt:x.receipt}}))}b(null)}catch(A){console.error("Error saving payment:",A),alert("Failed to save payment")}},wt=async()=>{if(!(!s||!R.date||!R.amount))try{const A={type:R.type,amount:parseFloat(R.amount),transaction_date:R.date,date:R.date,notes:R.notes,updated_at:dr()};if(M){const ee=kn(jt,"users",s.uid,"transactions",M);await oh(ee,A),xe(de=>de.map(ae=>ae.id===M?{...ae,...A}:ae)),I(null)}else{const ee=kr(jt,"users",s.uid,"transactions"),de=kn(ee);await Os(de,{...A,created_at:dr()}),xe(ae=>[...ae,{id:de.id,...A}])}D({type:"emi",date:"",amount:"",notes:""}),vt(!1)}catch(A){console.error("Error saving transaction:",A),alert("Failed to save transaction")}},Xn=async A=>{if(s)try{const ee=kn(jt,"users",s.uid,"transactions",A);await ah(ee),xe(de=>de.filter(ae=>ae.id!==A))}catch(ee){console.error("Error deleting transaction:",ee),alert("Failed to delete transaction")}},Qs=async(A,ee)=>{if(!s)return;const de=ee==="pending"?"received":ee==="received"?"na":"pending",ae=Y.map(ge=>ge.id===A?{...ge,status:de}:ge);X(ae);try{const ge=ae.reduce((ye,Ke)=>({...ye,[Ke.id]:Ke.status}),{}),ne=kn(jt,"users",s.uid,"settings","main");await Os(ne,{checklist:ge,updated_at:dr()},{merge:!0})}catch(ge){console.error("Error updating checklist:",ge)}},pr=async()=>{if(s)try{const A={date:B.date,type:B.type,amount:parseFloat(B.amount)||0,interest:parseFloat(B.interest)||0,principal:parseFloat(B.principal)||0,roi:parseFloat(B.roi)||0,balance:parseFloat(B.balance)||0,emi:B.type==="emi"&&(parseFloat(B.emi)||parseFloat(B.amount))||0,updated_at:dr()};if(re){const ee=kn(jt,"users",s.uid,"bankEntries",re);await oh(ee,A),Je(de=>de.map(ae=>ae.id===re?{...ae,...A}:ae))}else{const ee=kr(jt,"users",s.uid,"bankEntries"),de=kn(ee);await Os(de,{...A,created_at:dr()}),Je(ae=>[...ae,{id:de.id,...A}].sort((ge,ne)=>new Date(ge.date)-new Date(ne.date)))}V(null),Pe(!1),ie({date:"",type:"emi",emi:"",amount:"",interest:"",principal:"",roi:"",balance:""})}catch(A){console.error("Error saving bank entry:",A),alert("Failed to save bank entry")}},Or=A=>{V(A.id),ie({date:A.date,type:A.type,amount:A.type==="disb"?A.amount:A.emi||A.amount,emi:A.emi||"",interest:A.interest||"",principal:A.principal||"",roi:A.roi||"",balance:A.balance||""}),Pe(!0)},Vr=async A=>{if(s)try{const ee=kn(jt,"users",s.uid,"bankEntries",A);await ah(ee),Je(de=>de.filter(ae=>ae.id!==A))}catch(ee){console.error("Error deleting bank entry:",ee),alert("Failed to delete entry")}},Ys=async()=>{if(s&&window.confirm("Are you sure you want to delete ALL bank entries? This cannot be undone."))try{const A=kr(jt,"users",s.uid,"bankEntries"),de=(await xu(A)).docs.map(ae=>ah(ae.ref));await Promise.all(de),Je([])}catch(A){console.error("Error deleting all entries:",A),alert("Failed to delete entries")}},Xs=async()=>{try{await $T(Oa)}catch(A){console.error("Logout error:",A)}},Js=()=>{const A=ne=>{if(ne==null)return"";const ye=String(ne);return ye.includes(",")||ye.includes('"')||ye.includes(`
`)?`"${ye.replace(/"/g,'""')}"`:ye},ee=[];ee.push(["SUMMARY","Agreement Value",A(Ut),"",""]),ee.push(["SUMMARY","Govt Taxes (GST+Stamp+Reg)",A(An+Xt+ln),"",""]),ee.push(["SUMMARY","Possession Charges",A(mn),"",""]),ee.push(["SUMMARY","Incidental/Extras",A(Dr),"",""]),ee.push(["SUMMARY","Total Cost of Ownership",A(Ln),"",""]),ee.push(["SUMMARY","Total Paid So Far",A(Rn),"",""]),ee.push([]),ee.push(["PAYMENT SCHEDULE","Stage","Payable","Paid Amount","Payment Date","Balance"]),Jt.forEach(ne=>{ee.push(["SCHEDULE",A(ne.label),A(ne.totalPayable),A(ne.paidAmount>0?ne.paidAmount:"0"),A(ne.record.date||"-"),A(ne.balance<=1?"0":ne.balance)])}),ee.push([]),ee.push(["FINANCE HISTORY","Type","Amount","Date","Notes"]),me.sort((ne,ye)=>new Date(ne.date||ne.transaction_date)-new Date(ye.date||ye.transaction_date)).forEach(ne=>{ee.push(["TRANSACTION",A(ne.type),A(ne.amount),A(Ta(ne.transaction_date||ne.date)),A(ne.notes||"")])}),ee.push([]),ee.push(["DOCUMENT CHECKLIST","Document Name","Status"]),Y.forEach(ne=>{ee.push(["DOC",A(ne.label),A(ne.status)])}),ee.push([]),ke.length>0&&(ee.push(["BANK AMORTIZATION","Date","Type","Amount/EMI","Interest","Principal","Balance","ROI"]),ke.forEach(ne=>{ee.push(["AMORTIZATION",A(Ta(ne.date)),A(ne.type==="disb"?"Disbursement":"EMI"),A(ne.type==="disb"?ne.amount:ne.emi||ne.amount),A(ne.interest||0),A(ne.principal||0),A(ne.balance||0),A(ne.roi||0)])}));const de="data:text/csv;charset=utf-8,"+ee.map(ne=>ne.join(",")).join(`
`),ae=encodeURI(de),ge=document.createElement("a");ge.setAttribute("href",ae),ge.setAttribute("download",`Property_Report_${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(ge),ge.click(),document.body.removeChild(ge)},Zs=async()=>{if(!s)return;const A={paymentRecords:$,bankTransactions:me,bankEntries:ke,docsList:Y,exportDate:new Date().toISOString()},ee=new Blob([JSON.stringify(A,null,2)],{type:"application/json"}),de=URL.createObjectURL(ee),ae=document.createElement("a");ae.href=de,ae.download=`property_tracker_backup_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ae),ae.click(),document.body.removeChild(ae),He(!1)},ei=async A=>{if(!s||!A.target.files[0])return;if(!window.confirm("WARNING: This will merge the backup data with your current data. Continue?")){A.target.value=null;return}const ee=A.target.files[0],de=new FileReader;de.onload=async ae=>{try{const ge=JSON.parse(ae.target.result);if(ge.bankTransactions&&Array.isArray(ge.bankTransactions)){const ne=kr(jt,"users",s.uid,"transactions");for(const ye of ge.bankTransactions){const{id:Ke,...Le}=ye,st=kn(ne);await Os(st,{...Le,created_at:dr()})}}if(ge.bankEntries&&Array.isArray(ge.bankEntries)){const ne=kr(jt,"users",s.uid,"bankEntries");for(const ye of ge.bankEntries){const{id:Ke,...Le}=ye,st=kn(ne);await Os(st,{...Le,created_at:dr()})}}if(ge.docsList){const ne=ge.docsList.reduce((Ke,Le)=>({...Ke,[Le.id]:Le.status}),{}),ye=kn(jt,"users",s.uid,"settings","main");await Os(ye,{checklist:ne,updated_at:dr()},{merge:!0})}if(ge.paymentRecords){const ne=kr(jt,"users",s.uid,"payments");for(const[ye,Ke]of Object.entries(ge.paymentRecords)){const Le=kn(ne);await Os(Le,{stage_id:parseInt(ye),amount:Ke.paidAmount,payment_date:Ke.date,receipt_number:Ke.receipt,created_at:dr()})}}alert("Data restoration successful! The page will now reload."),window.location.reload()}catch(ge){console.error(ge),alert("Failed to parse backup file.")}},de.readAsText(ee),He(!1)},Mr=()=>{window.print()};return t?v.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center",children:v.jsx(d0,{className:"w-8 h-8 animate-spin text-indigo-600"})}):s?v.jsx("div",{className:`min-h-screen ${o?"dark":""}`,children:v.jsxs("div",{className:"min-h-screen bg-slate-50/50 dark:bg-slate-900 font-sans text-slate-900 dark:text-slate-100 pb-24 md:pb-8 selection:bg-indigo-100 dark:selection:bg-indigo-900 selection:text-indigo-700 dark:selection:text-indigo-300 transition-colors",children:[v.jsx("style",{children:`
          @media print {
            @page { margin: 1.5cm; size: A4 portrait; }
            body { background: white !important; -webkit-print-color-adjust: exact; print-color-adjust: exact; margin: 0; padding: 0; font-size: 12px; }
            .no-print { display: none !important; }
            .print-only { display: block !important; width: 100%; position: relative; top: 0; left: 0; z-index: 1000; background: white; }
            html, body { height: auto; overflow: visible; }
            .break-before-page { page-break-before: always; }
            .break-inside-avoid { page-break-inside: avoid; }
            .dark { color-scheme: light; }
          }
          .print-only { display: none; }
          
          /* Custom Scrollbar */
          .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
            height: 6px;
          }
          .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
          }
          .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
          }
          .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #475569;
          }
          .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
          }
        `}),v.jsx("div",{className:"bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-b border-slate-200/60 dark:border-slate-700/60 sticky top-0 z-40 transition-all duration-300 no-print",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:v.jsxs("div",{className:"flex flex-row justify-between items-center py-4",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("div",{className:"bg-gradient-to-tr from-indigo-600 to-violet-600 p-2.5 rounded-xl text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50",children:v.jsx(l0,{className:"w-5 h-5"})}),v.jsxs("div",{children:[v.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-slate-100 tracking-tight leading-tight",children:"Property Tracker"}),v.jsx("p",{className:"text-[10px] uppercase font-bold text-slate-400 tracking-wider",children:"Dashboard"})]})]}),v.jsx(lS,{activeTab:d,setActiveTab:m}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx(oS,{darkMode:o,setDarkMode:u}),v.jsx("button",{onClick:()=>He(!0),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-800 rounded-xl transition-colors",title:"Data Backup/Restore",children:v.jsx(z_,{className:"w-5 h-5"})}),v.jsx("button",{onClick:Js,className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-800 rounded-xl transition-colors",title:"Export CSV",children:v.jsx(Hm,{className:"w-5 h-5"})}),v.jsx("button",{onClick:Mr,className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 dark:hover:bg-slate-800 rounded-xl transition-colors",title:"Print",children:v.jsx(J_,{className:"w-5 h-5"})}),v.jsx("button",{onClick:Xs,className:"p-2 text-slate-400 hover:text-rose-600 hover:bg-rose-50 dark:hover:bg-rose-900/20 rounded-xl transition-colors",children:v.jsx(G_,{className:"w-5 h-5"})})]})]})})}),v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 space-y-6 animate-in fade-in duration-500 no-print",children:[d==="schedule"&&v.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[v.jsxs("div",{className:"md:col-span-2 lg:col-span-1 bg-slate-900 dark:bg-slate-800 rounded-[2.5rem] p-8 text-white relative overflow-hidden shadow-2xl shadow-indigo-900/20 flex flex-col justify-between min-h-[320px]",children:[v.jsxs("div",{className:"relative z-10",children:[v.jsxs("div",{className:"flex justify-between items-start mb-8",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-slate-400 dark:text-slate-300 text-xs font-bold uppercase tracking-wider mb-2",children:"Total Paid"}),v.jsx("h2",{className:"text-4xl font-bold tracking-tight mb-1",children:Xe(Rn)}),v.jsxs("p",{className:"text-sm text-slate-400 dark:text-slate-300",children:["Total Cost: ",v.jsx("span",{className:"text-white font-medium",children:Xe(Ln)})]})]}),v.jsx("div",{className:"bg-white/10 backdrop-blur-md p-3 rounded-2xl border border-white/10",children:v.jsx(qm,{className:"w-6 h-6 text-indigo-300"})})]}),v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex justify-between text-sm font-medium",children:[v.jsx("span",{className:"text-indigo-200",children:"Progress"}),v.jsxs("span",{className:"text-white",children:[us.toFixed(1),"%"]})]}),v.jsx("div",{className:"w-full bg-slate-800/50 rounded-full h-4 overflow-hidden p-1 shadow-inner border border-white/5",children:v.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-violet-400 h-full rounded-full shadow-[0_0_15px_rgba(99,102,241,0.5)] transition-all duration-1000 ease-out",style:{width:`${us}%`}})}),v.jsxs("div",{className:"flex justify-between text-xs text-slate-500 dark:text-slate-400 pt-2 border-t border-white/10",children:[v.jsx("span",{children:"Started"}),v.jsxs("span",{children:["Agreement: ",Xe(Ut)]})]})]})]}),v.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-600/20 rounded-full blur-[80px] -mr-16 -mt-16 pointer-events-none"}),v.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-violet-600/20 rounded-full blur-[60px] -ml-10 -mb-10 pointer-events-none"})]}),v.jsx(a0,{title:"Govt. Taxes Breakdown",total:Xe(An+Xt+ln),items:[{label:`GST (${(Qn*100).toFixed(0)}%)`,value:Xe(An)},{label:`Stamp Duty (${(Ue*100).toFixed(0)}%)`,value:Xe(Xt)},{label:"Registration",value:Xe(ln)}],icon:Vh}),v.jsx(a0,{title:"Possession Charges",total:Xe(mn),items:[{label:"Maint. + Corpus",value:Xe(mn)},{label:"Incidental/Extras",value:Xe(Dr)}],icon:q_,bgClass:"bg-amber-50/50 dark:bg-amber-900/10",borderClass:"border-amber-100 dark:border-amber-800"})]}),v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("h2",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:"Payment Timeline"}),v.jsxs("span",{className:"text-xs font-medium bg-slate-100 dark:bg-slate-800 px-3 py-1 rounded-full text-slate-500 dark:text-slate-400",children:[Jt.filter(A=>A.status==="paid").length," / ",Jt.length," Completed"]})]}),v.jsx("div",{className:"md:hidden relative pl-4 border-l-2 border-slate-100 dark:border-slate-700 ml-4 space-y-8 my-4",children:Jt.map(A=>v.jsxs("div",{className:"relative pl-6",children:[v.jsx("div",{className:`absolute -left-[9px] top-0 w-4 h-4 rounded-full border-2 border-white dark:border-slate-900 shadow-sm transition-colors duration-300 ${A.status==="paid"?"bg-emerald-500 ring-4 ring-emerald-50 dark:ring-emerald-900/50":"bg-slate-300 dark:bg-slate-600"}`}),v.jsxs("div",{onClick:()=>{b(A.id),S({date:A.record.date||new Date().toISOString().split("T")[0],receipt:A.record.receipt||"",amount:A.record.paidAmount||A.totalPayable})},className:`p-4 rounded-2xl border transition-all active:scale-[0.98] ${A.status==="paid"?"bg-white dark:bg-slate-800 border-emerald-100 dark:border-emerald-800 shadow-sm":"bg-white dark:bg-slate-800 border-slate-100 dark:border-slate-700 shadow-sm"}`,children:[v.jsxs("div",{className:"flex justify-between items-start mb-2",children:[v.jsxs("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:["Stage ",A.id]}),v.jsx(lh,{status:A.status})]}),v.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 mb-1",children:A.label}),v.jsxs("div",{className:"flex justify-between items-end mt-3",children:[v.jsxs("div",{children:[v.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Amount"}),v.jsx("div",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:Xe(A.totalPayable)})]}),A.balance>1&&v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"text-[10px] text-rose-400 uppercase font-bold",children:"Balance"}),v.jsx("div",{className:"text-sm font-bold text-rose-600 dark:text-rose-400",children:Xe(A.balance)})]})]})]})]},A.id))}),v.jsx("div",{className:"hidden md:block bg-white dark:bg-slate-800 rounded-[2rem] shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:v.jsxs("table",{className:"w-full text-left",children:[v.jsx("thead",{className:"bg-slate-50/50 dark:bg-slate-900/50 text-xs uppercase font-bold text-slate-400 dark:text-slate-500",children:v.jsxs("tr",{children:[v.jsx("th",{className:"py-5 px-6",children:"Stage Details"}),v.jsx("th",{className:"py-5 px-6 text-right",children:"Amount"}),v.jsx("th",{className:"py-5 px-6",children:"Status"}),v.jsx("th",{className:"py-5 px-6 text-right",children:"Balance"}),v.jsx("th",{className:"py-5 px-6 text-center",children:"Action"})]})}),v.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Jt.map(A=>v.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-700/30 transition-colors",children:[v.jsxs("td",{className:"py-4 px-6",children:[v.jsx("div",{className:"font-bold text-slate-700 dark:text-slate-200",children:A.label}),A.stagePercent>0&&v.jsxs("div",{className:"text-xs text-slate-400 dark:text-slate-500 mt-0.5",children:[A.stagePercent,"%"]})]}),v.jsx("td",{className:"py-4 px-6 text-right font-mono font-medium text-slate-600 dark:text-slate-300",children:Xe(A.totalPayable)}),v.jsx("td",{className:"py-4 px-6",children:v.jsx(lh,{status:A.status})}),v.jsx("td",{className:"py-4 px-6 text-right font-mono text-slate-500 dark:text-slate-400",children:A.balance<=1?"-":Xe(A.balance)}),v.jsx("td",{className:"py-4 px-6 text-center",children:v.jsx("button",{onClick:()=>{b(A.id),S({date:A.record.date||new Date().toISOString().split("T")[0],receipt:A.record.receipt||"",amount:A.record.paidAmount||A.totalPayable})},className:"p-2 text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded-xl transition-colors",children:v.jsx(Wm,{className:"w-4 h-4"})})})]},A.id))})]})})]}),d==="loan"&&v.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v.jsx(go,{title:"Total Disbursed",value:Xe(Bt.totalDisbursed+Bt.totalOwn),subtext:`Target: ${Xe(Ln)}`,icon:Ou,variant:"primary"}),v.jsx(go,{title:"Total Interest Paid",value:Xe(Bt.totalEmiPaid),subtext:"Principal + Interest outflow",icon:Km})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-sm border border-slate-100 dark:border-slate-700 flex flex-col",children:[v.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 mb-6 flex items-center gap-2 text-sm",children:[v.jsx(qm,{className:"w-4 h-4 text-indigo-500"})," Funding Mix"]}),v.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 gap-6",children:[v.jsx(uS,{data:[{value:Bt.totalDisbursed,color:"#6366f1"},{value:Bt.totalOwn,color:"#10b981"},{value:Math.max(0,Bt.balanceDue),color:"#f1f5f9"}],size:160}),v.jsxs("div",{className:"w-full space-y-3 text-xs",children:[v.jsxs("div",{className:"flex items-center justify-between p-2 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100/50 dark:border-indigo-800/50",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),v.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:"Bank Loan"})]}),v.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-100",children:Xe(Bt.totalDisbursed)})]}),v.jsxs("div",{className:"flex items-center justify-between p-2 rounded-xl bg-emerald-50/50 dark:bg-emerald-900/20 border border-emerald-100/50 dark:border-emerald-800/50",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500"}),v.jsx("span",{className:"text-slate-600 dark:text-slate-300 font-medium",children:"Own Contrib."})]}),v.jsx("span",{className:"font-bold text-slate-800 dark:text-slate-100",children:Xe(Bt.totalOwn)})]}),v.jsxs("div",{className:"flex items-center justify-between p-2 rounded-xl bg-slate-50 dark:bg-slate-700/50 border border-slate-100 dark:border-slate-600",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300 dark:bg-slate-600"}),v.jsx("span",{className:"text-slate-500 dark:text-slate-400",children:"Balance Due"})]}),v.jsx("span",{className:"font-bold text-slate-400 dark:text-slate-500",children:Xe(Math.max(0,Bt.balanceDue))})]})]})]})]}),v.jsx("div",{className:"md:col-span-2 h-full",children:v.jsx(cS,{data:Bt.chartData})})]}),v.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-[2rem] shadow-sm border border-slate-100 dark:border-slate-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100",children:"Transaction History"}),v.jsxs("button",{onClick:()=>{I(null),D({type:"emi",date:new Date().toISOString().split("T")[0],amount:"",notes:""}),vt(!0)},className:"text-xs bg-indigo-600 text-white px-4 py-2 rounded-full font-bold shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[v.jsx(X_,{className:"w-3 h-3"})," Add Entry"]})]}),me.length===0?v.jsxs("div",{className:"text-center py-12",children:[v.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:v.jsx(Z_,{className:"w-6 h-6 text-slate-300 dark:text-slate-500"})}),v.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-sm",children:"No transactions yet."})]}):v.jsx("div",{className:"space-y-3",children:me.sort((A,ee)=>new Date(ee.date||ee.transaction_date)-new Date(A.date||A.transaction_date)).map(A=>v.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-700/30 rounded-2xl border border-transparent hover:border-slate-100 dark:hover:border-slate-600 transition-all group",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:`p-3 rounded-2xl ${A.type==="emi"?"bg-indigo-50 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400":A.type==="own"?"bg-emerald-50 dark:bg-emerald-900/40 text-emerald-600 dark:text-emerald-400":"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-400"}`,children:A.type==="emi"?v.jsx(u0,{className:"w-5 h-5"}):A.type==="own"?v.jsx(Ou,{className:"w-5 h-5"}):v.jsx(Dh,{className:"w-5 h-5"})}),v.jsxs("div",{children:[v.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 capitalize",children:A.type}),v.jsx("div",{className:"text-xs text-slate-400 dark:text-slate-500",children:Ta(A.transaction_date||A.date)})]})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("div",{className:"font-bold text-slate-800 dark:text-slate-100 font-mono",children:Xe(A.amount)}),v.jsxs("div",{className:"flex justify-end gap-2 mt-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[v.jsx("button",{onClick:()=>{D({type:A.type,date:A.transaction_date||A.date,amount:A.amount,notes:A.notes||""}),I(A.id),vt(!0)},className:"text-indigo-600 dark:text-indigo-400 text-[10px] font-bold uppercase",children:"Edit"}),v.jsx("button",{onClick:()=>Xn(A.id),className:"text-rose-600 dark:text-rose-400 text-[10px] font-bold uppercase",children:"Delete"})]})]})]},A.id))})]})]}),d==="bank_plan"&&v.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:[v.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[v.jsx(go,{title:"Current EMI",value:Xe(un.currentEMI),variant:"default"}),v.jsx(go,{title:"Projected EMI",value:Xe(un.projectedEMI),variant:"default"}),v.jsx(go,{title:"Current ROI",value:`${un.currentROI}%`,variant:"default"}),v.jsx(go,{title:"Tenure End",value:un.tenureEnd,variant:"default"})]}),v.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2rem] shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[v.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 flex flex-col md:flex-row justify-between items-center gap-4",children:[v.jsx("h3",{className:"font-bold text-slate-800 dark:text-slate-100",children:"Amortization Schedule"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>{V(null),Pe(!0),ie({date:new Date().toISOString().split("T")[0],type:"emi",emi:"",amount:"",interest:"",principal:"",roi:"",balance:""})},className:"text-xs bg-indigo-600 text-white px-4 py-2 rounded-full font-bold hover:bg-indigo-700 transition-colors",children:"Add Entry"}),v.jsx("button",{onClick:Ys,className:"text-xs bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 px-4 py-2 rounded-full font-bold hover:bg-rose-100 dark:hover:bg-rose-900/30 transition-colors",children:"Clear All"})]})]}),v.jsxs("div",{className:"p-6 bg-slate-50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("div",{className:"p-1.5 bg-indigo-100 dark:bg-indigo-900/40 text-indigo-600 dark:text-indigo-400 rounded-lg",children:v.jsx($m,{className:"w-4 h-4"})}),v.jsx("span",{className:"text-xs font-bold uppercase text-slate-500 dark:text-slate-400",children:"Impact Simulator"})]}),v.jsxs("div",{className:"flex bg-slate-200 dark:bg-slate-700 p-1 rounded-lg",children:[v.jsxs("button",{onClick:()=>H("lumpsum"),className:`px-4 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all flex items-center gap-2 ${O==="lumpsum"?"bg-white dark:bg-slate-600 shadow-sm text-indigo-700 dark:text-indigo-300":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:[v.jsx(sw,{className:"w-3 h-3"})," Lumpsum"]}),v.jsxs("button",{onClick:()=>H("stepup"),className:`px-4 py-1.5 rounded-md text-[10px] font-bold uppercase transition-all flex items-center gap-2 ${O==="stepup"?"bg-white dark:bg-slate-600 shadow-sm text-indigo-700 dark:text-indigo-300":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:[v.jsx(Km,{className:"w-3 h-3"})," Step-Up"]})]})]}),v.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[v.jsx("div",{className:"flex-1 space-y-4",children:O==="lumpsum"?v.jsxs("div",{className:"space-y-2 animate-in fade-in",children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 ml-1",children:"One-time Payment"}),v.jsxs("div",{className:"relative",children:[v.jsx("span",{className:"absolute left-4 top-3.5 text-slate-400 font-bold",children:""}),v.jsx("input",{type:"number",placeholder:"e.g. 100000",className:"w-full pl-8 pr-4 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-sm focus:ring-2 focus:ring-indigo-500 outline-none font-semibold text-slate-700 dark:text-slate-200",value:g,onChange:A=>w(A.target.value)})]}),v.jsx("p",{className:"text-[10px] text-slate-400 ml-1",children:"Calculate impact of reduced principal today."})]}):v.jsxs("div",{className:"space-y-2 animate-in fade-in",children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400 ml-1",children:"Annual EMI Increase"}),v.jsxs("div",{className:"relative",children:[v.jsx("input",{type:"number",placeholder:"e.g. 5 or 10",className:"w-full pl-4 pr-8 py-3 rounded-xl border border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800 text-sm focus:ring-2 focus:ring-indigo-500 outline-none font-semibold text-slate-700 dark:text-slate-200",value:T,onChange:A=>P(A.target.value)}),v.jsx("span",{className:"absolute right-4 top-3.5 text-slate-400 font-bold",children:"%"})]}),v.jsxs("p",{className:"text-[10px] text-slate-400 ml-1",children:["Simulates increasing EMI by ",T||"X","% yearly."]})]})}),v.jsx("div",{className:"flex-[1.5] bg-white dark:bg-slate-800 p-5 rounded-2xl border border-slate-100 dark:border-slate-700 shadow-sm relative overflow-hidden",children:Yn?v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 animate-in slide-in-from-right-4 duration-500",children:[v.jsx(o0,{label:"Total Interest",original:Yn.originalInterest,current:Yn.newInterest,unit:"",color:"bg-emerald-500"}),v.jsx(o0,{label:"Loan Tenure",original:Yn.originalTenure,current:Yn.newTenure,unit:"months",color:"bg-indigo-500"})]}):v.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center p-4",children:[v.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 p-3 rounded-full mb-2",children:v.jsx($m,{className:"w-5 h-5 text-slate-300 dark:text-slate-500"})}),v.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500",children:"Enter details to see impact."})]})})]})]}),v.jsx("div",{className:"overflow-x-auto",children:v.jsxs("table",{className:"w-full text-left text-sm",children:[v.jsx("thead",{className:"bg-slate-50 dark:bg-slate-900/50 text-xs uppercase font-bold text-slate-400 dark:text-slate-500",children:v.jsxs("tr",{children:[v.jsx("th",{className:"p-4",children:"Date"}),v.jsx("th",{className:"p-4",children:"Type"}),v.jsx("th",{className:"p-4 text-right",children:"Amount"}),v.jsx("th",{className:"p-4 text-right hidden md:table-cell",children:"Interest"}),v.jsx("th",{className:"p-4 text-right hidden md:table-cell",children:"Principal"}),v.jsx("th",{className:"p-4 text-right",children:"Balance"}),v.jsx("th",{className:"p-4 w-10"})]})}),v.jsx("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:ke.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:"7",className:"p-8 text-center text-slate-400 dark:text-slate-500",children:"No entries yet. Add your first entry above."})}):ke.map((A,ee)=>v.jsxs("tr",{className:"hover:bg-slate-50/50 dark:hover:bg-slate-700/30 group",children:[v.jsx("td",{className:"p-4 text-slate-600 dark:text-slate-300",children:Ta(A.date)}),v.jsx("td",{className:"p-4",children:v.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${A.type==="disb"?"bg-blue-50 dark:bg-blue-900/40 text-blue-600 dark:text-blue-400":"bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400"}`,children:A.type==="disb"?"Disb":"EMI"})}),v.jsx("td",{className:"p-4 text-right font-mono font-medium dark:text-slate-200",children:Xe(A.type==="disb"?A.amount:A.emi||A.amount)}),v.jsx("td",{className:"p-4 text-right text-slate-400 dark:text-slate-500 hidden md:table-cell",children:A.interest?Xe(A.interest):"-"}),v.jsx("td",{className:"p-4 text-right text-slate-400 dark:text-slate-500 hidden md:table-cell",children:A.principal?Xe(A.principal):"-"}),v.jsx("td",{className:"p-4 text-right font-mono font-bold text-slate-700 dark:text-slate-200",children:Xe(A.balance)}),v.jsx("td",{className:"p-4 text-right",children:v.jsxs("div",{className:"flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[v.jsx("button",{onClick:()=>Or(A),className:"p-1 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 rounded",children:v.jsx(Wm,{className:"w-3 h-3"})}),v.jsx("button",{onClick:()=>Vr(A.id),className:"p-1 hover:bg-rose-50 dark:hover:bg-rose-900/20 text-rose-600 dark:text-rose-400 rounded",children:v.jsx(tw,{className:"w-3 h-3"})})]})})]},ee))})]})})]})]}),d==="docs"&&v.jsx("div",{className:"space-y-6 animate-in slide-in-from-bottom-4 duration-500",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-[2rem] shadow-sm border border-slate-100 dark:border-slate-700 overflow-hidden",children:[v.jsxs("div",{className:"p-6 border-b border-slate-100 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50",children:[v.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 flex items-center gap-2",children:[v.jsx(Oh,{className:"w-5 h-5 text-indigo-500"})," Document Checklist"]}),v.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:"Track critical property documents."})]}),v.jsx("div",{className:"divide-y divide-slate-50 dark:divide-slate-700",children:Y.map(A=>v.jsxs("div",{onClick:()=>Qs(A.id,A.status),className:"flex items-center justify-between p-4 hover:bg-slate-50 dark:hover:bg-slate-700/30 cursor-pointer transition-colors group",children:[v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${A.status==="received"?"bg-emerald-500 border-emerald-500 scale-110":A.status==="na"?"bg-slate-100 dark:bg-slate-700 border-slate-200 dark:border-slate-600":"border-slate-200 dark:border-slate-600 bg-white dark:bg-slate-800"}`,children:[A.status==="received"&&v.jsx(c0,{className:"w-4 h-4 text-white"}),A.status==="na"&&v.jsx(h0,{className:"w-3 h-3 text-slate-400 dark:text-slate-500"})]}),v.jsx("span",{className:`font-medium transition-colors ${A.status==="received"?"text-slate-400 dark:text-slate-500 line-through":"text-slate-700 dark:text-slate-200"}`,children:A.label})]}),v.jsx(lh,{status:A.status})]},A.id))})]}),v.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-indigo-800 dark:from-indigo-950 dark:to-indigo-900 text-white rounded-[2.5rem] p-8 shadow-xl relative overflow-hidden flex flex-col justify-center min-h-[300px]",children:[v.jsxs("div",{className:"relative z-10 space-y-6",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Why track documents?"}),v.jsxs("p",{className:"text-indigo-200 dark:text-indigo-300 text-sm leading-relaxed",children:["Missing documents like ",v.jsx("strong",{children:"Index II"})," or ",v.jsx("strong",{children:"NOC"})," can delay resale or loan transfer by months."]})]}),v.jsxs("div",{className:"bg-white/10 p-5 rounded-2xl border border-white/10 backdrop-blur-sm",children:[v.jsxs("h4",{className:"font-bold text-sm mb-2 text-indigo-100 flex items-center gap-2",children:[v.jsx(nw,{className:"w-4 h-4"})," Pro Tip"]}),v.jsx("p",{className:"text-xs text-indigo-200/80 leading-relaxed",children:"Always scan and upload physical documents to secure cloud storage (DigiLocker) immediately."})]})]}),v.jsx(W_,{className:"absolute -right-8 -bottom-8 w-48 h-48 text-white opacity-5 transform rotate-12"})]})]})})]}),v.jsx(ku,{isOpen:Nt,onClose:()=>He(!1),title:"Data Management",children:v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800 rounded-2xl",children:[v.jsxs("h4",{className:"font-bold text-sm text-amber-800 dark:text-amber-300 flex items-center gap-2 mb-1",children:[v.jsx(B_,{className:"w-4 h-4"})," Important"]}),v.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400",children:"Backup your data regularly. Restoring data will merge with existing records."})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("button",{onClick:Zs,className:"flex flex-col items-center justify-center p-6 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-2xl hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors group",children:[v.jsx("div",{className:"p-3 bg-white dark:bg-slate-600 rounded-full shadow-sm mb-3 group-hover:scale-110 transition-transform",children:v.jsx(Hm,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})}),v.jsx("span",{className:"font-bold text-sm text-slate-700 dark:text-slate-200",children:"Backup Data"}),v.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 mt-1",children:"Download JSON"})]}),v.jsxs("label",{className:"flex flex-col items-center justify-center p-6 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-2xl hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors group cursor-pointer relative",children:[v.jsx("input",{type:"file",accept:".json",className:"hidden",onChange:ei}),v.jsx("div",{className:"p-3 bg-white dark:bg-slate-600 rounded-full shadow-sm mb-3 group-hover:scale-110 transition-transform",children:v.jsx(rw,{className:"w-6 h-6 text-emerald-600 dark:text-emerald-400"})}),v.jsx("span",{className:"font-bold text-sm text-slate-700 dark:text-slate-200",children:"Restore Data"}),v.jsx("span",{className:"text-[10px] text-slate-400 dark:text-slate-500 mt-1",children:"Upload JSON"})]})]})]})}),v.jsx(ku,{isOpen:!!Ae,onClose:()=>b(null),title:"Update Payment",children:v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Payment Date"}),v.jsx("input",{type:"date",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-slate-800 dark:text-slate-100",value:x.date,onChange:A=>S({...x,date:A.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Amount Paid"}),v.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-slate-800 dark:text-slate-100",value:x.amount,onChange:A=>S({...x,amount:A.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Receipt No."}),v.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 text-slate-800 dark:text-slate-100",value:x.receipt,onChange:A=>S({...x,receipt:A.target.value})})]}),v.jsx("button",{onClick:_t,className:"w-full bg-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50 hover:bg-indigo-700 transition-all mt-2",children:"Save Payment"})]})}),v.jsx(ku,{isOpen:ft,onClose:()=>vt(!1),title:M?"Edit Transaction":"New Transaction",children:v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"flex p-1 bg-slate-100 dark:bg-slate-700 rounded-xl",children:[{id:"emi",label:"EMI"},{id:"disbursement",label:"Bank Release"},{id:"own",label:"Own"},{id:"incidental",label:"Extra"}].map(A=>v.jsx("button",{onClick:()=>D({...R,type:A.id}),className:`flex-1 py-2 text-xs font-bold rounded-lg transition-all ${R.type===A.id?"bg-white dark:bg-slate-600 shadow-sm text-indigo-600 dark:text-indigo-400":"text-slate-500 dark:text-slate-400"}`,children:A.label},A.id))}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Date"}),v.jsx("input",{type:"date",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none text-slate-800 dark:text-slate-100",value:R.date,onChange:A=>D({...R,date:A.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Amount"}),v.jsx("input",{type:"number",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none text-slate-800 dark:text-slate-100",value:R.amount,onChange:A=>D({...R,amount:A.target.value})})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase mb-1 block",children:"Notes"}),v.jsx("input",{type:"text",className:"w-full p-3 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl outline-none text-slate-800 dark:text-slate-100",placeholder:"Optional notes",value:R.notes,onChange:A=>D({...R,notes:A.target.value})})]}),v.jsx("button",{onClick:wt,className:"w-full bg-indigo-600 text-white font-bold py-4 rounded-xl shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50 hover:bg-indigo-700 transition-all mt-2",children:"Save Transaction"})]})}),v.jsx(ku,{isOpen:be,onClose:()=>Pe(!1),title:re?"Edit Bank Entry":"Add Bank Entry",children:v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("div",{className:"col-span-2",children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Date"}),v.jsx("input",{type:"date",className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:B.date,onChange:A=>ie({...B,date:A.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Type"}),v.jsxs("select",{className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:B.type,onChange:A=>ie({...B,type:A.target.value}),children:[v.jsx("option",{value:"emi",children:"EMI"}),v.jsx("option",{value:"disb",children:"Disbursement"})]})]}),B.type==="disb"?v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Amount"}),v.jsx("input",{type:"number",className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:B.amount,onChange:A=>ie({...B,amount:A.target.value})})]}):v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"EMI Amount"}),v.jsx("input",{type:"number",className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:B.emi,onChange:A=>ie({...B,emi:A.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Interest"}),v.jsx("input",{type:"number",className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:B.interest,onChange:A=>ie({...B,interest:A.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Principal"}),v.jsx("input",{type:"number",className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:B.principal,onChange:A=>ie({...B,principal:A.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Balance"}),v.jsx("input",{type:"number",className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:B.balance,onChange:A=>ie({...B,balance:A.target.value})})]}),v.jsxs("div",{children:[v.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"ROI %"}),v.jsx("input",{type:"number",className:"w-full p-2 border border-slate-200 dark:border-slate-600 rounded-lg bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-100",value:B.roi,onChange:A=>ie({...B,roi:A.target.value})})]}),v.jsx("button",{onClick:pr,className:"col-span-2 bg-indigo-600 text-white py-3 rounded-xl font-bold mt-2 hover:bg-indigo-700 transition-colors",children:"Save Entry"})]})}),v.jsx(aS,{activeTab:d,setActiveTab:m})]})}):v.jsx(dS,{darkMode:o})};j_.createRoot(document.getElementById("root")).render(v.jsx(De.StrictMode,{children:v.jsx(hS,{})}));
